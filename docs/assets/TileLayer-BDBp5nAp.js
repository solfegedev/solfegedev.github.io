import{l as d}from"./leaflet-src-DBNPRDgh.js";function O(t,n){const e=React.useRef(n);React.useEffect(function(){n!==e.current&&t.attributionControl!=null&&(e.current!=null&&t.attributionControl.removeAttribution(e.current),n!=null&&t.attributionControl.addAttribution(n)),e.current=n},[t,n])}const z=1;function T(t){return Object.freeze({__version:z,map:t})}function S(t,n){return Object.freeze({...t,...n})}const p=React.createContext(null);function R(){const t=React.use(p);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function b(t){function n(e,u){const{instance:c,context:r}=t(e).current;React.useImperativeHandle(u,()=>c);const{children:a}=e;return a==null?null:React.createElement(p,{value:r},a)}return React.forwardRef(n)}function N(t){function n(e,u){const[c,r]=React.useState(!1),{instance:a}=t(e,r).current;React.useImperativeHandle(u,()=>a),React.useEffect(function(){c&&a.update()},[a,c,e.children]);const o=a._contentNode;return o?ReactDOM.createPortal(e.children,o):null}return React.forwardRef(n)}function j(t){function n(e,u){const{instance:c}=t(e).current;return React.useImperativeHandle(u,()=>c),null}return React.forwardRef(n)}function C(t,n){const e=React.useRef(void 0);React.useEffect(function(){return n!=null&&t.instance.on(n),e.current=n,function(){e.current!=null&&t.instance.off(e.current),e.current=null}},[t,n])}function y(t,n){const e=t.pane??n.pane;return e?{...t,pane:e}:t}function k(t,n){return function(u,c){const r=R(),a=t(y(u,r),r);return O(r.map,u.attribution),C(a.current,u.eventHandlers),n(a.current,r,u,c),a}}function v(t,n,e){return Object.freeze({instance:t,context:n,container:e})}function m(t,n){return n==null?function(u,c){const r=React.useRef(void 0);return r.current||(r.current=t(u,c)),r}:function(u,c){const r=React.useRef(void 0);r.current||(r.current=t(u,c));const a=React.useRef(u),{instance:o}=r.current;return React.useEffect(function(){a.current!==u&&(n(o,u,a.current),a.current=u)},[o,u,n]),r}}function g(t,n){React.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){n.layerContainer?.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function I(t){return function(e){const u=R(),c=t(y(e,u),u);return O(u.map,e.attribution),C(c.current,e.eventHandlers),g(c.current,u),c}}function A(t,n){const e=React.useRef(void 0);React.useEffect(function(){if(n.pathOptions!==e.current){const c=n.pathOptions??{};t.instance.setStyle(c),e.current=c}},[t,n])}function D(t){return function(e){const u=R(),c=t(y(e,u),u);return C(c.current,e.eventHandlers),g(c.current,u),A(c.current,e),c}}function _(t,n){const e=m(t,n),u=I(e);return b(u)}function V(t,n){const e=m(t),u=k(e,n);return N(u)}function q(t,n){const e=m(t,n),u=D(e);return b(u)}function Z(t,n){const e=m(t,n),u=I(e);return j(u)}function B(t,n,e){const{opacity:u,zIndex:c}=n;u!=null&&u!==e.opacity&&t.setOpacity(u),c!=null&&c!==e.zIndex&&t.setZIndex(c)}function G(){return R().map}function F(t){const n=G();return React.useEffect(function(){return n.on(t),function(){n.off(t)}},[n,t]),n}function U({bounds:t,boundsOptions:n,center:e,children:u,className:c,id:r,placeholder:a,style:o,whenReady:i,zoom:f,...M},H){const[P]=React.useState({className:c,id:r,style:o}),[l,h]=React.useState(null),L=React.useRef(void 0);React.useImperativeHandle(H,()=>l?.map??null,[l]);const w=React.useCallback(E=>{if(E!==null&&!L.current){const s=new d.Map(E,M);L.current=s,e!=null&&f!=null?s.setView(e,f):t!=null&&s.fitBounds(t,n),i!=null&&s.whenReady(i),h(T(s))}},[]);React.useEffect(()=>()=>{l?.map.remove()},[l]);const x=l?React.createElement(p,{value:l},u):a??null;return React.createElement("div",{...P,ref:w},x)}const J=React.forwardRef(U),K=_(function({position:n,...e},u){const c=new d.Marker(n,e);return v(c,S(u,{overlayContainer:c}))},function(n,e,u){e.position!==u.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==u.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==u.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==u.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==u.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),Q=V(function(n,e){const u=new d.Popup(n,e.overlayContainer);return v(u,e)},function(n,e,{position:u},c){React.useEffect(function(){const{instance:a}=n;function o(f){f.popup===a&&(a.update(),c(!0))}function i(f){f.popup===a&&c(!1)}return e.map.on({popupopen:o,popupclose:i}),e.overlayContainer==null?(u!=null&&a.setLatLng(u),a.openOn(e.map)):e.overlayContainer.bindPopup(a),function(){e.map.off({popupopen:o,popupclose:i}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(a)}},[n,e,c,u])}),W=Z(function({url:n,...e},u){const c=new d.TileLayer(n,y(e,u));return v(c,u)},function(n,e,u){B(n,e,u);const{url:c}=e;c!=null&&c!==u.url&&n.setUrl(c)});export{p as L,J as M,Q as P,W as T,K as a,R as b,b as c,m as d,v as e,S as f,q as g,F as h,G as u};
