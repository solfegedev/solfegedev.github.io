import"./index-HzPlS_0C.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as w}from"./api-CH_Pe6Vg.js";import{B as S}from"./button-1856JkWy.js";import"./clsx-B-dksMZM.js";import"./utils-Bp4xmdaH.js";function R({value:t,onChange:s}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"tax-year",className:"block text-sm font-medium mb-1 text-slate-200",children:"Tax Year"}),e.jsxs("select",{id:"tax-year",value:t,onChange:a=>s(a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 text-slate-100 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"2024-25",children:"2024-25"}),e.jsx("option",{value:"2025-26",children:"2025-26"})]})]})}function T({grossSalary:t,taxAlreadyPaid:s,grossInterest:a,grossDividends:n,onGrossSalaryChange:m,onTaxAlreadyPaidChange:p,onGrossInterestChange:x,onGrossDividendsChange:h}){const d=(l,c)=>{const i=parseFloat(l);c(isNaN(i)?0:i)};return e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gross-salary",className:"block text-sm font-medium mb-1 text-slate-200",children:"Gross Salary"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"£"}),e.jsx("input",{id:"gross-salary",type:"number",min:"0",step:"0.01",value:t,onChange:l=>d(l.target.value,m),className:"w-full pl-7 pr-3 py-2 bg-slate-700 border border-slate-600 text-slate-100 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax-paid",className:"block text-sm font-medium mb-1 text-slate-200",children:"Tax Already Paid"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"£"}),e.jsx("input",{id:"tax-paid",type:"number",min:"0",step:"0.01",value:s,onChange:l=>d(l.target.value,p),className:"w-full pl-7 pr-3 py-2 bg-slate-700 border border-slate-600 text-slate-100 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gross-interest",className:"block text-sm font-medium mb-1 text-slate-200",children:"Gross Interest"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"£"}),e.jsx("input",{id:"gross-interest",type:"number",min:"0",step:"0.01",value:a,onChange:l=>d(l.target.value,x),className:"w-full pl-7 pr-3 py-2 bg-slate-700 border border-slate-600 text-slate-100 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gross-dividends",className:"block text-sm font-medium mb-1 text-slate-200",children:"Gross Dividends"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"£"}),e.jsx("input",{id:"gross-dividends",type:"number",min:"0",step:"0.01",value:n,onChange:l=>d(l.target.value,h),className:"w-full pl-7 pr-3 py-2 bg-slate-700 border border-slate-600 text-slate-100 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]})}function o(t){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(t)}function C({result:t}){const s=t.amount_owed_or_refund<0,a=s?"Refund":"Owed",n=Math.abs(t.amount_owed_or_refund);return e.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-md p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-100",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Total Income:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:o(t.total_income)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Personal Allowance:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:o(t.personal_allowance)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Total Tax Due:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:o(t.total_tax_due)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Tax Already Paid:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:o(t.tax_already_paid)})]}),e.jsxs("div",{className:`col-span-1 md:col-span-2 pt-2 border-t border-purple-700/50 ${s?"text-green-400":"text-red-400"}`,children:[e.jsxs("span",{className:"font-semibold",children:[a,":"]}),e.jsx("span",{className:"ml-2 text-lg font-bold",children:o(n)})]})]})]})}function y(t){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(t)}function I(t){return`${(t*100).toFixed(2)}%`}function B({bands:t}){return t.length===0?e.jsx("p",{className:"text-sm text-slate-400",children:"No tax in this income type"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-600",children:[e.jsx("th",{className:"text-left py-2 px-2 text-slate-200",children:"Band"}),e.jsx("th",{className:"text-right py-2 px-2 text-slate-200",children:"Rate"}),e.jsx("th",{className:"text-right py-2 px-2 text-slate-200",children:"Amount"}),e.jsx("th",{className:"text-right py-2 px-2 text-slate-200",children:"Tax"})]})}),e.jsx("tbody",{children:t.map((s,a)=>e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"py-2 px-2 text-slate-100",children:s.band_name}),e.jsx("td",{className:"text-right py-2 px-2 text-slate-100",children:I(s.rate)}),e.jsx("td",{className:"text-right py-2 px-2 text-slate-100",children:y(s.amount)}),e.jsx("td",{className:"text-right py-2 px-2 text-slate-100",children:y(s.tax)})]},a))})]})})}function r(t){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(t)}function j({title:t,breakdown:s}){const[a,n]=React.useState(!1);return s.gross_amount===0?null:e.jsxs("div",{className:"border border-slate-600 rounded-md mb-4",children:[e.jsxs("button",{onClick:()=>n(!a),className:"w-full px-4 py-3 flex justify-between items-center hover:bg-slate-700/50 text-slate-100",children:[e.jsx("span",{className:"font-medium",children:t}),e.jsxs("span",{className:"text-sm",children:[a?"▼":"▶"," Tax: ",r(s.tax)]})]}),a&&e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Gross:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:r(s.gross_amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Allowance used:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:r(s.allowance_used)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Taxable:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:r(s.taxable_amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Tax:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:r(s.tax)})]})]}),s.starter_rate_amount!==void 0&&s.starter_rate_amount>0&&e.jsxs("div",{className:"text-sm bg-purple-900/30 border border-purple-700/50 p-2 rounded",children:[e.jsx("span",{className:"text-slate-300",children:"Starter Rate for Savings:"}),e.jsx("span",{className:"ml-2 font-medium text-slate-100",children:r(s.starter_rate_amount)})]}),s.psa!==void 0&&s.psa>0&&e.jsxs("div",{className:"text-sm bg-purple-900/30 border border-purple-700/50 p-2 rounded",children:[e.jsx("span",{className:"text-slate-300",children:"PSA Available / Used:"}),e.jsxs("span",{className:"ml-2 font-medium text-slate-100",children:[r(s.psa)," /"," ",r(s.psa_amount||0)]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2 text-slate-200",children:"Tax Breakdown by Band:"}),e.jsx(B,{bands:s.bands})]})]})]})}async function G(t){const s=await fetch(`${w}/tax_calculator/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`Failed to calculate tax: ${s.statusText}`);return s.json()}function F(){const[t,s]=React.useState("2024-25"),[a,n]=React.useState(0),[m,p]=React.useState(0),[x,h]=React.useState(0),[d,l]=React.useState(0),[c,i]=React.useState(null),[f,b]=React.useState(!1),[N,g]=React.useState(null),_=async()=>{b(!0),g(null);try{const u=await G({gross_salary:a,tax_already_paid:m,gross_interest:x,gross_dividends:d,tax_year:t});i(u)}catch(u){g(u instanceof Error?u.message:"Failed to calculate tax"),i(null)}finally{b(!1)}};return e.jsx("div",{className:"min-h-screen px-6 py-8 md:py-12",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-[1100px] flex-col gap-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-slate-50",children:"UK Tax Calculator"}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg shadow-md p-6 mb-6 border border-slate-700/50",children:[e.jsx(R,{value:t,onChange:s}),e.jsx(T,{grossSalary:a,taxAlreadyPaid:m,grossInterest:x,grossDividends:d,onGrossSalaryChange:n,onTaxAlreadyPaidChange:p,onGrossInterestChange:h,onGrossDividendsChange:l}),e.jsx(S,{onClick:_,disabled:f,className:"w-full",children:f?"Calculating...":"Calculate"}),N&&e.jsx("div",{className:"mt-4 p-4 bg-red-900/50 border border-red-700 rounded-md text-red-200",children:N})]}),c&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg shadow-md p-6 border border-slate-700/50",children:[e.jsx(C,{result:c}),e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Income Breakdown"}),e.jsx(j,{title:"Salary",breakdown:c.salary}),e.jsx(j,{title:"Interest",breakdown:c.interest}),e.jsx(j,{title:"Dividends",breakdown:c.dividends})]})]})})}const v=document.getElementById("root");if(!v)throw new Error("Root element not found");document.body.classList.add("tax-calculator-page");ReactDOM.createRoot(v).render(e.jsx(React.StrictMode,{children:e.jsx(F,{})}));
