import"./index-BEtltmLg.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as Y}from"./api-CH_Pe6Vg.js";const F=`${Y}/bookmarks`,M=async a=>{if(a.ok)return a.status===204?null:a.json();throw await a.json().catch(()=>({detail:a.statusText}))},m={get:(a,l)=>fetch(`${F}${a}`,{headers:l?{Authorization:`Bearer ${l}`}:{}}).then(M),post:(a,l,n)=>fetch(`${F}${a}`,{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify(l)}).then(M),put:(a,l,n)=>fetch(`${F}${a}`,{method:"PUT",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify(l)}).then(M),delete:(a,l)=>fetch(`${F}${a}`,{method:"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}).then(M)},K=({auth:a})=>{const[l,n]=React.useState([]),[h,v]=React.useState(!0),[i,d]=React.useState(null),[u,g]=React.useState(""),[f,x]=React.useState(""),[p,N]=React.useState(""),[L,k]=React.useState(""),[R,j]=React.useState("user"),[U,y]=React.useState(null),_=async()=>{try{const s=await m.get("/admin/users",a.access_token);n(s)}catch(s){console.error("Failed to fetch users",s)}finally{v(!1)}};React.useEffect(()=>{_()},[a]);const S=()=>{d(null),g(""),x(""),N(""),k(""),j("user"),y(null)},B=s=>{d(s),g(s.email),x(""),N(s.first_name),k(s.last_name),j(s.role),y(null)},$=async s=>{s.preventDefault(),y(null);try{if(i){const c=await m.put(`/admin/users/${i.id}`,{email:u,password:f||void 0,role:R,first_name:p,last_name:L},a.access_token);n(l.map(E=>E.id===i.id?c:E)),S()}else{const c=await m.post("/admin/users",{email:u,password:f,role:R,first_name:p,last_name:L},a.access_token);n([...l,c]),S()}}catch(c){y(c.detail||`Failed to ${i?"update":"add"} user`)}},w=async s=>{if(s===a.user.id){alert("You cannot delete yourself.");return}if(confirm("Are you sure you want to delete this user? All their bookmarks will be lost."))try{await m.delete(`/admin/users/${s}`,a.access_token),n(l.filter(c=>c.id!==s))}catch(c){console.error("Failed to delete user",c)}},C=s=>s?new Date(s).toLocaleString():"-";return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Edit User":"Add New User"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user-email",className:"block text-sm text-slate-400 mb-1",children:"Email"}),e.jsx("input",{id:"user-email",type:"email",required:!0,"data-testid":"admin-add-user-email",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"user-password",className:"block text-sm text-slate-400 mb-1",children:["Password ",i&&"(leave blank to keep current)"]}),e.jsx("input",{id:"user-password",type:"password",required:!i,"data-testid":"admin-add-user-password",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user-first-name",className:"block text-sm text-slate-400 mb-1",children:"First Name"}),e.jsx("input",{id:"user-first-name",type:"text",required:!0,"data-testid":"admin-add-user-first-name",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p,onChange:s=>N(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user-last-name",className:"block text-sm text-slate-400 mb-1",children:"Last Name"}),e.jsx("input",{id:"user-last-name",type:"text",required:!0,"data-testid":"admin-add-user-last-name",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:L,onChange:s=>k(s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 items-end",children:[e.jsxs("div",{className:"w-1/4",children:[e.jsx("label",{htmlFor:"user-role",className:"block text-sm text-slate-400 mb-1",children:"Role"}),e.jsxs("select",{id:"user-role","data-testid":"admin-add-user-role",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:R,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),i&&e.jsx("button",{type:"button",onClick:S,className:"bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-8 rounded-lg transition-colors h-[42px]",children:"Cancel"}),e.jsx("button",{type:"submit","data-testid":"admin-add-user-submit",className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-8 rounded-lg transition-colors h-[42px]",children:i?"Update User":"Create User"})]})]}),U&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:U})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Management"}),h?e.jsx("p",{children:"Loading..."}):e.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-800 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left whitespace-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800/50 border-b border-slate-800",children:[e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Updated At"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:l.map(s=>e.jsxs("tr",{onClick:()=>B(s),className:`cursor-pointer transition-colors ${i?.id===s.id?"bg-blue-500/10 hover:bg-blue-500/20":"hover:bg-slate-800/30"}`,children:[e.jsx("td",{className:"px-6 py-4 text-slate-400 font-mono text-sm",children:s.id}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-slate-100",children:s.email}),(s.first_name||s.last_name)&&e.jsxs("span",{className:"text-xs text-slate-500",children:[s.first_name||""," ",s.last_name||""]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider ${s.role==="admin"?"bg-purple-500/10 text-purple-400 border border-purple-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"}`,children:s.role})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`flex items-center gap-1.5 text-xs font-medium ${s.is_active?"text-emerald-400":"text-rose-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${s.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),s.is_active?"Active":"Deactivated"]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-400 font-mono",children:C(s.last_login_at)}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-400 font-mono",children:C(s.updated_at)}),e.jsx("td",{className:"px-6 py-4 text-right",children:s.id!==a.user.id&&e.jsx("button",{onClick:c=>{c.stopPropagation(),w(s.id)},className:"text-rose-500 hover:text-rose-400 transition-colors p-2 hover:bg-rose-500/10 rounded-lg",title:"Delete User",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},s.id))})]})})]})]})},Q=({onLogin:a})=>{const[l,n]=React.useState(""),[h,v]=React.useState(""),[i,d]=React.useState(null),[u,g]=React.useState(!1),f=async x=>{x.preventDefault(),g(!0),d(null);try{const p=await m.post("/login",{email:l,password:h});a(p)}catch(p){d(p.detail||"Login failed")}finally{g(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-6 bg-slate-900 rounded-xl border border-slate-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Login to Bookmarks"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Email"}),e.jsx("input",{type:"email",required:!0,"data-testid":"login-email",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:x=>n(x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Password"}),e.jsx("input",{type:"password",required:!0,"data-testid":"login-password",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:x=>v(x.target.value)})]}),i&&e.jsx("p",{className:"text-red-400 text-sm",children:i}),e.jsx("button",{type:"submit",disabled:u,"data-testid":"login-submit",className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 rounded-lg transition-colors disabled:opacity-50",children:u?"Logging in...":"Login"})]})]})},X=({auth:a})=>{const[l,n]=React.useState([]),[h,v]=React.useState(!0),[i,d]=React.useState(""),[u,g]=React.useState(""),[f,x]=React.useState(""),[p,N]=React.useState(null),[L,k]=React.useState(!1),[R,j]=React.useState(null),[U,y]=React.useState(""),[_,S]=React.useState(""),[B,$]=React.useState(""),[w,C]=React.useState(null),[s,c]=React.useState(""),E=async()=>{try{const t=await m.get("/",a.access_token);n(t)}catch(t){console.error("Failed to fetch bookmarks",t)}finally{v(!1)}};React.useEffect(()=>{E()},[a]);const O=async t=>{t.preventDefault(),N(null);try{const r=await m.post("/",{title:i,url:u,group:f.trim()||null},a.access_token);n([r,...l]),d(""),g(""),x(""),k(!1),r.group&&C(r.group)}catch(r){N(r.detail||"Failed to add bookmark")}},I=async t=>{if(confirm("Are you sure you want to delete this bookmark?"))try{await m.delete(`/${t}`,a.access_token),n(l.filter(r=>r.id!==t)),j(null)}catch(r){console.error("Failed to delete bookmark",r)}},z=t=>{j(t.id),y(t.title),S(t.url),$(t.group||"")},q=async t=>{try{const r={title:U,url:_,group:B.trim()||null};await m.put(`/${t}`,r,a.access_token),n(l.map(o=>o.id===t?{...o,...r}:o)),j(null),r.group&&C(r.group)}catch(r){console.error("Failed to update bookmark",r)}},D=React.useMemo(()=>s.trim()?new Fuse(l,{keys:["title","url","group"],threshold:.4}).search(s).map(r=>r.item):l,[l,s]).reduce((t,r)=>{const o=r.group||"Un-grouped";return t[o]||(t[o]=[]),t[o].push(r),t},{}),T=Object.keys(D).sort((t,r)=>t==="Un-grouped"?1:r==="Un-grouped"?-1:t.localeCompare(r)),G=t=>{C(w===t?null:t)},H=async()=>{try{const t=await m.get("/export",a.access_token),r=jsyaml.dump(t),o=new Blob([r],{type:"text/yaml"}),A=URL.createObjectURL(o),b=document.createElement("a");b.href=A,b.download=`bookmarks_${new Date().toISOString().split("T")[0]}.yaml`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(A)}catch(t){console.error("Failed to export bookmarks",t)}},P=async t=>{const r=t.target.files?.[0];if(!r)return;const o=new FileReader;o.onload=async A=>{try{const b=A.target?.result,W=jsyaml.load(b);if(!W||!Array.isArray(W.groups))throw new Error("Invalid format: expected 'groups' array");if(confirm("This will replace ALL your current bookmarks. Continue?")){const J=await m.post("/bulk",W,a.access_token);n(J)}}catch(b){alert("Failed to upload bookmarks: "+b.message)}},o.readAsText(r),t.target.value=""},V=(t,r=!1)=>e.jsx("div",{"data-testid":`bookmark-row-${t.id}`,className:"group flex items-center justify-between py-0 hover:bg-slate-800/40 transition-colors min-h-[2rem] px-4",children:R===t.id?e.jsxs("div",{className:"flex-1 flex flex-col gap-2","data-testid":"edit-bookmark-form",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[e.jsx("input",{type:"text",placeholder:"Title","data-testid":"edit-bookmark-title",className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:U,onChange:o=>y(o.target.value),autoFocus:!0}),e.jsx("input",{type:"text",placeholder:"Group","data-testid":"edit-bookmark-group",className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:B,onChange:o=>$(o.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("textarea",{placeholder:"URL","data-testid":"edit-bookmark-url",className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none overflow-hidden min-h-[38px]",value:_,ref:o=>{o&&(o.style.height="auto",o.style.height=o.scrollHeight+"px")},onChange:o=>{S(o.target.value),o.target.style.height="auto",o.target.style.height=o.target.scrollHeight+"px"},onFocus:o=>{o.target.select(),o.target.style.height="auto",o.target.style.height=o.target.scrollHeight+"px"}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>q(t.id),"data-testid":"save-edit-button",className:"text-blue-400 hover:text-blue-300 p-1",title:"Save",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>I(t.id),"data-testid":"delete-bookmark-button",className:"text-red-400 hover:text-red-300 p-1",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("button",{onClick:()=>j(null),"data-testid":"cancel-edit-button",className:"text-slate-500 hover:text-slate-300 p-1",title:"Cancel",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer","data-testid":`bookmark-link-${t.id}`,className:"flex-1 font-medium text-slate-300 hover:text-blue-400 transition-colors truncate mr-4",children:t.title}),e.jsx("button",{onClick:()=>z(t),"data-testid":`edit-bookmark-button-${t.id}`,className:"text-slate-500 hover:text-blue-400 p-1 transition-all",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})},t.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center border-b border-slate-800 pb-4 gap-4",children:e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("input",{type:"text",placeholder:"Search bookmarks...",className:"w-full bg-slate-900 border border-slate-700 rounded-lg pl-9 pr-4 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",value:s,onChange:t=>c(t.target.value),"data-testid":"search-input"}),e.jsx("svg",{className:"w-4 h-4 text-slate-500 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),L&&e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-blue-500/50 shadow-lg mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-bold text-sm",children:"New Bookmark"}),e.jsx("button",{onClick:()=>k(!1),className:"text-slate-500 hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:O,className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Title",required:!0,autoFocus:!0,"data-testid":"new-bookmark-title",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:i,onChange:t=>d(t.target.value)}),e.jsx("input",{type:"url",placeholder:"URL",required:!0,"data-testid":"new-bookmark-url",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:t=>g(t.target.value)}),e.jsx("input",{type:"text",placeholder:"Group (Optional)","data-testid":"new-bookmark-group",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:t=>x(t.target.value)}),e.jsx("button",{type:"submit","data-testid":"save-bookmark-button",className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-1.5 rounded-lg transition-colors text-sm",children:"Save"}),p&&e.jsx("p",{className:"text-red-400 text-xs md:col-span-4",children:p})]})]}),h?e.jsx("p",{className:"text-slate-500 italic","data-testid":"loading-indicator",children:"Loading..."}):l.length===0?e.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-8 text-center text-slate-500 italic","data-testid":"no-bookmarks-message",children:"No bookmarks yet."}):e.jsx("div",{className:"space-y-1",children:T.map(t=>e.jsxs("div",{"data-testid":`group-container-${t}`,className:"bg-slate-900 rounded-sm border border-slate-800 overflow-hidden shadow-xl transition-all",children:[t!=="Un-grouped"?e.jsxs("button",{onClick:()=>G(t),"data-testid":`group-header-${t}`,className:`w-full flex items-center justify-between px-4 py-1 bg-slate-800/40 hover:bg-slate-800/60 transition-colors text-left border-l-4 ${w===t?"border-blue-500":"border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:`w-5 h-5 transition-colors ${w===t?"text-blue-400":"text-slate-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),e.jsx("span",{className:"font-bold text-lg text-slate-100",children:t}),e.jsx("span",{className:"text-xs font-bold text-slate-400 bg-slate-950/50 px-2 py-0.5 rounded-full border border-slate-800/50",children:D[t].length})]}),e.jsx("svg",{className:`w-5 h-5 text-slate-500 transition-transform duration-300 ${w===t?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}):T.length>1?e.jsx("div",{className:"px-4 py-2 bg-slate-800/20 border-b border-slate-800/50",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Other / Un-grouped"})}):null,(w===t||t==="Un-grouped"||s.trim()!=="")&&e.jsx("div",{className:"divide-y divide-slate-800/50","data-testid":`group-content-${t}`,children:D[t].map(r=>V(r,t!=="Un-grouped"||T.length>1))})]},t))}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto justify-end",children:[e.jsx("button",{onClick:H,title:"Download YAML",className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".yaml,.yml",onChange:P,className:"absolute inset-0 opacity-0 cursor-pointer",title:"Upload YAML"}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),!L&&e.jsxs("button",{onClick:()=>k(!0),"data-testid":"add-bookmark-button",className:"flex items-center gap-1.5 bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded-lg text-sm font-bold transition-colors shadow-lg shadow-blue-900/20",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})},Z=()=>{const[a,l]=React.useState("login"),[n,h]=React.useState(null);React.useEffect(()=>{const d=localStorage.getItem("bookmarks_auth");if(d)try{const u=JSON.parse(d);h(u),l("dashboard")}catch{localStorage.removeItem("bookmarks_auth")}},[]);const v=()=>{h(null),localStorage.removeItem("bookmarks_auth"),l("login")},i=d=>{h(d),localStorage.setItem("bookmarks_auth",JSON.stringify(d)),l("dashboard")};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex flex-col",children:[e.jsx("header",{className:"border-b border-slate-800 bg-slate-900/50 backdrop-blur-md sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>l(n?"dashboard":"login"),children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center font-bold",children:"B"}),e.jsx("span",{className:"font-bold text-xl tracking-tight hidden md:inline",children:"Bookmarks"})]})}),e.jsx("nav",{className:"flex items-center gap-4",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-slate-400 md:inline",children:[n.user.first_name," ",n.user.last_name]}),n.user.role==="admin"&&e.jsx("button",{onClick:()=>l(a==="admin"?"dashboard":"admin"),className:`text-sm font-medium transition-all px-3 py-1 rounded-full ${a==="admin"?"text-slate-300 hover:text-white hover:bg-slate-800":"bg-slate-600 text-white shadow-lg shadow-slate-900/20"}`,children:a==="admin"?"My Dashboard":"Manage Users"}),e.jsx("button",{onClick:v,className:"text-sm font-medium text-slate-300 hover:text-white transition-colors",children:"Logout"})]})})]})}),e.jsxs("main",{className:"flex-1 max-w-6xl w-full mx-auto px-4 py-8",children:[a==="login"&&e.jsx(Q,{onLogin:i}),a==="dashboard"&&n&&e.jsx(X,{auth:n}),a==="admin"&&n&&n.user.role==="admin"&&e.jsx(K,{auth:n})]})]})};ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(Z,{})}));
