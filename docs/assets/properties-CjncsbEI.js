import"./index-BvBwvoZY.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as ee}from"./api-CH_Pe6Vg.js";import{L as B}from"./leaflet-src-DBNPRDgh.js";const te=async t=>{const m=await fetch(`${ee}/properties/?source=${t}`);if(!m.ok){const x=await m.json();throw new Error(x.detail||"Failed to fetch properties")}return m.json()},re=({filters:t,onChange:m,propertyGroups:x,sortBy:p,onSortChange:b})=>{const c=g=>{const{name:n,value:s}=g.target;m({...t,[n]:n==="minPrice"||n==="maxPrice"||n==="minBedrooms"?Number(s):s})};return e.jsx("div",{className:"bg-white border-b border-gray-200 p-4 shadow-sm z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx("input",{type:"text",name:"searchQuery",value:t.searchQuery,onChange:c,placeholder:"Search location or features...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-tight",children:"Type"}),e.jsx("select",{name:"propertyGroup",value:t.propertyGroup,onChange:c,className:"bg-gray-50 border border-gray-200 rounded-xl px-3 py-2 text-sm font-bold text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:x.map(g=>e.jsx("option",{value:g,children:g},g))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-tight",children:"Beds"}),e.jsxs("select",{name:"minBedrooms",value:t.minBedrooms,onChange:c,className:"bg-gray-50 border border-gray-200 rounded-xl px-3 py-2 text-sm font-bold text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:0,children:"Any"}),e.jsx("option",{value:1,children:"1+"}),e.jsx("option",{value:2,children:"2+"}),e.jsx("option",{value:3,children:"3+"}),e.jsx("option",{value:4,children:"4+"}),e.jsx("option",{value:5,children:"5+"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-tight",children:"Price"}),e.jsxs("div",{className:"flex items-center bg-gray-50 border border-gray-200 rounded-xl overflow-hidden",children:[e.jsx("input",{type:"number",name:"minPrice",value:t.minPrice,onChange:c,placeholder:"Min",className:"w-20 md:w-24 px-3 py-2 text-sm font-bold text-gray-700 bg-transparent focus:outline-none"}),e.jsx("span",{className:"text-gray-300 px-1",children:"—"}),e.jsx("input",{type:"number",name:"maxPrice",value:t.maxPrice,onChange:c,placeholder:"Max",className:"w-20 md:w-24 px-3 py-2 text-sm font-bold text-gray-700 bg-transparent focus:outline-none"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-tight",children:"Sort"}),e.jsxs("select",{value:p,onChange:g=>b(g.target.value),className:"bg-gray-50 border border-gray-200 rounded-xl px-3 py-2 text-sm font-bold text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"last-modified",children:"Last Modified"}),e.jsx("option",{value:"price-asc",children:"Price: Low to High"}),e.jsx("option",{value:"price-desc",children:"Price: High to Low"})]})]})]})})},H=React.memo(({property:t,onSelect:m,onViewDetails:x,onShowOnMap:p,isSelected:b,index:c,total:g})=>{const[n,s]=React.useState(0),l=a=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(a),j=a=>{a.stopPropagation(),s(h=>(h+1)%t.images.length)},d=a=>{a.stopPropagation(),s(h=>(h-1+t.images.length)%t.images.length)},u=()=>{m(t)},v=a=>{a.stopPropagation(),x(t)},C=t.images[n]?.url||"https://via.placeholder.com/400x300?text=No+Image",L=a=>{a.stopPropagation();const h=new URLSearchParams;h.set("location",window.location.search.includes("location")?new URLSearchParams(window.location.search).get("location"):"chesterfield_ashgate"),h.set("id",t.id);const f=`${window.location.origin}${window.location.pathname}?${h.toString()}`;navigator.clipboard.writeText(f).then(()=>{console.log("Link copied to clipboard!")})};return e.jsxs("div",{id:`property-${t.id}`,"data-testid":"property-card",onClick:u,className:`group flex flex-col md:flex-row rounded-md overflow-hidden border transition-all duration-300 cursor-pointer mx-0.5 ${b?"border-indigo-600 ring-2 ring-indigo-600 shadow-lg z-10 bg-white":"border-gray-200 hover:border-indigo-300 hover:shadow-md z-0 bg-white"}`,children:[e.jsxs("div",{className:"relative w-full md:w-40 h-48 md:h-auto overflow-hidden bg-gray-100 pointer-events-none",children:[e.jsx("img",{src:C,alt:t.address,className:"w-full h-full object-cover transition-transform duration-500",loading:"lazy",referrerPolicy:"no-referrer"}),t.images.length>1&&e.jsx("div",{className:"pointer-events-auto",children:[{onClick:d,position:"left-2",path:"M15 19l-7-7 7-7"},{onClick:j,position:"right-2",path:"M9 5l7 7-7 7"}].map(({onClick:a,position:h,path:f})=>e.jsx("button",{onClick:a,className:`absolute ${h} top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full backdrop-blur-sm transition-all opacity-70 hover:opacity-100 cursor-pointer z-10`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:f})})},h))}),t.is_new&&e.jsx("div",{className:"absolute top-3 left-3 bg-indigo-600 text-white text-[0.625rem] font-black px-2 py-1 rounded-md uppercase tracking-wider shadow-sm",children:"New"}),t.sold_let&&e.jsx("div",{className:"absolute top-3 right-3 bg-yellow-400 text-black text-[0.625rem] font-black px-2 py-1 rounded-md uppercase tracking-wider shadow-sm border border-black/10",children:t.sold_let}),e.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/50 backdrop-blur-sm text-white text-[0.625rem] font-bold px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"})}),n+1," / ",t.images.length]})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("h3",{className:"text-lg font-black text-gray-900 leading-tight",children:l(t.price)}),e.jsxs("span",{className:"text-[0.8rem] font-bold text-gray-800 uppercase tracking-widest",children:[c+1," / ",g]}),e.jsxs("span",{className:"text-xs font-bold text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:[t.property_group_icon," ",t.property_group]})]})})}),e.jsx("p",{className:"text-sm font-bold text-gray-600 line-clamp-1 mb-2",children:t.address}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-gray-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsxs("span",{className:"text-xs font-black text-gray-700",children:[t.bedrooms," ",e.jsx("span",{className:"font-medium text-gray-500",children:"Beds"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-gray-400",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsxs("span",{className:"text-xs font-black text-gray-700",children:[t.bathrooms," ",e.jsx("span",{className:"font-medium text-gray-500",children:"Baths"})]})]}),t.size_sqm&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-gray-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),e.jsxs("span",{className:"text-xs font-black text-gray-700",children:[Math.round(t.size_sqm)," ",e.jsx("span",{className:"font-medium text-gray-500",children:"m²"})]})]})]}),e.jsx("div",{className:"space-y-0.5 mb-3",children:(()=>{const a=new Date,h=t.date_added?new Date(t.date_added):null;let f=null;if(t.previous_prices&&t.previous_prices.length>0){const M=t.previous_prices[0].price;t.price<M&&t.date_updated&&(f=new Date(t.date_updated))}return e.jsxs("div",{className:"text-[0.8rem] font-bold leading-tight",children:[f&&e.jsxs("div",{className:"text-gray-400 mb-1",children:[e.jsxs("span",{className:"text-emerald-600",children:["Reduced"," ",((a.getTime()-f.getTime())/(1e3*60*60*24)).toFixed(1)," ","days ago"]})," ","(on"," ",f.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),")"]}),t.previous_prices&&t.previous_prices.length>0&&e.jsx("div",{className:"flex flex-wrap gap-x-2 gap-y-0.5 mb-1 opacity-80",children:[...t.previous_prices].reverse().map((M,_)=>e.jsxs("div",{className:"text-gray-400 bg-emerald-50 px-1.5 py-0.5 rounded border border-gray-100",children:[new Date(M.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),": ",l(M.price)]},_))}),h&&e.jsxs("div",{className:"text-gray-400",children:[e.jsxs("span",{className:f?"":"text-orange-500",children:["First added"," ",((a.getTime()-h.getTime())/(1e3*60*60*24)).toFixed(1)," ","days ago"]})," ","(on"," ",h.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),")"]})]})})()})]}),e.jsxs("div",{className:"flex gap-2 pointer-events-auto",children:[e.jsxs("button",{onClick:L,title:"Copy shareable link",className:"text-[0.625rem] font-bold text-gray-700 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-all uppercase cursor-pointer flex items-center gap-1 border border-gray-200",children:["Copy",e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})]}),e.jsx("button",{onClick:v,className:"text-[0.625rem] font-bold text-indigo-700 hover:text-indigo-900 bg-indigo-100 hover:bg-indigo-200 px-2 py-1 rounded-md transition-all uppercase cursor-pointer",children:"View Details"}),e.jsxs("a",{href:`https://www.rightmove.co.uk/properties/${t.id}#/?channel=RES_BUY`,target:"_blank",rel:"noopener noreferrer",className:"text-[0.625rem] font-bold text-teal-700 hover:text-teal-900 bg-teal-100 hover:bg-teal-200 px-2 py-1 rounded-md transition-all uppercase cursor-pointer flex items-center gap-1 border border-teal-200",onClick:a=>a.stopPropagation(),title:"View on Rightmove",children:["Rightmove",e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2 border-t border-gray-50",children:[e.jsx("a",{href:`https://www.google.com/maps/@${t.coordinates[0]},${t.coordinates[1]},3a,90y,70t/data=!3m1!1e1`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md bg-green-100 text-green-700 hover:bg-green-200 transition-colors border border-green-200 shadow-sm",title:"Street View",onClick:a=>a.stopPropagation(),children:e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0"}),e.jsx("circle",{cx:"12",cy:"8",r:"2",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.714 14h-3.714a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-3.714"})]})}),e.jsx("a",{href:`https://open.xploria.co.uk/app/know-your-place?map=${t.coordinates[1]}*${t.coordinates[0]}*18&view=elcAu7IT4&theme=w0fDyvnN_`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md bg-orange-100 text-orange-700 hover:bg-orange-200 transition-colors border border-orange-200 shadow-sm",title:"Crime Map",onClick:a=>a.stopPropagation(),children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 15a4 4 0 100-8 4 4 0 000 8zm0 0v1a2 2 0 002 2h4a2 2 0 002-2v-1m0 0a4 4 0 100-8 4 4 0 000 8z"})})}),e.jsx("a",{href:`https://open.xploria.co.uk/app/know-your-place?map=${t.coordinates[1]}*${t.coordinates[0]}*18&view=elcAu7IT4`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors border border-blue-200 shadow-sm",title:"Living Standard",onClick:a=>a.stopPropagation(),children:e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-5.4a2 2 0 0 0-2.8-2.8L13 15"}),e.jsx("circle",{cx:"14",cy:"4",r:"2",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 12a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m5 18-2.5-2.5"})]})}),e.jsx("a",{href:`https://www.cyclosm.org/#map=17/${t.coordinates[0]}/${t.coordinates[1]}/cyclosm`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors border border-purple-200 shadow-sm",title:"Cycle Map",onClick:a=>a.stopPropagation(),children:e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"5.5",cy:"17.5",r:"3.5",strokeWidth:2}),e.jsx("circle",{cx:"18.5",cy:"17.5",r:"3.5",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm-3 11.5V14l-3-3 4-3 2 3h2"})]})}),e.jsx("a",{href:`https://earth.google.com/web/@${t.coordinates[0]},${t.coordinates[1]},132a,25d,35y,0h,0t,0r`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md bg-cyan-100 text-cyan-700 hover:bg-cyan-200 transition-colors border border-cyan-200 shadow-sm",title:"Google Earth",onClick:a=>a.stopPropagation(),children:e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}),t.closest?.coords&&e.jsx("a",{href:`https://www.google.com/maps/dir/${t.closest.coords[0]},${t.closest.coords[1]}/${t.coordinates[0]},${t.coordinates[1]}/@2696m/data=!3m2!1e3!4b1!4m2!4m1!3e2`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md bg-rose-100 text-rose-700 hover:bg-rose-200 transition-colors border border-rose-200 shadow-sm",title:"Directions from Nearest",onClick:a=>a.stopPropagation(),children:e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 22 5 18V5l7-3 7 3v7"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v20"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19h6"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 16v6"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2 border-t border-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.agency?.url&&e.jsx("img",{src:t.agency.url,alt:t.agency.caption,className:"h-4 max-w-[80px] object-contain opacity-70 grayscale hover:grayscale-0 transition-all",loading:"lazy",referrerPolicy:"no-referrer"}),!t.agency?.url&&t.agency?.caption&&e.jsx("span",{className:"text-[0.625rem] font-bold text-gray-400 uppercase tracking-tight",children:t.agency.caption})]}),e.jsx("div",{className:"flex items-center gap-1.5 pointer-events-auto",children:t.closest&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),p?.(t)},"data-testid":"distance-button",className:"text-[0.625rem] font-bold text-indigo-700 hover:text-indigo-900 bg-indigo-100 hover:bg-indigo-200 px-2 py-1 rounded-md transition-colors uppercase cursor-pointer",children:[t.closest.miles?.toFixed(1)||0," miles to"," ",t.closest.place||"nearest"]})})]})]})]})});H.displayName="PropertyCard";const se=({property:t,onClose:m})=>{const[x,p]=React.useState(0),b=n=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(n),c=n=>{n.stopPropagation(),p(s=>(s+1)%t.images.length)},g=n=>{n.stopPropagation(),p(s=>(s-1+t.images.length)%t.images.length)};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 bg-gray-900/40 backdrop-blur-sm animate-in fade-in duration-300",onClick:m,"data-testid":"x-property-modal",children:e.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] rounded-3xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex items-center justify-between bg-white sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-gray-900 leading-tight",children:b(t.price)}),e.jsx("p",{className:"text-sm font-bold text-gray-500",children:t.address})]}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors text-gray-400 hover:text-gray-900",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-8 p-0 md:p-8",children:[e.jsx("div",{className:"relative aspect-[16/10] md:aspect-square bg-gray-100 md:rounded-2xl overflow-hidden group/carousel",children:t.images.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.images[x].url,alt:t.images[x].caption||`Image ${x+1}`,className:"w-full h-full object-cover animate-in fade-in duration-500"},x),t.images[x].caption&&e.jsx("div",{className:"absolute bottom-0 inset-x-0 p-4 bg-black/40 backdrop-blur-md text-white text-[0.625rem] font-bold uppercase tracking-wider",children:t.images[x].caption}),t.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:g,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/20 hover:bg-black/40 backdrop-blur-md text-white transition-all opacity-0 group-hover/carousel:opacity-100 border border-white/10",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:c,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/20 hover:bg-black/40 backdrop-blur-md text-white transition-all opacity-0 group-hover/carousel:opacity-100 border border-white/10",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 bg-black/40 backdrop-blur-md rounded-full text-white text-[0.625rem] font-black tracking-widest uppercase border border-white/10",children:[x+1," / ",t.images.length]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 font-bold uppercase tracking-widest text-[0.625rem]",children:"No images available"})}),e.jsxs("div",{className:"p-6 md:p-0 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-xs font-black text-indigo-600 uppercase tracking-[0.2em] mb-4",children:"Key Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.key_features.map((n,s)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"mt-1 w-1.5 h-1.5 rounded-full bg-indigo-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-bold text-gray-700",children:n})]},s))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xs font-black text-indigo-600 uppercase tracking-[0.2em] mb-4",children:"Description"}),e.jsx("div",{className:"text-gray-600 text-sm leading-relaxed font-medium bg-gray-50/50 p-4 rounded-2xl italic border-l-4 border-indigo-200",dangerouslySetInnerHTML:{__html:t.summary}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.floorplans.length>0&&e.jsxs("a",{href:t.floorplans[0].url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-4 rounded-2xl bg-indigo-50 text-indigo-700 font-black text-sm hover:bg-indigo-100 transition-colors border border-indigo-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Floorplan"]}),t.brochures.length>0&&e.jsxs("a",{href:t.brochures[0].url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-4 rounded-2xl bg-emerald-50 text-emerald-700 font-black text-sm hover:bg-emerald-100 transition-colors border border-emerald-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Brochure"]}),e.jsxs("a",{href:`https://www.google.com/maps/@${t.coordinates[0]},${t.coordinates[1]},3a,90y,70t/data=!3m1!1e1`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-4 rounded-2xl bg-green-50 text-green-700 font-black text-sm hover:bg-green-100 transition-colors border border-green-100",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0"}),e.jsx("circle",{cx:"12",cy:"8",r:"2",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.714 14h-3.714a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-3.714"})]}),"Street View"]}),e.jsxs("a",{href:`https://www.cyclosm.org/#map=17/${t.coordinates[0]}/${t.coordinates[1]}/cyclosm`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-4 rounded-2xl bg-purple-50 text-purple-700 font-black text-sm hover:bg-purple-100 transition-colors border border-purple-100",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"5.5",cy:"17.5",r:"3.5",strokeWidth:2}),e.jsx("circle",{cx:"18.5",cy:"17.5",r:"3.5",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm-3 11.5V14l-3-3 4-3 2 3h2"})]}),"Cycle Map"]}),e.jsxs("a",{href:`https://earth.google.com/web/@${t.coordinates[0]},${t.coordinates[1]},132a,25d,35y,0h,0t,0r`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-4 rounded-2xl bg-cyan-50 text-cyan-700 font-black text-sm hover:bg-cyan-100 transition-colors border border-cyan-100",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),"Google Earth"]}),t.closest?.coords&&e.jsxs("a",{href:`https://www.google.com/maps/dir/${t.closest.coords[0]},${t.closest.coords[1]}/${t.coordinates[0]},${t.coordinates[1]}/@2696m/data=!3m2!1e3!4b1!4m2!4m1!3e2`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-4 rounded-2xl bg-rose-50 text-rose-700 font-black text-sm hover:bg-rose-100 transition-colors border border-rose-100",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 22 5 18V5l7-3 7 3v7"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v20"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19h6"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 16v6"})]}),"Directions"]})]}),t.previous_prices&&t.previous_prices.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-xs font-black text-indigo-600 uppercase tracking-[0.2em] mb-4",children:"Price History"}),e.jsx("div",{className:"space-y-2",children:t.previous_prices.map((n,s)=>e.jsxs("div",{className:"flex justify-between items-center py-2 px-4 bg-gray-50 rounded-xl text-sm font-bold",children:[e.jsx("span",{className:"text-gray-500",children:new Date(n.date).toLocaleDateString()}),e.jsx("span",{className:"text-gray-900",children:b(n.price)})]},s))})]})]})]})}),e.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex flex-col md:flex-row items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[t.agency?.url&&e.jsx("img",{src:t.agency.url,alt:t.agency.caption,className:"h-6 object-contain"}),e.jsx("span",{className:"text-sm font-bold text-gray-500",children:t.agency?.caption})]})})]})})},ae=({properties:t,selectedProperty:m,onPropertySelect:x,zoom:p,onZoomChange:b,center:c,onCenterChange:g})=>{const n=React.useRef(null),s=React.useRef(null),l=React.useRef(null),j=React.useRef(null);return React.useEffect(()=>{if(!n.current)return;s.current=B.map(n.current,{zoomControl:!1,attributionControl:!1}).setView(c||[51.2627,-1.0856],p||15),B.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{maxZoom:19}).addTo(s.current),l.current=B.layerGroup().addTo(s.current),s.current.on("zoomend",()=>{s.current&&b&&b(s.current.getZoom())}),s.current.on("moveend",()=>{if(s.current&&g){const u=s.current.getCenter();g([u.lat,u.lng])}});const d=new ResizeObserver(()=>{s.current&&s.current.invalidateSize()});return n.current&&d.observe(n.current),()=>{d.disconnect(),s.current?.remove()}},[]),React.useEffect(()=>{s.current&&p!==void 0&&s.current.getZoom()!==p&&s.current.setZoom(p)},[p]),React.useEffect(()=>{if(s.current&&c){const d=s.current.getCenter(),u=1e-6;(Math.abs(d.lat-c[0])>u||Math.abs(d.lng-c[1])>u)&&s.current.setView(c,p||s.current.getZoom())}},[c]),React.useEffect(()=>{if(!s.current||!l.current||(l.current.clearLayers(),t.length===0))return;const d=B.latLngBounds([]);if(t.forEach(u=>{const[v,C]=u.coordinates;if(!v||!C)return;d.extend([v,C]);const L=m?.id===u.id,a=B.divIcon({className:"custom-div-icon",html:`
          <div class="flex items-center justify-center transition-all duration-300 ${L?"scale-125 z-50":"hover:scale-110"}">
            <div class="px-2 py-1 rounded-lg font-black text-xs shadow-lg border-2 flex items-center gap-1 ${L?"bg-indigo-600 text-white border-white":"bg-white text-gray-900 border-indigo-600"}">
              £${(u.price/1e3).toFixed(0)}k
            </div>
            <div class="absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 rotate-45 border-r-2 border-b-2 ${L?"bg-indigo-600 border-white":"bg-white border-indigo-600"}"></div>
          </div>
        `,iconSize:[60,30],iconAnchor:[30,30]});B.marker([v,C],{icon:a}).on("click",()=>x(u)).addTo(l.current)}),m){if(m.id!==j.current){j.current=m.id;const[u,v]=m.coordinates;u&&v&&s.current.setView([u,v],p||15)}}else j.current=null,!c&&t.length>0&&s.current.fitBounds(d,{padding:[50,50],maxZoom:15})},[t,m,x]),e.jsx("div",{ref:n,className:"w-full h-full z-0"})},R=10,oe=()=>{const t=new URLSearchParams(window.location.search),m=t.get("location")||"chesterfield_ashgate",x=t.get("view")||"list",p=t.get("z")?parseInt(t.get("z")):15,b=t.get("id"),c=t.get("lat")?parseFloat(t.get("lat")):null,g=t.get("lng")?parseFloat(t.get("lng")):null,[n,s]=React.useState(m),[l,j]=React.useState(1),[d,u]=React.useState(null),[v,C]=React.useState(!0),[L,a]=React.useState(null),[h,f]=React.useState(null),[M,_]=React.useState(null),[S,I]=React.useState(x),[z,V]=React.useState(p),[$,E]=React.useState(c&&g?[c,g]:void 0),[F,U]=React.useState(!1),[y,G]=React.useState({minPrice:0,maxPrice:2e6,minBedrooms:0,propertyGroup:"All",searchQuery:""}),[w,Z]=React.useState("last-modified"),T=React.useRef(!0),Q=React.useCallback(r=>{f(r);const o=new URLSearchParams(window.location.search);o.set("id",r.id);const i=`${window.location.pathname}?${o.toString()}`;window.history.replaceState({},"",i)},[]),q=React.useCallback(r=>{f(r),_(r);const o=new URLSearchParams(window.location.search);o.set("id",r.id);const i=`${window.location.pathname}?${o.toString()}`;window.history.replaceState({},"",i)},[]),O=React.useCallback(r=>{f(r),I("map"),V(15)},[]);React.useEffect(()=>{const r=new URLSearchParams;r.set("location",n),S==="map"&&(r.set("view","map"),r.set("z",z.toString()),$&&(r.set("lat",$[0].toFixed(6)),r.set("lng",$[1].toFixed(6)))),h&&r.set("id",h.id);const o=`${window.location.pathname}?${r.toString()}`;window.history.replaceState({},"",o)},[n,S,h,z,$]),React.useEffect(()=>{(async()=>{C(!0),T.current?_(null):(f(null),_(null),I("list"),V(15),E(void 0),j(1));try{const o=await te(n);if(u(o),a(null),T.current&&b){const i=o.items.find(D=>D.id===b);if(i){f(i);const A=[...o.items].sort((k,W)=>{if(w==="price-asc")return k.price-W.price;if(w==="price-desc")return W.price-k.price;if(w==="newest")return new Date(W.date_added||0).getTime()-new Date(k.date_added||0).getTime();if(w==="last-modified"){const X=new Date(k.date_updated||k.date_added||0).getTime();return new Date(W.date_updated||W.date_added||0).getTime()-X}return 0}).findIndex(k=>k.id===b);if(A>=0){const k=Math.floor(A/R)+1;j(k)}x==="list"&&setTimeout(()=>{const k=document.getElementById(`property-${i.id}`);k&&k.scrollIntoView({behavior:"smooth",block:"center"})},500)}}}catch(o){a(o.message)}finally{C(!1),T.current=!1}})()},[n]);const N=React.useMemo(()=>{if(!d)return[];let r=d.items.filter(o=>{if(o.price<y.minPrice||o.price>y.maxPrice||o.bedrooms<y.minBedrooms||y.propertyGroup!=="All"&&o.property_group!==y.propertyGroup)return!1;if(y.searchQuery){const i=y.searchQuery.toLowerCase();return o.address.toLowerCase().includes(i)||o.summary.toLowerCase().includes(i)}return!0});return r.sort((o,i)=>{if(w==="price-asc")return o.price-i.price;if(w==="price-desc")return i.price-o.price;if(w==="newest")return new Date(i.date_added||0).getTime()-new Date(o.date_added||0).getTime();if(w==="last-modified"){const D=new Date(o.date_updated||o.date_added||0).getTime();return new Date(i.date_updated||i.date_added||0).getTime()-D}return 0}),r},[d,y,w]),P=Math.ceil(N.length/R),J=React.useMemo(()=>{const r=(l-1)*R;return N.slice(r,r+R)},[N,l]),K=React.useCallback(r=>{f(r),I("list");const o=N.findIndex(i=>i.id===r.id);if(o>=0){const i=Math.floor(o/R)+1;j(i)}setTimeout(()=>{const i=document.getElementById(`property-${r.id}`);i&&i.scrollIntoView({behavior:"smooth",block:"center"})},100)},[N]),Y=React.useMemo(()=>{if(!d)return["All"];const r=new Set(d.items.map(o=>o.property_group));return["All",...Array.from(r)]},[d]);return React.useEffect(()=>{j(1)},[y,w]),e.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden font-sans",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex flex-col md:flex-row md:items-center justify-between gap-4 shadow-sm z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg transform transition-hover hover:scale-105",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-extrabold text-gray-900 tracking-tight",children:"Properties"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:d?.region||"Loading..."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>U(!F),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${F?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),e.jsx("label",{htmlFor:"location-select",className:"text-xs font-black text-gray-400 uppercase tracking-tight hidden md:block ml-2",children:"Location"}),e.jsxs("div",{className:"relative group",children:[e.jsxs("select",{id:"location-select",name:"location",value:n,"data-testid":"source-select",onChange:r=>s(r.target.value),className:"appearance-none bg-gray-50 border border-gray-200 rounded-xl px-4 py-2 pr-10 text-sm font-bold text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all cursor-pointer relative",children:[e.jsx("option",{value:"chesterfield_ashgate",children:"Chesterfield (Ashgate)"}),e.jsx("option",{value:"chesterfield",children:"Chesterfield"}),e.jsx("option",{value:"chesterfield_rent",children:"Chesterfield (Rent)"}),e.jsx("option",{value:"herts",children:"Herts"}),e.jsx("option",{value:"hitchin_johnsonpl",children:"Hitchin (Johnson Pl)"}),e.jsx("option",{value:"hitchin_rent",children:"Hitchin (Rent)"}),e.jsx("option",{value:"london",children:"London"}),e.jsx("option",{value:"basingstoke",children:"Basingstoke"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-indigo-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),F&&e.jsx(re,{filters:y,onChange:G,propertyGroups:Y,sortBy:w,onSortChange:Z}),e.jsxs("main",{className:"flex-1 flex flex-col md:flex-row overflow-hidden relative",children:[e.jsxs("div",{className:`w-full md:w-2/5 flex flex-col bg-stone-200 overflow-hidden border-r border-gray-200 ${S==="map"?"hidden md:flex":"flex"}`,children:[e.jsx("div",{className:"flex-1 overflow-y-auto md:px-2 space-y-1 md:space-y-2 scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent","data-testid":"property-list",children:v?e.jsx("div",{className:"flex items-center justify-center h-64","data-testid":"loading-spinner",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):L?e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl border border-red-100 text-center font-medium",children:L}):N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-300 mb-4 flex justify-center",children:e.jsx("svg",{className:"w-16 h-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-gray-500 font-bold",children:"No properties found matching your criteria."}),e.jsx("button",{onClick:()=>G({minPrice:0,maxPrice:2e6,minBedrooms:0,propertyGroup:"All",searchQuery:""}),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Clear all filters"})]}):J.map((r,o)=>e.jsx(H,{property:r,onSelect:Q,onViewDetails:q,onShowOnMap:O,isSelected:h?.id===r.id,index:(l-1)*R+o,total:N.length},r.id))}),!v&&!L&&N.length>0&&P>1&&e.jsxs("div",{className:"p-4 pb-20 md:pb-4 border-t border-gray-200 bg-white/80 backdrop-blur-sm flex items-center justify-center gap-1","data-testid":"pagination-controls",children:[l>3&&e.jsx("button",{onClick:()=>j(1),className:"px-3 py-2 rounded-lg text-sm font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200","data-testid":"pagination-first",title:"First page",children:"1"}),l>3&&e.jsx("span",{className:"px-2 py-2 text-sm text-gray-400",children:"..."}),[l-2,l-1,l,l+1,l+2].filter(r=>r>=1&&r<=P).map(r=>e.jsx("button",{onClick:()=>j(r),className:`px-3 py-2 rounded-lg text-sm font-bold transition-all ${r===l?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"data-testid":`pagination-page-${r}`,children:r},r)),l<P-2&&e.jsx("span",{className:"px-2 py-2 text-sm text-gray-400",children:"..."}),l<P-2&&e.jsx("button",{onClick:()=>j(P),className:"px-3 py-2 rounded-lg text-sm font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200","data-testid":"pagination-last",title:"Last page",children:P})]})]}),e.jsx("div",{className:`w-full md:w-3/5 relative ${S==="list"?"hidden md:block":"flex-1 md:block"}`,children:e.jsx(ae,{properties:N,selectedProperty:h,onPropertySelect:K,zoom:z,onZoomChange:V,center:$,onCenterChange:E})}),e.jsxs("div",{className:"fixed bottom-6 md:bottom-2 left-4 z-[40] text-gray-900 px-4 py-3 font-bold flex flex-col items-start text-sm",children:[e.jsx("span",{children:v?"Searching...":`${N.length} properties`}),d&&e.jsxs("span",{className:"text-xs text-gray-800 font-medium",children:["Updated:"," ",new Date(d.updated_on).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsx("button",{onClick:()=>I(S==="list"?"map":"list"),className:"md:hidden fixed bottom-6 right-4 z-[40] bg-gray-900 text-white px-6 py-3 rounded-full font-bold shadow-2xl flex items-center gap-2 border border-white/10 active:scale-95 transition-transform",children:S==="list"?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Show Map"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Show List"]})})]}),M&&e.jsx(se,{property:M,onClose:()=>_(null)})]})};ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(oe,{})}));
