import"./index-BJcHZe8P.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{u as We,T as He}from"./Toast-COaeoAQl.js";import{A as $}from"./api-CH_Pe6Vg.js";import{B as E}from"./button-D6DGr86I.js";import{M as he}from"./map-pin-BZQ0wcyB.js";import{C as ye,M as Ve}from"./map-afHLg9l6.js";import{C as Be}from"./chevron-left-CGHllpLw.js";import{c as ae}from"./createLucideIcon-DtX1aPOG.js";import{L as qe,I as ne,a as de}from"./label-j-A5YPyd.js";import{L as Ze}from"./log-out-B0TqtotO.js";import{A as Ye,P as je}from"./Auth-uEj7rJlD.js";import{y as Je}from"./serialize-CShLh4Jy.js";import{P as ve}from"./pen-vQk8amFZ.js";import{T as De}from"./trash-2-DQbJ9aIh.js";import{G as Ae}from"./grip-vertical-BjGCJcsX.js";import{U as Ke,D as Xe}from"./upload--Rbr-3Yq.js";import{S as Qe}from"./search-Cfl0sis-.js";import{X as et}from"./x-BS-d4QNZ.js";import{S as tt}from"./save-rN7CZjMN.js";import{L as at}from"./index-BehiXGmn.js";import{C as st,A as nt}from"./clock-BQfnJDuN.js";import{C as rt}from"./check-CWX8rMms.js";import"./circle-check-F4iM422t.js";import"./clsx-B-dksMZM.js";import"./eye-Jn_UhOO1.js";const ot=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Ce=ae("cloud-rain",ot);const it=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],lt=ae("cloud-sun",it);const dt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ct=ae("layers",dt);const ut=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],mt=ae("sun",ut);const ht=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],pt=ae("sunrise",ht);const xt=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],Ie=ae("thermometer",xt);const ft=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],gt=ae("zoom-in",ft),we="e1f10a1e78da46f5b10a1e78da96f525";function me(t,a){return t.map(s=>s!==null&&s<=a?0:s)}const F=()=>{const t=localStorage.getItem("weather_token")||sessionStorage.getItem("weather_token"),a={"Content-Type":"application/json"};return t&&(a.Authorization=`Bearer ${t}`),a},A={async getWeatherData(){const t=await fetch(`${$}/weather/data`,{headers:F(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch weather data");return t.json()},async register(t,a,s,n,h=!1){const u=await fetch(`${$}/weather/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:a,first_name:s,last_name:n,remember:h})});if(!u.ok)throw new Error("Registration failed");return u.json()},async login(t,a,s=!1){const n=await fetch(`${$}/weather/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:a,remember:s})});if(!n.ok)throw new Error("Login failed");return n.json()},async getMe(){const t=await fetch(`${$}/weather/me`,{headers:F(),credentials:"include"});if(!t.ok)throw new Error("Failed to get user");return t.json()},async getTiers(){const t=await fetch(`${$}/weather/tiers`,{headers:F(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch tiers");return t.json()},async upgrade(t){const a=await fetch(`${$}/weather/upgrade?level=${encodeURIComponent(t)}`,{method:"POST",headers:F(),credentials:"include"});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.detail||"Upgrade failed")}return a.json()},async addGroup(t){const a=await fetch(`${$}/weather/groups`,{method:"POST",headers:F(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to add group");return a.json()},async updateGroup(t,a){const s=await fetch(`${$}/weather/groups/${t}`,{method:"PUT",headers:F(),body:JSON.stringify(a)});if(!s.ok)throw new Error("Failed to update group");return s.json()},async deleteGroup(t){const a=await fetch(`${$}/weather/groups/${t}`,{method:"DELETE",headers:F(),credentials:"include"});if(!a.ok)throw new Error("Failed to delete group");return a.json()},async reorderGroups(t){const a=await fetch(`${$}/weather/groups/reorder`,{method:"POST",headers:F(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to reorder groups");return a.json()},async addPlace(t){const a=await fetch(`${$}/weather/places`,{method:"POST",headers:F(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to add place");return a.json()},async updatePlace(t,a){const s=await fetch(`${$}/weather/places/${t}`,{method:"PUT",headers:F(),body:JSON.stringify(a)});if(!s.ok)throw new Error("Failed to update place");return s.json()},async deletePlace(t){const a=await fetch(`${$}/weather/places/${t}`,{method:"DELETE",headers:F(),credentials:"include"});if(!a.ok)throw new Error("Failed to delete place");return a.json()},async reorderPlaces(t){const a=await fetch(`${$}/weather/places/reorder`,{method:"POST",headers:F(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to reorder places");return a.json()},async exportPlaces(){const t=await fetch(`${$}/weather/export`,{headers:F(),credentials:"include"});if(!t.ok)throw new Error("Failed to export places");return t.json()},async importPlaces(t){const a=await fetch(`${$}/weather/import`,{method:"POST",headers:F(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to import places");return a.json()},async searchPlace(t){const a=await fetch(`${$}/weather/search?link_wu=${encodeURIComponent(t)}`,{headers:F(),credentials:"include"});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.detail||"Failed to search place")}return a.json()},async fetchWUForecast(t){const a=`https://api.weather.com/v3/wx/forecast/hourly/15day?apiKey=${we}&geocode=${t.coords[0]}%2C${t.coords[1]}&units=m&language=en-US&format=json`,n=await(await fetch(a,{referrerPolicy:"no-referrer"})).json();return{tzOffset:n.validTimeLocal[0]?.slice(19),x:n.validTimeLocal.map(h=>new Date(h.slice(0,19))),y_precipitation:n.qpf,y_humidity:n.relativeHumidity,y_snow:me(n.qpfSnow,0),y_temperature:n.temperature,y_windGust:n.windGust,y_precipChance:n.precipChance,y_uvIndex:me(n.uvIndex,0),y_cloudCover:me(n.cloudCover,0)}},async fetchWUHistory(t){const a=`https://api.weather.com/v3/wx/conditions/historical/hourly/1day?apiKey=${we}&geocode=${t.coords[0]}%2C${t.coords[1]}&units=m&language=en-US&format=json`,n=await(await fetch(a,{referrerPolicy:"no-referrer"})).json();return{tzOffset:n.validTimeLocal[0]?.slice(19),x:n.validTimeLocal.map(h=>new Date(h.slice(0,19))),y_precipitation:[],y_humidity:n.relativeHumidity,y_snow:[],y_temperature:n.temperature,y_windGust:n.windGust,y_precipChance:[],y_uvIndex:me(n.uvIndex,0),y_cloudCover:[],sunriseTimeLocal:n.sunriseTimeLocal[0],sunsetTimeLocal:n.sunsetTimeLocal[0]}},async fetchWUPollen(t){const a=`https://api.weather.com/v2/turbo/vt1pollenforecast?apiKey=${we}&geocode=${t.coords[0]}%2C${t.coords[1]}&language=en&format=json`,n=await(await fetch(a)).json();return{x:n.vt1pollenforecast?.reportDate.map(h=>new Date(h.slice(0,19)))||[],y_tree:n.vt1pollenforecast?.tree||[],y_weed:n.vt1pollenforecast?.weed||[],y_grass:n.vt1pollenforecast?.grass||[]}}},wt=()=>{const[t,a]=React.useState([]),[s,n]=React.useState([]),[h,u]=React.useState([]),[i,f]=React.useState(null),S=React.useMemo(()=>!i||i.role==="admin"?t:t.filter(r=>r.user_id===i.id),[t,i]),w=React.useMemo(()=>!i||i.role==="admin"?s:s.filter(r=>r.user_id===i.id),[s,i]),[g,j]=React.useState(null),[l,v]=React.useState(()=>{const r=localStorage.getItem("weather_zoom");return r==="STANDARD"?"z1x":r==="DETAILED"?"z2x":r==="MACRO"?"z3x":r==="COMPACT"?"z2x":r||"z2x"}),[b,T]=React.useState(!0),[z,x]=React.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("view")==="login"),[m,o]=React.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("view")==="edit"),[L,H]=React.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("view")==="upgrade"),[Q,d]=React.useState("idle"),C=React.useCallback(async()=>{d("loading");try{const[r,c]=await Promise.all([A.getWeatherData(),A.getTiers()]);a(r.places),n(r.groups),u(c);const W=new URLSearchParams(window.location.search).get("location"),J=localStorage.getItem("weather_location"),B=r.places.find(le=>le.name===W)||r.places.find(le=>le.name===J)||r.places[0];j(B),d("success")}catch(r){console.error("Failed to load weather data",r),d("error")}finally{T(!1)}},[]);React.useEffect(()=>{C(),(localStorage.getItem("weather_token")||sessionStorage.getItem("weather_token"))&&A.getMe().then(f).catch(()=>{localStorage.removeItem("weather_token"),sessionStorage.removeItem("weather_token"),f(null)})},[C]),React.useEffect(()=>{i&&g&&i.role!=="admin"&&g.user_id!==i.id&&(S.length>0?j(S[0]):j(null))},[i,S,g]),React.useEffect(()=>{const r=()=>{const c=new URLSearchParams(window.location.search);x(c.get("view")==="login"),o(c.get("view")==="edit"),H(c.get("view")==="upgrade");const U=c.get("location");U&&a(W=>{const J=W.find(B=>B.name===U);return J&&j(J),W})};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]);const P=()=>{const r=new URLSearchParams(window.location.search);r.get("view")!=="login"&&(r.set("view","login"),window.history.pushState({},"",`?${r.toString()}`),x(!0),o(!1))},V=()=>{const r=new URLSearchParams(window.location.search);r.get("view")!=="edit"&&(r.set("view","edit"),window.history.pushState({},"",`?${r.toString()}`),o(!0),x(!1),H(!1))},ee=()=>{const r=new URLSearchParams(window.location.search);r.get("view")!=="upgrade"&&(r.set("view","upgrade"),window.history.pushState({},"",`?${r.toString()}`),H(!0),o(!1),x(!1))},q=()=>{const r=new URLSearchParams(window.location.search);if(r.has("view")){r.delete("view");const c=r.toString();window.history.pushState({},"",c?`?${c}`:window.location.pathname),x(!1),o(!1),H(!1)}else x(!1),o(!1),H(!1)};React.useEffect(()=>{i&&new URLSearchParams(window.location.search).get("view")!=="edit"&&V()},[i]);const te=r=>{j(r),localStorage.setItem("weather_location",r.name);const c=new URLSearchParams(window.location.search);c.get("location")!==r.name&&(c.set("location",r.name),window.history.pushState({},"",`?${c.toString()}`))},Z=React.useCallback(async(r,c,U)=>{U?localStorage.setItem("weather_token",r):sessionStorage.setItem("weather_token",r),f(c),await C()},[C]);return{places:S,groups:w,tiers:h,selectedPlace:g,loading:b,user:i,showLogin:z,showEdit:m,showUpgrade:L,requestState:Q,zoomLevel:l,setZoomLevel:r=>{v(r),localStorage.setItem("weather_zoom",r)},handlePlaceChange:te,onAuthSuccess:Z,login:async(r,c,U=!0)=>{try{const W=await A.login(r,c,U);return U?localStorage.setItem("weather_token",W.access_token):sessionStorage.setItem("weather_token",W.access_token),f(W.user),await C(),!0}catch(W){return console.error("Login failed",W),!1}},register:async(r,c,U,W,J=!0)=>{try{const B=await A.register(r,c,U,W,J);return J?localStorage.setItem("weather_token",B.access_token):sessionStorage.setItem("weather_token",B.access_token),f(B.user),await C(),!0}catch(B){return console.error("Registration failed",B),!1}},logout:async()=>{localStorage.removeItem("weather_token"),sessionStorage.removeItem("weather_token"),f(null),await C(),q()},navigateToLogin:P,navigateToEdit:V,navigateToUpgrade:ee,navigateToPublic:q,handleAddGroup:async r=>{const c=await A.addGroup(r);a(c.places),n(c.groups)},handleUpdateGroup:async(r,c)=>{const U=await A.updateGroup(r,c);a(U.places),n(U.groups)},handleDeleteGroup:async r=>{if(!window.confirm("Are you sure you want to delete this group? Places in this group will become standalone."))return;const c=await A.deleteGroup(r);a(c.places),n(c.groups)},handleReorderGroups:async r=>{const c=await A.reorderGroups(r);a(c.places),n(c.groups)},handleAddPlace:async r=>{const c=await A.addPlace(r);a(c.places),n(c.groups)},handleUpdatePlace:async(r,c)=>{const U=await A.updatePlace(r,c);a(U.places),n(U.groups)},handleDeletePlace:async r=>{if(!window.confirm("Are you sure you want to delete this location?"))return;const c=await A.deletePlace(r);a(c.places),n(c.groups)},handleReorderPlaces:async r=>{const c=await A.reorderPlaces(r);a(c.places),n(c.groups)},handleSearchPlace:async r=>await A.searchPlace(r),handleExportPlaces:async()=>await A.exportPlaces(),handleImportPlaces:async r=>{const c=await A.importPlaces(r);a(c.places)},handleUpgrade:async r=>{try{const c=await A.upgrade(r);f(c),V()}catch(c){console.error("Upgrade failed",c),alert(c instanceof Error?c.message:"Upgrade failed")}}}},Le=({places:t,selectedPlace:a,onSelect:s})=>{const[n,h]=React.useState(!1),[u,i]=React.useState(null),f=React.useRef(null),S=React.useRef(null),{groups:w,standalone:g}=React.useMemo(()=>{const l={},v=[];return t.forEach(b=>{b.group?(l[b.group]||(l[b.group]=[]),l[b.group].push(b)):v.push(b)}),{groups:l,standalone:v}},[t]);React.useEffect(()=>{const l=v=>{f.current&&!f.current.contains(v.target)&&h(!1)};return n&&document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),React.useEffect(()=>{n?a?.group&&i(a.group):i(null)},[n,a]);const j=l=>{s(l),h(!1)};return e.jsxs("div",{className:"relative inline-block w-full md:w-64",ref:f,"data-testid":"place-dropdown",children:[e.jsxs("button",{type:"button",ref:S,onClick:()=>h(!n),className:"flex w-full items-center justify-between rounded-xl border border-slate-200 bg-white px-4 py-2 text-left font-semibold text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none","aria-haspopup":"listbox","aria-expanded":n,"data-testid":"place-dropdown-trigger",children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx(he,{className:"size-4 shrink-0 text-indigo-500"}),e.jsx("span",{className:"truncate",children:a?.name||"Select location..."})]}),e.jsx(ye,{className:`size-4 text-slate-400 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&e.jsx("div",{className:"animate-in fade-in zoom-in absolute z-20 mt-2 max-h-80 w-full overflow-hidden rounded-xl border border-slate-200 bg-white p-1 shadow-xl duration-200",role:"listbox",children:u?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{type:"button",onClick:()=>i(null),className:"flex w-full items-center gap-2 rounded-lg border-b border-slate-100 px-3 py-2 text-left text-xs font-bold text-indigo-600 transition-colors hover:bg-slate-50","data-testid":"group-back-button",children:[e.jsx(Be,{className:"size-3.5"}),e.jsx("span",{children:"Back to all"}),e.jsx("span",{className:"ml-auto font-normal text-slate-400",children:u})]}),e.jsx("ul",{className:"max-h-60 overflow-auto p-1",children:w[u].map(l=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>j(l),className:`flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm transition-colors ${a?.name===l.name?"bg-indigo-50 font-bold text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,role:"option","aria-selected":a?.name===l.name,"data-testid":`place-item-${l.name}`,children:[e.jsx(he,{className:`size-3.5 ${a?.name===l.name?"text-indigo-500":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:l.name}),l.country&&e.jsx("span",{className:"ml-auto text-[10px] font-medium tracking-wider text-slate-400 uppercase",children:l.country})]})},l.name))})]}):e.jsxs("ul",{className:"max-h-60 overflow-auto",children:[Object.keys(w).map(l=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>i(l),className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm text-slate-600 transition-colors hover:bg-slate-50","data-testid":`group-item-${l}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"size-3.5 text-indigo-400"}),e.jsx("span",{className:"font-bold",children:l})]}),e.jsx(ye,{className:"size-3.5 -rotate-90 text-slate-300"})]})},l)),g.map(l=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>j(l),className:`flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm transition-colors ${a?.name===l.name?"bg-indigo-50 font-bold text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,role:"option","aria-selected":a?.name===l.name,"data-testid":`place-item-${l.name}`,children:[e.jsx(he,{className:`size-3.5 ${a?.name===l.name?"text-indigo-500":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:l.name}),l.country&&e.jsx("span",{className:"ml-auto text-[10px] font-medium tracking-wider text-slate-400 uppercase",children:l.country})]})},l.name))]})})]})},yt=({isAdmin:t,userEmail:a,userFirstName:s,userMembership:n,onLoginClick:h,onLogoutClick:u,onLogoClick:i,onUpgradeClick:f,showLoginButton:S,showUpgradeButton:w,places:g=[],selectedPlace:j=null,onPlaceChange:l,tiers:v=[]})=>{const b=v.findIndex(x=>x.name===n),z=(b!==-1&&b<v.length-1?v[b+1]:null)?.name;return e.jsxs("header",{className:"sticky top-0 z-10 w-full border-b bg-white shadow-sm","data-testid":"weather-navbar",children:[e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between gap-4 px-4 py-2 md:py-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:i,className:"flex items-center gap-2 transition-opacity hover:opacity-80","data-testid":"navbar-logo",children:[e.jsx("img",{src:"/favicon_weather.png",alt:"",className:"size-8","aria-hidden":"true"}),e.jsx("h1",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-2xl font-bold text-transparent",children:"Weather"})]})}),l&&e.jsx("div",{className:"hidden max-w-md flex-1 items-center gap-3 md:flex","data-testid":"place-dropdown-desktop",children:e.jsx(Le,{places:g,selectedPlace:j,onSelect:l})}),e.jsxs("div",{className:"flex items-center gap-4",children:[S&&e.jsxs(E,{variant:"ghost",className:"gap-2 text-slate-600 hover:bg-slate-100",onClick:h,"data-testid":"login-button",children:[e.jsx(qe,{size:18}),e.jsx("span",{className:"hidden md:inline",children:"Login"})]}),a&&e.jsxs("div",{className:"flex items-center gap-4",children:[w&&z&&e.jsxs(E,{variant:"outline",onClick:f,className:"rounded-2xl border-indigo-200 bg-indigo-50 text-indigo-700 hover:bg-indigo-100","data-testid":"upgrade-button",children:[e.jsxs("span",{className:"hidden md:inline",children:["Upgrade to ",z]}),e.jsx("span",{className:"md:hidden",children:"Upgrade"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 md:inline","data-testid":"user-display-name",children:s||a}),n&&e.jsx("span",{className:"text-[10px] font-bold tracking-wider text-indigo-500 uppercase","data-testid":"user-membership",children:n})]}),e.jsx(E,{variant:"ghost",size:"icon",onClick:u,className:"text-slate-400 hover:bg-slate-100 hover:text-red-500",title:"Logout","data-testid":"logout-button",children:e.jsx(Ze,{size:20})})]})]})]}),l&&e.jsx("div",{className:"border-t px-4 py-2 md:hidden","data-testid":"place-dropdown-mobile",children:e.jsx(Le,{places:g,selectedPlace:j,onSelect:l})})]})},bt=({onAuthSuccess:t,onCancel:a})=>e.jsxs("div",{className:"flex flex-col items-center","data-testid":"login-view",children:[e.jsx(Ye,{appName:"Weather",loginEndpoint:"/weather/login",registerEndpoint:"/weather/register",onSuccess:(s,n)=>t(s.access_token,s.user,n),className:"min-h-0 bg-transparent"}),e.jsx(E,{variant:"ghost",onClick:a,className:"mt-4 text-slate-500","data-testid":"login-cancel-button",children:"Cancel"})]}),jt=({groups:t,userId:a,userGroups:s,orderedGroups:n,limits:h,isAtGroupLimit:u,draggedGroupId:i,canDragGroupId:f,onAddGroup:S,onUpdateGroup:w,onDeleteGroup:g,onDragStart:j,onDragOver:l,onDragEnd:v,setCanDragGroupId:b})=>{const[T,z]=React.useState(""),[x,m]=React.useState(null),[o,L]=React.useState(""),H=async d=>{d.preventDefault(),T.trim()&&(await S(T),z(""))},Q=async d=>{d.preventDefault(),!(!x||!o.trim())&&(await w(x,o),m(null),L(""))};return e.jsx("div",{className:"mt-8","data-testid":"groups-management-section",children:e.jsx("div",{className:"overflow-hidden rounded-2xl border bg-white shadow-sm","data-testid":"groups-table-container",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b bg-slate-50 md:table-header-group",children:e.jsx("tr",{children:e.jsx("th",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Groups"}),e.jsxs("span",{className:"text-xs font-normal text-slate-500",children:[s.length," / ",h.groups]})]})})})}),e.jsxs("tbody",{className:"divide-y",children:[n.map(d=>e.jsxs("tr",{draggable:f===d.id,onDragStart:()=>d.id&&j(d.id),onDragOver:C=>d.id&&l(C,d.id),onDragEnd:v,className:`flex flex-col border-b transition-colors last:border-b-0 hover:bg-slate-50 md:table-row md:border-b-0 ${i===d.id?"bg-indigo-50/50 opacity-40":""} ${f===d.id?"select-none":""}`,"data-testid":`group-row-${d.id}`,children:[e.jsx("td",{className:"block px-6 pt-2 md:table-cell",children:x===d.id?e.jsxs("form",{onSubmit:Q,className:"flex flex-1 gap-2 py-2",children:[e.jsx(ne,{value:o,onChange:C=>L(C.target.value),autoFocus:!0,className:"h-9 rounded-xl"}),e.jsx(E,{type:"submit",className:"h-9",children:"Save"}),e.jsx(E,{variant:"outline",onClick:()=>m(null),className:"h-9",children:"Cancel"})]}):e.jsx("span",{className:"block font-bold",children:d.name})}),e.jsx("td",{className:"ml-auto block px-6 text-left md:table-cell md:text-right",children:e.jsxs("div",{className:"flex justify-start gap-1 md:justify-end",children:[e.jsx(E,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-indigo-600","data-testid":`edit-group-${d.id}`,onClick:()=>{m(d.id),L(d.name)},children:e.jsx(ve,{size:14})}),e.jsx(E,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-red-600","data-testid":`delete-group-${d.id}`,onClick:()=>d.id&&g(d.id),children:e.jsx(De,{size:14})}),e.jsx("div",{className:"cursor-grab touch-none p-2 text-slate-300 transition-colors hover:text-indigo-600 active:cursor-grabbing",title:"Hold to drag","data-testid":`group-drag-handle-${d.id}`,onMouseDown:()=>b(d.id||null),onMouseUp:()=>b(null),onTouchStart:()=>b(d.id||null),onTouchEnd:()=>b(null),onTouchCancel:()=>b(null),onClick:C=>C.stopPropagation(),children:e.jsx(Ae,{size:18})})]})})]},d.id)),!u&&e.jsx("tr",{className:"flex flex-col bg-slate-50/30 md:table-row",children:e.jsx("td",{colSpan:2,className:"block px-6 py-4 md:table-cell",children:e.jsxs("form",{onSubmit:H,className:"flex gap-2",children:[e.jsx(ne,{placeholder:"New Group Name...",value:T,onChange:d=>z(d.target.value),className:"rounded-xl","data-testid":"new-group-name-input"}),e.jsxs(E,{type:"submit",disabled:!T.trim(),className:"gap-2 rounded-xl","data-testid":"submit-group-button",children:[e.jsx(je,{size:18})," Add"]})]})})})]})]})})})},vt=({isImporting:t,onImportClick:a,onExportYAML:s})=>e.jsxs("div",{className:"mb-8 flex flex-col items-start justify-between gap-4 px-4 sm:flex-row sm:items-center","data-testid":"management-header",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold","data-testid":"management-title",children:"Manage"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(E,{variant:"outline",onClick:a,className:"gap-2 rounded-xl",disabled:t,"data-testid":"import-yaml-button",children:[e.jsx(Ke,{size:18})," Import YAML"]}),e.jsxs(E,{variant:"outline",onClick:s,className:"gap-2 rounded-xl","data-testid":"export-yaml-button",children:[e.jsx(Xe,{size:18})," Export YAML"]})]})]}),Nt=({groups:t,userId:a,userRole:s,className:n="",...h})=>e.jsxs("select",{className:`flex h-10 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 ${n}`,"data-testid":"group-select",...h,children:[e.jsx("option",{value:"",children:"---"}),t.filter(u=>u.user_id===a||s==="admin").map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),St=({editingPlace:t,groups:a,userId:s,userRole:n,isSearching:h,isAutoFetching:u,onSearchPlace:i,onSubmit:f,onCancel:S})=>{const[w,g]=React.useState({name:"",coords:[0,0],linkWU:"",country:"",group_id:null}),[j,l]=React.useState(""),[v,b]=React.useState(!1);React.useEffect(()=>{t?(g(t),l(`${t.coords[0]}, ${t.coords[1]}`)):(g({name:"",coords:[0,0],linkWU:"",country:"",group_id:null}),l(""))},[t]);const T=async()=>{if(w.linkWU){b(!0);try{const m=await i(w.linkWU);g(o=>({...o,name:m.city||o.name,coords:[m.lat,m.lon],country:m.countryCode||o.country})),l(`${m.lat}, ${m.lon}`)}finally{b(!1)}}},z=m=>{m.preventDefault(),f(w,j)},x=v||h||u;return e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 mb-8 rounded-2xl border bg-white p-6 shadow-lg duration-300","data-testid":"place-form-container",children:[e.jsxs("h3",{className:"mb-6 flex items-center gap-2 text-lg font-bold",children:[t?e.jsx(ve,{size:20,className:"text-indigo-600"}):e.jsx(je,{size:20,className:"text-indigo-600"}),t?"Edit Location":"Add New Location"]}),e.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"name",children:["City Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ne,{id:"name",value:w.name,onChange:m=>g({...w,name:m.target.value}),required:!0,className:"rounded-xl","data-testid":"place-name-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{htmlFor:"country",children:"Country Code"}),e.jsx(ne,{id:"country",value:w.country||"",onChange:m=>g({...w,country:m.target.value}),placeholder:"GB, FRA, ZAF...",className:"rounded-xl","data-testid":"place-country-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{htmlFor:"coords",children:"Coordinates (lat, lon)"}),e.jsx(ne,{id:"coords",value:j,onChange:m=>l(m.target.value),placeholder:"51.507, -0.127 (Auto-fetch if empty)",className:"rounded-xl","data-testid":"place-coords-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"linkWU",children:["WU Path (or URL) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{id:"linkWU",value:w.linkWU,onChange:m=>{let o=m.target.value;const L="https://www.wunderground.com/weather/";o.startsWith(L)&&(o=o.substring(L.length)),g({...w,linkWU:o})},placeholder:"gb/london/ILONDO440",required:!0,className:"rounded-xl","data-testid":"place-link-wu-input"}),e.jsx(E,{type:"button",variant:"outline",size:"icon",onClick:T,disabled:!w.linkWU||x,className:"shrink-0 rounded-xl",title:"Fetch details from Wunderground","data-testid":"fetch-wu-details-button",children:e.jsx(Qe,{size:18,className:v?"animate-pulse":""})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{htmlFor:"group",children:"Group"}),e.jsx(Nt,{id:"group",value:w.group_id||"",onChange:m=>g({...w,group_id:m.target.value?parseInt(m.target.value):null}),groups:a,userId:s,userRole:n,"data-testid":"place-group-select"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 md:col-span-2",children:[e.jsxs(E,{type:"button",variant:"outline",onClick:S,disabled:x,className:"rounded-xl","data-testid":"cancel-form-button",children:[e.jsx(et,{size:18,className:"mr-2"})," Cancel"]}),e.jsx(E,{type:"submit",className:"min-w-[120px] rounded-xl",disabled:x,"data-testid":"save-place-button",children:u?e.jsx(e.Fragment,{children:"Searching..."}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{size:18,className:"mr-2"})," ",t?"Update":"Save"]})})]})]})]})},kt=({places:t,orderedPlaces:a,groups:s,userPlaces:n,limits:h,isAtLimit:u,draggedId:i,canDragId:f,onAddClick:S,onEdit:w,onDelete:g,onDragStart:j,onDragOver:l,onDragEnd:v,onDropOnGroup:b,setCanDragId:T})=>{const z=React.useMemo(()=>{const x={};a.forEach(o=>{const L=o.group||"---";x[L]||(x[L]=[]),x[L].push(o)});const m=[];return s.forEach(o=>{m.push([o.name,x[o.name]||[]]),delete x[o.name]}),(x["---"]||m.length===0)&&(m.push(["---",x["---"]||[]]),delete x["---"]),Object.entries(x).forEach(o=>m.push(o)),m.filter(([o,L])=>L.length>0?!0:o!=="---")},[s,a]);return e.jsx("div",{className:"rounded-2xl border bg-white shadow-sm","data-testid":"places-table-container",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b bg-slate-50 md:table-header-group",children:e.jsx("tr",{children:e.jsx("th",{className:"px-6 text-xs tracking-wider text-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-slate-500 uppercase",children:"Locations"}),e.jsxs("span",{className:"p-4 text-xs font-normal text-slate-500","data-testid":"location-counter",children:[n.length," / ",h.locations," locations used"]}),e.jsxs(E,{onClick:S,disabled:u,className:"flex h-8 gap-2 rounded-xl","data-testid":"add-place-button",children:[e.jsx(je,{size:16})," ",u?"Limit Reached":"Add"]})]})})})}),e.jsx("tbody",{className:"divide-y",children:z.map(([x,m])=>e.jsxs(React.Fragment,{children:[e.jsx("tr",{className:"flex flex-col bg-slate-50/50 transition-colors md:table-row",onDragOver:o=>{o.preventDefault(),o.currentTarget.classList.add("bg-indigo-100/50")},onDragLeave:o=>{o.currentTarget.classList.remove("bg-indigo-100/50")},onDrop:o=>{o.currentTarget.classList.remove("bg-indigo-100/50"),b(o,x)},"data-testid":`group-header-${x}`,children:e.jsx("td",{colSpan:2,className:"block px-6 py-2 text-[0.75rem] font-bold tracking-widest text-indigo-500 uppercase md:table-cell",children:x})}),m.map(o=>e.jsxs("tr",{draggable:f===o.id,onDragStart:()=>o.id&&j(o.id),onDragOver:L=>o.id&&l(L,o.id),onDragEnd:v,onDrop:L=>o.id&&b(L,x),className:`flex flex-col border-b transition-colors last:border-b-0 hover:bg-slate-50 md:table-row md:border-b-0 ${i===o.id?"bg-indigo-50/50 opacity-40":""} ${f===o.id?"select-none":""}`,"data-testid":`place-row-${o.id}`,children:[e.jsx("td",{className:"block px-6 pt-2 md:table-cell",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-50 p-2",children:e.jsx(he,{size:16,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:o.name}),e.jsx("div",{className:"flex gap-2 text-xs text-slate-400",children:e.jsx("span",{children:o.country||"N/A"})})]})]})}),e.jsx("td",{className:"ml-auto block px-6 text-left md:table-cell md:text-right",children:e.jsxs("div",{className:"flex justify-start gap-2 md:justify-end",children:[e.jsx("a",{href:`https://www.wunderground.com/weather/${o.linkWU}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex rounded-lg p-2 text-slate-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"View on Weather Underground","data-testid":`view-wu-link-${o.id}`,children:e.jsx(lt,{size:16})}),e.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${o.coords[0]},${o.coords[1]}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex rounded-lg p-2 text-slate-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"View on Google Maps","data-testid":`view-map-link-${o.id}`,children:e.jsx(Ve,{size:16})}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>w(o),className:"text-slate-400 hover:bg-indigo-50 hover:text-indigo-600",title:"Edit location","data-testid":`edit-place-${o.id}`,children:e.jsx(ve,{size:16})}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>o.id&&g(o.id),className:"text-slate-400 hover:bg-red-50 hover:text-red-600",title:"Delete location","data-testid":`delete-place-${o.id}`,children:e.jsx(De,{size:16})}),e.jsx("div",{className:"cursor-grab touch-none p-2 text-slate-300 transition-colors hover:text-indigo-600 active:cursor-grabbing",title:"Hold to drag","data-testid":`drag-handle-${o.id}`,onMouseDown:()=>T(o.id||null),onMouseUp:()=>T(null),onTouchStart:()=>T(o.id||null),onTouchEnd:()=>T(null),onTouchCancel:()=>T(null),onClick:L=>L.stopPropagation(),children:e.jsx(Ae,{size:18})})]})})]},o.id))]},x))})]})})},_t=({places:t,groups:a,userMembership:s,userRole:n,userId:h,onAddGroup:u,onUpdateGroup:i,onDeleteGroup:f,onReorderGroups:S,onAddPlace:w,onUpdatePlace:g,onDeletePlace:j,onReorderPlaces:l,onSearchPlace:v,onExportPlaces:b,onImportPlaces:T,tiers:z})=>{const{successToast:x,errorToast:m,warningToast:o}=We(),[L,H]=React.useState(!1),[Q,d]=React.useState(!1),[C,P]=React.useState(!1),[V,ee]=React.useState(null),[q,te]=React.useState(!1),Z=React.useRef(null),[M,re]=React.useState(null),[oe,pe]=React.useState(null),[K,xe]=React.useState(null),[Ne,fe]=React.useState(null),ce=React.useMemo(()=>t.filter(p=>p.user_id===h),[t,h]),[Y,ge]=React.useState(t);React.useEffect(()=>{M===null&&ge(t)},[t,M]);const ie=React.useMemo(()=>z.find(k=>k.name===s)?.limits||{locations:10,groups:1},[z,s]),Se=ce.length>=ie.locations,ue=React.useMemo(()=>a.filter(p=>p.user_id===h),[a,h]),ke=ue.length>=ie.groups,[X,r]=React.useState(a);React.useEffect(()=>{K===null&&r(a)},[a,K]);const c=()=>{ee(null),H(!1),d(!1),P(!1)},U=p=>{ee(p),H(!1)},W=async p=>{try{await u({name:p}),x("Group added successfully")}catch(k){m(`Failed to add group: ${k}`)}},J=async(p,k)=>{try{await i(p,{name:k}),x("Group updated successfully")}catch(y){m(`Failed to update group: ${y}`)}},B=async p=>{try{await f(p),x("Group deleted successfully")}catch(k){m(`Failed to delete group: ${k}`)}},le=async()=>{try{const p=await b(),k=Je(p),y=new Blob([k],{type:"text/yaml"}),N=URL.createObjectURL(y),_=document.createElement("a");_.href=N,_.download=`weather-places-${new Date().toISOString().split("T")[0]}.yml`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(N)}catch(p){m(`Failed to export YAML: ${p}`)}},Ee=async p=>{const k=p.target.files?.[0];if(!k)return;te(!0);const y=new FileReader;y.onload=async N=>{try{const _=N.target?.result,O=jsyaml.load(_);let D=O;if(Array.isArray(O))D={places:[{name:null,items:O}]};else if(!(O&&O.places&&Array.isArray(O.places)))throw new Error("Invalid YAML format");await T(D),x("Locations imported successfully.")}catch(_){m(`Failed to import YAML: ${_}`)}finally{te(!1),Z.current&&(Z.current.value="")}},y.readAsText(k)},Ue=async(p,k)=>{let y=p.coords,N=p.name,_=p.country;const O=k.trim();if(O===""||O==="0, 0"||O==="0,0"){if(p.linkWU){P(!0);try{const G=await v(p.linkWU);y=[G.lat,G.lon],N=p.name||G.city||"",_=p.country||G.countryCode||""}catch(G){m(`Failed to fetch coordinates: ${G}`),P(!1);return}finally{P(!1)}}}else{const G=O.split(/[, ]+/);if(G.length>=2){const _e=parseFloat(G[0]),Re=parseFloat(G[1]);!isNaN(_e)&&!isNaN(Re)&&(y=[_e,Re])}}const D={...p,name:N,country:_,coords:y};if(ce.some(G=>G.name.toLowerCase()===N.toLowerCase()&&G.id!==(V?.id||null))){o(`A location with the name "${N}" already exists in your list.`);return}try{V?.id?await g(V.id,D):await w(D),c()}catch(G){m(`Failed to save location: ${G}`)}},Pe=p=>{re(p)},$e=(p,k)=>{if(p.preventDefault(),M===null||M===k)return;const y=Y.findIndex(D=>D.id===M),N=Y.findIndex(D=>D.id===k);if(y===-1||N===-1)return;const _=[...Y],[O]=_.splice(y,1);_.splice(N,0,O),_.map(D=>D.id).join(",")!==Y.map(D=>D.id).join(",")&&ge(_)},ze=()=>{if(M!==null){const p=t.map(y=>y.id).join(","),k=Y.map(y=>y.id).join(",");if(p!==k){const y=Y.map(N=>N.id).filter(N=>N!==void 0);l(y).catch(N=>console.error("Failed to reorder",N))}}re(null),pe(null)},Me=p=>{xe(p)},Oe=(p,k)=>{if(p.preventDefault(),K===null||K===k)return;const y=X.findIndex(D=>D.id===K),N=X.findIndex(D=>D.id===k);if(y===-1||N===-1)return;const _=[...X],[O]=_.splice(y,1);_.splice(N,0,O),_.map(D=>D.id).join(",")!==X.map(D=>D.id).join(",")&&r(_)},Ge=()=>{if(K!==null){const p=ue.map(y=>y.id).join(","),k=X.map(y=>y.id).join(",");if(p!==k){const y=X.map(N=>N.id).filter(N=>N!==void 0);S(y).catch(N=>console.error("Failed to reorder groups",N))}}xe(null),fe(null)},Fe=async(p,k)=>{if(p.preventDefault(),M===null)return;const y=Y.find(_=>_.id===M);if(!y)return;const N=k==="---"?null:a.find(_=>_.name===k)?.id||null;if(y.group_id!==N)try{await g(M,{...y,group_id:N}),x(`Moved ${y.name} to ${k==="---"?"Standalone":k}`)}catch(_){m(`Failed to move item: ${_}`)}};return e.jsxs("div",{className:"mx-auto max-w-4xl py-4 md:px-4","data-testid":"management-view",children:[e.jsx("input",{type:"file",accept:".yml,.yaml",className:"hidden",ref:Z,onChange:Ee,disabled:q}),e.jsx(vt,{isImporting:q,onImportClick:()=>Z.current?.click(),onExportYAML:le}),(L||V)&&e.jsx(St,{editingPlace:V,groups:a,userId:h,userRole:n,isSearching:Q,isAutoFetching:C,onSearchPlace:v,onSubmit:Ue,onCancel:c}),e.jsx(kt,{places:t,orderedPlaces:Y,groups:a,userPlaces:ce,limits:ie,isAtLimit:Se,draggedId:M,canDragId:oe,onAddClick:()=>{c(),H(!0)},onEdit:U,onDelete:j,onDragStart:Pe,onDragOver:$e,onDragEnd:ze,onDropOnGroup:Fe,setCanDragId:pe}),e.jsx(jt,{groups:a,userId:h,userGroups:ue,orderedGroups:X,limits:ie,isAtGroupLimit:ke,draggedGroupId:K,canDragGroupId:Ne,onAddGroup:W,onUpdateGroup:J,onDeleteGroup:B,onDragStart:Me,onDragOver:Oe,onDragEnd:Ge,setCanDragGroupId:fe})]})},I={LINE_WIDTH_DEFAULT:2,LINE_WIDTH_FILLED_AREA:2,TENSION:.3,POINT_RADIUS:1,HIT_RADIUS:16},Rt={z1x:"2000px",z2x:"4000px",z3x:"6000px",z4x:"8000px"},R={Temperature:"#ef4444",Precipitation:"#3b82f6",PrecipChance:"#0ea5e9",WindGust:"#8b5cf6",UV:"#f59e0b",CloudCover:"#94a3b8",Humidity:"#10b981",Snow:"#d946ef"};function Ct(){Chart.Chart.register(Chart.CategoryScale,Chart.LinearScale,Chart.PointElement,Chart.LineElement,Chart.BarElement,Chart.Title,Chart.Tooltip,Chart.Legend,Chart.Filler)}function be(t){const a=new Date;if(!t||t==="Local")return a;let s=0;if(t!=="Z"){const h=t.startsWith("-")?-1:1,u=parseInt(t.slice(1,3)),i=parseInt(t.slice(3,5))||0;s=h*(u*36e5+i*6e4)}const n=a.getTime()+a.getTimezoneOffset()*6e4;return new Date(n+s)}const It={id:"nowLine",afterDatasetsDraw:t=>{const{ctx:a,chartArea:{top:s,bottom:n},scales:{x:h}}=t;if(!h)return;const u=t.options.plugins?.nowLine?.tzOffset,i=be(u),f=t.data.labels;let S=-1,w=1/0;if(f.forEach((g,j)=>{const l=new Date(g),v=Math.abs(l.getTime()-i.getTime());v<w&&(w=v,S=j)}),S!==-1&&w<24*36e5){const g=h.getPixelForValue(f[S]);a.save(),a.beginPath(),a.lineWidth=2,a.strokeStyle="#0d9488",a.moveTo(g,s),a.lineTo(g,n),a.stroke(),a.fillStyle="#0d9488",a.font="bold 13px sans-serif",a.textAlign="left";const j=i.getHours().toString().padStart(2,"0"),l=i.getMinutes().toString().padStart(2,"0"),v=`${j}:${l}`,b=a.measureText(v);a.fillStyle="rgba(13, 148, 136, 0.9)",a.fillRect(g,s+10,b.width+16,24),a.fillStyle="#ffffff",a.fillText(v,g+8,s+27),a.restore()}}},Lt=()=>({type:"category",grid:{color:t=>{const a=t.chart.data.labels[t.index];return new Date(a).getHours()===0?"#0f172a":"transparent"},lineWidth:t=>{const a=t.chart.data.labels[t.index];return new Date(a).getHours()===0?2:0},drawTicks:!0},ticks:{maxRotation:0,autoSkip:!1,padding:10,color:"#334155",font:{weight:"bold",size:14},callback:function(t){const a=this.getLabelForValue(t),s=new Date(a);return isNaN(s.getTime())?"":s.getHours()===12?s.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}):""}}});Ct();const Tt=({place:t,zoomLevel:a})=>{const[s,n]=React.useState(null),[h,u]=React.useState(!0),i=React.useRef(null),f=React.useRef(null);if(React.useEffect(()=>{u(!0),Promise.all([A.fetchWUForecast(t),A.fetchWUHistory(t)]).then(([d,C])=>{n({forecast:d,history:C}),u(!1)})},[t]),React.useEffect(()=>{if(!h&&s&&i.current){const d=setTimeout(()=>{const C=f.current,P=i.current;if(C&&P){const V=be(s.forecast.tzOffset),ee=C.data.labels;let q=-1,te=1/0;if(ee.forEach((Z,M)=>{const re=new Date(Z),oe=Math.abs(re.getTime()-V.getTime());oe<te&&(te=oe,q=M)}),q!==-1){const M=C.scales.x.getPixelForValue(ee[q])-P.offsetWidth/2;P.scrollTo({left:Math.max(0,M),behavior:"smooth"})}}},500);return()=>clearTimeout(d)}},[h,s,a]),h||!s)return e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-400",children:"Loading forecast data..."})});const S=1440*60*1e3,w=[...s.history.x.slice().reverse(),...s.forecast.x].map(d=>d.toISOString()),g=s.history.x.length,j=s.history.sunriseTimeLocal?new Date(s.history.sunriseTimeLocal.slice(0,19)):null,l=s.history.sunsetTimeLocal?new Date(s.history.sunsetTimeLocal.slice(0,19)):null;let v=0,b=null;if(j&&l){const d=l.getTime()-j.getTime();v=d/S*100,b=new Date(j.getTime()+d/2)}const T=be(s.forecast.tzOffset),z=[...s.history.x.slice().reverse(),...s.forecast.x],m=[...s.history.y_temperature.slice().reverse(),...s.forecast.y_temperature].filter((d,C)=>{if(d===null)return!1;const P=z[C];return P.getFullYear()===T.getFullYear()&&P.getMonth()===T.getMonth()&&P.getDate()===T.getDate()}),o=m.length>0?Math.min(...m):null,L=m.length>0?Math.max(...m):null,H={labels:w,datasets:[{label:"Temperature (°C)",data:[...s.history.y_temperature.slice().reverse(),...s.forecast.y_temperature],borderColor:R.Temperature,backgroundColor:R.Temperature+"20",yAxisID:"y_temp",tension:I.TENSION,pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,borderWidth:I.LINE_WIDTH_DEFAULT},{label:"Rain Probability (%)",data:[...Array(g).fill(null),...s.forecast.y_precipChance],borderColor:R.PrecipChance,backgroundColor:R.PrecipChance+"20",yAxisID:"y_perc",tension:I.TENSION,pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,borderWidth:I.LINE_WIDTH_DEFAULT},{label:"Rain (mm/h)",data:[...Array(g).fill(null),...s.forecast.y_precipitation],borderColor:R.Precipitation,backgroundColor:R.Precipitation+"40",yAxisID:"y_rain",fill:!0,pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,borderWidth:I.LINE_WIDTH_FILLED_AREA},{label:"Wind Gust (km/h)",data:[...s.history.y_windGust.slice().reverse(),...s.forecast.y_windGust],borderColor:R.WindGust,yAxisID:"y_wind",pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,borderDash:[5,5],borderWidth:I.LINE_WIDTH_DEFAULT},{label:"Cloud Cover (%)",data:[...s.history.y_cloudCover.slice().reverse(),...s.forecast.y_cloudCover],borderColor:R.CloudCover,yAxisID:"y_cloud",pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,fill:!1,borderWidth:I.LINE_WIDTH_DEFAULT},{label:"UV Index",data:[...s.history.y_uvIndex.slice().reverse(),...s.forecast.y_uvIndex],borderColor:R.UV,yAxisID:"y_uv",pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,fill:!1,borderWidth:I.LINE_WIDTH_DEFAULT},{label:"Humidity (%)",data:[...s.history.y_humidity.slice().reverse(),...s.forecast.y_humidity],borderColor:R.Humidity,yAxisID:"y_humidity",pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,fill:!1,borderWidth:I.LINE_WIDTH_DEFAULT},{label:"Snow (cm/h)",data:[...s.history.y_snow.slice().reverse(),...s.forecast.y_snow],borderColor:R.Snow,backgroundColor:R.Snow+"30",yAxisID:"y_snow",fill:"origin",pointRadius:I.POINT_RADIUS,pointHitRadius:I.HIT_RADIUS,borderWidth:I.LINE_WIDTH_FILLED_AREA}]},Q={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!0},plugins:{legend:{position:"top",labels:{boxWidth:12,usePointStyle:!0,font:{size:11}}},tooltip:{filter:d=>{const C=d.dataset.yAxisID,P=d.raw;return C==="y_temp"?!0:["y_perc","y_rain","y_uv","y_snow"].includes(C)?P!==0&&P!==null:!1},callbacks:{title:d=>new Date(d[0].label).toLocaleString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit",hour12:!1})}},nowLine:{tzOffset:s.forecast.tzOffset}},scales:{x:Lt(),y_temp:{type:"linear",display:!0,position:"left",grid:{color:"rgba(239, 68, 68, 0.15)",drawOnChartArea:!0},ticks:{color:R.Temperature,font:{size:10,weight:"bold"},stepSize:5,precision:0},title:{display:!0,text:"Temperature °C",color:R.Temperature,font:{size:12,weight:"bold"}},beginAtZero:!1,afterDataLimits:d=>{d.min=Math.floor(d.min/5)*5,d.max=Math.ceil(d.max/5)*5}},y_perc:{type:"linear",display:!0,position:"left",min:0,max:100,grid:{drawOnChartArea:!1},ticks:{color:R.PrecipChance,font:{size:10,weight:"bold"},stepSize:100},title:{display:!0,text:"Rain %",color:R.PrecipChance,font:{size:12,weight:"bold"}}},y_rain:{type:"linear",display:!0,position:"left",min:0,suggestedMax:1,grid:{color:"rgba(59, 130, 246, 0.15)",drawOnChartArea:!0,lineWidth:5},ticks:{color:R.Precipitation,font:{size:10,weight:"bold"},stepSize:1},title:{display:!0,text:"Rain mm/h",color:R.Precipitation,font:{size:12,weight:"bold"}},afterDataLimits:d=>{d.max=Math.ceil(Math.max(d.max,1))}},y_snow:{type:"linear",display:!0,position:"left",min:0,suggestedMax:1,grid:{drawOnChartArea:!1},ticks:{color:R.Snow,font:{size:10,weight:"bold"},stepSize:1},title:{display:!0,text:"Snow cm/h",color:R.Snow,font:{size:12,weight:"bold"}},afterDataLimits:d=>{d.max=Math.ceil(Math.max(d.max,1))}},y_wind:{type:"linear",display:!0,position:"left",min:0,grid:{drawOnChartArea:!1},ticks:{color:R.WindGust,font:{size:10,weight:"bold"},stepSize:25},title:{display:!0,text:"Wind Gust km/h",color:R.WindGust,font:{size:12,weight:"bold"}}},y_cloud:{type:"linear",display:!0,position:"left",min:0,max:100,grid:{drawOnChartArea:!1},ticks:{color:R.CloudCover,font:{size:10,weight:"bold"},stepSize:100},title:{display:!0,text:"Cloud Coverage %",color:R.CloudCover,font:{size:12,weight:"bold"}}},y_uv:{type:"linear",display:!0,position:"left",min:0,max:12,grid:{drawOnChartArea:!1},ticks:{color:R.UV,font:{size:10,weight:"bold"},stepSize:12},title:{display:!0,text:"UV",color:R.UV,font:{size:12,weight:"bold"}}},y_humidity:{type:"linear",display:!0,position:"left",min:0,max:100,grid:{drawOnChartArea:!1},ticks:{color:R.Humidity,font:{size:10,weight:"bold"},stepSize:100},title:{display:!0,text:"Humidity %",color:R.Humidity,font:{size:12,weight:"bold"}}}}};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4 md:grid-cols-3",children:[e.jsx(se,{icon:e.jsx(Ie,{className:"text-red-500"}),label:"TEMP / UV index",value:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-red-500",children:[s.forecast.y_temperature[0],"°C"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-amber-500",children:["UV ",s.forecast.y_uvIndex[0]]})]})}),e.jsx(se,{icon:e.jsx(Ie,{className:"text-slate-500"}),label:"Min / Max",value:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-blue-500",children:[o,"°"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-red-500",children:[L,"°"]})]})}),e.jsx(se,{icon:e.jsx(Ce,{className:"text-sky-500"}),label:"Rain / Precip",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsxs("span",{className:"text-sky-500",children:[s.forecast.y_precipChance[0],"%"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-blue-500",children:[s.forecast.y_precipitation[0]," mm/h"]})]})}),e.jsx(se,{icon:e.jsx(Ce,{className:"text-emerald-500"}),label:"Humidity / Cloud",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsxs("span",{className:"text-emerald-500",children:[s.forecast.y_humidity[0],"%"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-slate-400",children:[s.forecast.y_cloudCover[0],"%"]})]})}),e.jsx(se,{icon:e.jsx(pt,{className:"text-slate-500"}),label:"Sun rise / Set",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsx("span",{className:"text-slate-900",children:j?j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsx("span",{className:"text-slate-900",children:l?l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"})]})}),e.jsx(se,{icon:e.jsx(st,{className:"text-slate-500"}),label:"Noon / Daylight %",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsx("span",{className:"text-slate-900",children:b?b.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsx("span",{className:"text-slate-900",children:v>0?`${v.toFixed(1)}%`:"N/A"})]})})]}),e.jsx("div",{ref:i,className:"custom-scrollbar h-[400px] w-full overflow-x-auto",children:e.jsx("div",{className:"h-full",style:{width:Rt[a]},children:e.jsx(at,{ref:f,data:H,options:Q,plugins:[It]})})})]})},se=({icon:t,label:a,value:s})=>e.jsxs("div",{className:"flex items-center gap-2 rounded-xl bg-slate-50 p-2 md:p-3",children:[e.jsx("div",{className:"flex-shrink-0",children:t}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-[10px] font-semibold tracking-wider text-slate-500 md:text-xs",children:a}),e.jsx("div",{className:"truncate text-base font-bold md:text-lg",children:s})]})]}),Te=[{value:"z1x",label:"1x"},{value:"z2x",label:"2x"},{value:"z3x",label:"3x"},{value:"z4x",label:"4x"}],Dt=({currentZoom:t,onSelect:a})=>{const[s,n]=React.useState(!1),h=React.useRef(null);React.useEffect(()=>{const i=f=>{h.current&&!h.current.contains(f.target)&&n(!1)};return s&&document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]);const u=Te.find(i=>i.value===t)?.label||t;return e.jsxs("div",{className:"relative inline-block",ref:h,"data-testid":"zoom-dropdown",children:[e.jsxs("button",{type:"button",onClick:()=>n(!s),className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:outline-none",children:[e.jsx(gt,{className:"size-4 text-indigo-500"}),e.jsxs("span",{children:["Zoom: ",u]}),e.jsx(ye,{className:`size-3 text-slate-400 transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&e.jsx("ul",{className:"animate-in fade-in zoom-in absolute right-0 z-20 mt-2 w-40 overflow-hidden rounded-xl border border-slate-200 bg-white p-1 shadow-xl duration-200",children:Te.map(i=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>{a(i.value),n(!1)},className:`flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm transition-colors ${t===i.value?"bg-indigo-50 font-bold text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,children:e.jsx("span",{children:i.label})})},i.value))})]})},At=({selectedPlace:t,zoomLevel:a,onZoomChange:s})=>e.jsx("div",{className:"mx-auto max-w-7xl md:px-4 md:py-8","data-testid":"public-view",children:t&&e.jsxs("div",{className:"space-y-8","data-testid":"weather-details",children:[e.jsxs("div",{className:"rounded-b-2xl border bg-white py-4 shadow-sm md:rounded-2xl md:p-6","data-testid":"weather-charts-container",children:[e.jsx(Tt,{place:t,zoomLevel:a}),e.jsx("div",{className:"mt-8 flex justify-center","data-testid":"zoom-dropdown-container",children:e.jsx(Dt,{currentZoom:a,onSelect:s})})]}),e.jsx("section",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:e.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm md:p-6","data-testid":"external-links-container",children:[e.jsxs("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold",children:[e.jsx(mt,{className:"size-5 text-amber-500"})," External Links"]}),e.jsxs("ul",{className:"space-y-2",children:[t.linkWU.startsWith("gb/")&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx("a",{href:`https://weather.metoffice.gov.uk/maps-and-charts/rainfall-radar-forecast-map#?layer=rainfall-rate&bbox=[[${(t.coords[0]-1).toFixed(4)},${(t.coords[1]-3).toFixed(4)}],[${(t.coords[0]+1).toFixed(4)},${(t.coords[1]+3).toFixed(4)}]]`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"met-office-link",children:"MET Office"})}),e.jsx("li",{children:e.jsx("a",{href:"https://weather.metoffice.gov.uk/warnings-and-advice/uk-warnings",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"met-warnings-link",children:"MET Warnings"})})]}),e.jsx("li",{children:e.jsx("a",{href:`https://www.wunderground.com/forecast/${t.linkWU}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"wu-link",children:"Weather Underground Forecast"})}),e.jsx("li",{children:e.jsx("a",{href:`https://www.lightningmaps.org/?lang=en#m=oss;y=${t.coords[0]};x=${t.coords[1]};z=13`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"lightning-maps-link",children:"Lightning Maps"})})]})]})})]})}),Et=({currentMembership:t,tiers:a,onUpgrade:s,onBack:n})=>{const h=u=>{const i=a.map(w=>w.name),f=i.indexOf(t),S=i.indexOf(u);return S===f?"current":S<f&&S!==-1?"lower":"upgrade"};return e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8","data-testid":"upgrade-view",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:n,title:"Back to management",children:e.jsx(nt,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Upgrade Membership"}),e.jsx("p",{className:"text-slate-500",children:"Choose the plan that best fits your needs"})]})]}),e.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:a.map(u=>{const i=h(u.name);return e.jsxs("div",{className:`relative flex flex-col rounded-2xl border bg-white p-8 shadow-sm transition-all hover:shadow-md ${i==="current"?"ring-2 ring-indigo-500":""}`,children:[i==="current"&&e.jsx("span",{className:"absolute -top-3 left-1/2 -translate-x-1/2 rounded-full bg-indigo-500 px-3 py-1 text-xs font-bold tracking-wider text-white uppercase",children:"Current Plan"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold tracking-tight text-slate-900 uppercase",children:u.name}),e.jsxs("div",{className:"mt-4 flex items-baseline gap-1",children:[e.jsx("span",{className:"text-4xl font-extrabold text-slate-900",children:u.price}),e.jsx("span",{className:"text-slate-500",children:"/month"})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:u.description})]}),e.jsx("ul",{className:"mb-8 flex-1 space-y-4",children:u.features.map((f,S)=>e.jsxs("li",{className:"flex items-center justify-between gap-3 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{size:18,className:"mt-0.5 shrink-0 text-emerald-500"}),e.jsx("span",{children:f})]}),i==="upgrade"&&e.jsx("button",{onClick:()=>s(u.name),className:"rounded bg-indigo-50 px-2 py-1 text-[10px] font-bold text-indigo-600 uppercase transition-colors hover:bg-indigo-100","data-testid":`upgrade-feature-${u.name}-${S}`,children:"Upgrade"})]},S))}),e.jsx(E,{className:"w-full",variant:i==="upgrade"?"default":"outline",disabled:i!=="upgrade",onClick:()=>s(u.name),"data-testid":`upgrade-button-${u.name}`,children:i==="current"?"Current Plan":i==="lower"?"Included":`Upgrade to ${u.name}`})]},u.name)})})]})},Ut=()=>e.jsx("div",{className:"flex min-h-[60vh] items-center justify-center","data-testid":"weather-loading-spinner",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-indigo-500"})}),Pt=()=>{const t=wt(),a=React.useMemo(()=>t.tiers.filter(n=>n.apps?.includes("weather")),[t.tiers]),s=()=>t.loading?e.jsx(Ut,{}):t.showLogin?e.jsx(bt,{onLogin:t.login,onRegister:t.register,onAuthSuccess:t.onAuthSuccess,onCancel:t.navigateToPublic}):t.user&&t.showUpgrade?e.jsx(Et,{currentMembership:t.user.membership,tiers:a,onUpgrade:t.handleUpgrade,onBack:t.navigateToEdit}):t.user&&t.showEdit?e.jsx(_t,{places:t.places,groups:t.groups,userMembership:t.user.membership,userRole:t.user.role,userId:t.user.id,onAddGroup:t.handleAddGroup,onUpdateGroup:t.handleUpdateGroup,onDeleteGroup:t.handleDeleteGroup,onReorderGroups:t.handleReorderGroups,onAddPlace:t.handleAddPlace,onUpdatePlace:t.handleUpdatePlace,onDeletePlace:t.handleDeletePlace,onReorderPlaces:t.handleReorderPlaces,onSearchPlace:t.handleSearchPlace,onExportPlaces:t.handleExportPlaces,onImportPlaces:t.handleImportPlaces,tiers:t.tiers}):e.jsx(At,{selectedPlace:t.selectedPlace,zoomLevel:t.zoomLevel,onZoomChange:t.setZoomLevel});return e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-12 font-sans text-slate-900","data-testid":"weather-page",children:[e.jsx(yt,{isAdmin:!!t.user,userEmail:t.user?.email,userFirstName:t.user?.first_name,userRole:t.user?.role,userMembership:t.user?.membership,onLoginClick:t.navigateToLogin,onLogoutClick:()=>t.logout(),onLogoClick:t.user?t.navigateToEdit:t.navigateToPublic,onUpgradeClick:t.navigateToUpgrade,showLoginButton:!t.user&&!t.showLogin,showUpgradeButton:t.showEdit&&a.findIndex(n=>n.name===t.user?.membership)<a.length-1,places:t.places,selectedPlace:t.selectedPlace,onPlaceChange:t.handlePlaceChange,tiers:a}),e.jsx("main",{"data-testid":"weather-main-content",children:s()})]})};ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(He,{children:e.jsx(Pt,{})})}));
