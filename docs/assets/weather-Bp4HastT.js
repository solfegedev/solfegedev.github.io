import"./index-pErSQAtW.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{u as He,T as Be}from"./Toast-COaeoAQl.js";import{A as $}from"./api-CH_Pe6Vg.js";import{B as E}from"./button-D6DGr86I.js";import{M as ue}from"./map-pin-BZQ0wcyB.js";import{C as we,M as Ve}from"./map-afHLg9l6.js";import{C as qe}from"./chevron-left-CGHllpLw.js";import{c as ee}from"./createLucideIcon-DtX1aPOG.js";import{L as Ze,I as se,a as oe}from"./label-j-A5YPyd.js";import{L as Ye}from"./log-out-B0TqtotO.js";import{A as Je,P as be}from"./Auth-uEj7rJlD.js";import{y as Ke}from"./serialize-CShLh4Jy.js";import{P as je}from"./pen-vQk8amFZ.js";import{T as De}from"./trash-2-DQbJ9aIh.js";import{G as Ae}from"./grip-vertical-BjGCJcsX.js";import{U as Xe,D as Qe}from"./upload--Rbr-3Yq.js";import{S as et}from"./search-Cfl0sis-.js";import{X as tt}from"./x-BS-d4QNZ.js";import{S as at}from"./save-rN7CZjMN.js";import{L as st}from"./index-BehiXGmn.js";import{C as nt,A as rt}from"./clock-BQfnJDuN.js";import{C as ot}from"./check-CWX8rMms.js";import"./circle-check-F4iM422t.js";import"./clsx-B-dksMZM.js";import"./eye-Jn_UhOO1.js";const it=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Ce=ee("cloud-rain",it);const lt=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],dt=ee("cloud-sun",lt);const ct=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ut=ee("layers",ct);const mt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ht=ee("sun",mt);const pt=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],xt=ee("sunrise",pt);const ft=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],Ie=ee("thermometer",ft);const gt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],wt=ee("zoom-in",gt),ge="e1f10a1e78da46f5b10a1e78da96f525";function ce(t,a){return t.map(s=>s!==null&&s<=a?0:s)}const G=()=>{const t=localStorage.getItem("weather_token")||sessionStorage.getItem("weather_token"),a={"Content-Type":"application/json"};return t&&(a.Authorization=`Bearer ${t}`),a},A={async getWeatherData(){const t=await fetch(`${$}/weather/data`,{headers:G(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch weather data");return t.json()},async register(t,a,s,n,m=!1){const d=await fetch(`${$}/weather/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:a,first_name:s,last_name:n,remember:m})});if(!d.ok)throw new Error("Registration failed");return d.json()},async login(t,a,s=!1){const n=await fetch(`${$}/weather/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:a,remember:s})});if(!n.ok)throw new Error("Login failed");return n.json()},async getMe(){const t=await fetch(`${$}/weather/me`,{headers:G(),credentials:"include"});if(!t.ok)throw new Error("Failed to get user");return t.json()},async getTiers(){const t=await fetch(`${$}/weather/tiers`,{headers:G(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch tiers");return t.json()},async upgrade(t){const a=await fetch(`${$}/weather/upgrade?level=${encodeURIComponent(t)}`,{method:"POST",headers:G(),credentials:"include"});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.detail||"Upgrade failed")}return a.json()},async addGroup(t){const a=await fetch(`${$}/weather/groups`,{method:"POST",headers:G(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to add group");return a.json()},async updateGroup(t,a){const s=await fetch(`${$}/weather/groups/${t}`,{method:"PUT",headers:G(),body:JSON.stringify(a)});if(!s.ok)throw new Error("Failed to update group");return s.json()},async deleteGroup(t){const a=await fetch(`${$}/weather/groups/${t}`,{method:"DELETE",headers:G(),credentials:"include"});if(!a.ok)throw new Error("Failed to delete group");return a.json()},async reorderGroups(t){const a=await fetch(`${$}/weather/groups/reorder`,{method:"POST",headers:G(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to reorder groups");return a.json()},async addPlace(t){const a=await fetch(`${$}/weather/places`,{method:"POST",headers:G(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to add place");return a.json()},async updatePlace(t,a){const s=await fetch(`${$}/weather/places/${t}`,{method:"PUT",headers:G(),body:JSON.stringify(a)});if(!s.ok)throw new Error("Failed to update place");return s.json()},async deletePlace(t){const a=await fetch(`${$}/weather/places/${t}`,{method:"DELETE",headers:G(),credentials:"include"});if(!a.ok)throw new Error("Failed to delete place");return a.json()},async reorderPlaces(t){const a=await fetch(`${$}/weather/places/reorder`,{method:"POST",headers:G(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to reorder places");return a.json()},async exportPlaces(){const t=await fetch(`${$}/weather/export`,{headers:G(),credentials:"include"});if(!t.ok)throw new Error("Failed to export places");return t.json()},async importPlaces(t){const a=await fetch(`${$}/weather/import`,{method:"POST",headers:G(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to import places");return a.json()},async searchPlace(t){const a=await fetch(`${$}/weather/search?link_wu=${encodeURIComponent(t)}`,{headers:G(),credentials:"include"});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.detail||"Failed to search place")}return a.json()},async fetchWUForecast(t){const a=`https://api.weather.com/v3/wx/forecast/hourly/15day?apiKey=${ge}&geocode=${t.coords[0]}%2C${t.coords[1]}&units=m&language=en-US&format=json`,n=await(await fetch(a,{referrerPolicy:"no-referrer"})).json();return{tzOffset:n.validTimeLocal[0]?.slice(19),x:n.validTimeLocal.map(m=>new Date(m.slice(0,19))),y_precipitation:n.qpf,y_humidity:n.relativeHumidity,y_snow:ce(n.qpfSnow,0),y_temperature:n.temperature,y_windGust:n.windGust,y_precipChance:n.precipChance,y_uvIndex:ce(n.uvIndex,0),y_cloudCover:ce(n.cloudCover,0)}},async fetchWUHistory(t){const a=`https://api.weather.com/v3/wx/conditions/historical/hourly/1day?apiKey=${ge}&geocode=${t.coords[0]}%2C${t.coords[1]}&units=m&language=en-US&format=json`,n=await(await fetch(a,{referrerPolicy:"no-referrer"})).json();return{tzOffset:n.validTimeLocal[0]?.slice(19),x:n.validTimeLocal.map(m=>new Date(m.slice(0,19))),y_precipitation:[],y_humidity:n.relativeHumidity,y_snow:[],y_temperature:n.temperature,y_windGust:n.windGust,y_precipChance:[],y_uvIndex:ce(n.uvIndex,0),y_cloudCover:[],sunriseTimeLocal:n.sunriseTimeLocal[0],sunsetTimeLocal:n.sunsetTimeLocal[0]}},async fetchWUPollen(t){const a=`https://api.weather.com/v2/turbo/vt1pollenforecast?apiKey=${ge}&geocode=${t.coords[0]}%2C${t.coords[1]}&language=en&format=json`,n=await(await fetch(a)).json();return{x:n.vt1pollenforecast?.reportDate.map(m=>new Date(m.slice(0,19)))||[],y_tree:n.vt1pollenforecast?.tree||[],y_weed:n.vt1pollenforecast?.weed||[],y_grass:n.vt1pollenforecast?.grass||[]}}},yt=()=>{const[t,a]=React.useState([]),[s,n]=React.useState([]),[m,d]=React.useState([]),[i,f]=React.useState(null),v=React.useMemo(()=>!i||i.role==="admin"?t:t.filter(r=>r.user_id===i.id),[t,i]),g=React.useMemo(()=>!i||i.role==="admin"?s:s.filter(r=>r.user_id===i.id),[s,i]),[y,_]=React.useState(null),[c,I]=React.useState(()=>{const r=localStorage.getItem("weather_zoom");return r==="STANDARD"?"z1x":r==="DETAILED"?"z2x":r==="MACRO"?"z3x":r==="COMPACT"?"z2x":r||"z2x"}),[b,T]=React.useState(!0),[z,x]=React.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("view")==="login"),[h,o]=React.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("view")==="edit"),[L,W]=React.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("view")==="upgrade"),[K,l]=React.useState("idle"),R=React.useCallback(async()=>{l("loading");try{const[r,u]=await Promise.all([A.getWeatherData(),A.getTiers()]);a(r.places),n(r.groups),d(u);const F=new URLSearchParams(window.location.search).get("location"),Z=localStorage.getItem("weather_location"),V=r.places.find(re=>re.name===F)||r.places.find(re=>re.name===Z)||r.places[0];_(V),l("success")}catch(r){console.error("Failed to load weather data",r),l("error")}finally{T(!1)}},[]);React.useEffect(()=>{R(),(localStorage.getItem("weather_token")||sessionStorage.getItem("weather_token"))&&A.getMe().then(f).catch(()=>{localStorage.removeItem("weather_token"),sessionStorage.removeItem("weather_token"),f(null)})},[R]),React.useEffect(()=>{i&&y&&i.role!=="admin"&&y.user_id!==i.id&&(v.length>0?_(v[0]):_(null))},[i,v,y]),React.useEffect(()=>{const r=()=>{const u=new URLSearchParams(window.location.search);x(u.get("view")==="login"),o(u.get("view")==="edit"),W(u.get("view")==="upgrade");const U=u.get("location");U&&a(F=>{const Z=F.find(V=>V.name===U);return Z&&_(Z),F})};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]);const P=()=>{const r=new URLSearchParams(window.location.search);r.get("view")!=="login"&&(r.set("view","login"),window.history.pushState({},"",`?${r.toString()}`),x(!0),o(!1))},H=()=>{const r=new URLSearchParams(window.location.search);r.get("view")!=="edit"&&(r.set("view","edit"),window.history.pushState({},"",`?${r.toString()}`),o(!0),x(!1),W(!1))},X=()=>{const r=new URLSearchParams(window.location.search);r.get("view")!=="upgrade"&&(r.set("view","upgrade"),window.history.pushState({},"",`?${r.toString()}`),W(!0),o(!1),x(!1))},Q=()=>{const r=new URLSearchParams(window.location.search);if(r.has("view")){r.delete("view");const u=r.toString();window.history.pushState({},"",u?`?${u}`:window.location.pathname),x(!1),o(!1),W(!1)}else x(!1),o(!1),W(!1)};React.useEffect(()=>{i&&new URLSearchParams(window.location.search).get("view")!=="edit"&&H()},[i]);const ie=r=>{_(r),localStorage.setItem("weather_location",r.name);const u=new URLSearchParams(window.location.search);u.get("location")!==r.name&&(u.set("location",r.name),window.history.pushState({},"",`?${u.toString()}`))},te=React.useCallback(async(r,u,U)=>{U?localStorage.setItem("weather_token",r):sessionStorage.setItem("weather_token",r),f(u),await R()},[R]);return{places:v,groups:g,tiers:m,selectedPlace:y,loading:b,user:i,showLogin:z,showEdit:h,showUpgrade:L,requestState:K,zoomLevel:c,setZoomLevel:r=>{I(r),localStorage.setItem("weather_zoom",r)},handlePlaceChange:ie,onAuthSuccess:te,login:async(r,u,U=!0)=>{try{const F=await A.login(r,u,U);return U?localStorage.setItem("weather_token",F.access_token):sessionStorage.setItem("weather_token",F.access_token),f(F.user),await R(),!0}catch(F){return console.error("Login failed",F),!1}},register:async(r,u,U,F,Z=!0)=>{try{const V=await A.register(r,u,U,F,Z);return Z?localStorage.setItem("weather_token",V.access_token):sessionStorage.setItem("weather_token",V.access_token),f(V.user),await R(),!0}catch(V){return console.error("Registration failed",V),!1}},logout:async()=>{localStorage.removeItem("weather_token"),sessionStorage.removeItem("weather_token"),f(null),await R(),Q()},navigateToLogin:P,navigateToEdit:H,navigateToUpgrade:X,navigateToPublic:Q,handleAddGroup:async r=>{const u=await A.addGroup(r);a(u.places),n(u.groups)},handleUpdateGroup:async(r,u)=>{const U=await A.updateGroup(r,u);a(U.places),n(U.groups)},handleDeleteGroup:async r=>{if(!window.confirm("Are you sure you want to delete this group? Places in this group will become standalone."))return;const u=await A.deleteGroup(r);a(u.places),n(u.groups)},handleReorderGroups:async r=>{const u=await A.reorderGroups(r);a(u.places),n(u.groups)},handleAddPlace:async r=>{const u=await A.addPlace(r);a(u.places),n(u.groups)},handleUpdatePlace:async(r,u)=>{const U=await A.updatePlace(r,u);a(U.places),n(U.groups)},handleDeletePlace:async r=>{if(!window.confirm("Are you sure you want to delete this location?"))return;const u=await A.deletePlace(r);a(u.places),n(u.groups)},handleReorderPlaces:async r=>{const u=await A.reorderPlaces(r);a(u.places),n(u.groups)},handleSearchPlace:async r=>await A.searchPlace(r),handleExportPlaces:async()=>await A.exportPlaces(),handleImportPlaces:async r=>{const u=await A.importPlaces(r);a(u.places)},handleUpgrade:async r=>{try{const u=await A.upgrade(r);f(u),H()}catch(u){console.error("Upgrade failed",u),alert(u instanceof Error?u.message:"Upgrade failed")}}}},Le=({places:t,selectedPlace:a,onSelect:s})=>{const[n,m]=React.useState(!1),[d,i]=React.useState(null),f=React.useRef(null),v=React.useRef(null),{groups:g,standalone:y}=React.useMemo(()=>{const c={},I=[];return t.forEach(b=>{b.group?(c[b.group]||(c[b.group]=[]),c[b.group].push(b)):I.push(b)}),{groups:c,standalone:I}},[t]);React.useEffect(()=>{const c=I=>{f.current&&!f.current.contains(I.target)&&m(!1)};return n&&document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]),React.useEffect(()=>{n?a?.group&&i(a.group):i(null)},[n,a]);const _=c=>{s(c),m(!1)};return e.jsxs("div",{className:"relative inline-block w-full md:w-64",ref:f,"data-testid":"place-dropdown",children:[e.jsxs("button",{type:"button",ref:v,onClick:()=>m(!n),className:"flex w-full items-center justify-between rounded-xl border border-slate-200 bg-white px-4 py-2 text-left font-semibold text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none","aria-haspopup":"listbox","aria-expanded":n,"data-testid":"place-dropdown-trigger",children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx(ue,{className:"size-4 shrink-0 text-indigo-500"}),e.jsx("span",{className:"truncate",children:a?.name||"Select location..."})]}),e.jsx(we,{className:`size-4 text-slate-400 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&e.jsx("div",{className:"animate-in fade-in zoom-in absolute z-20 mt-2 max-h-80 w-full overflow-hidden rounded-xl border border-slate-200 bg-white p-1 shadow-xl duration-200",role:"listbox",children:d?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{type:"button",onClick:()=>i(null),className:"flex w-full items-center gap-2 rounded-lg border-b border-slate-100 px-3 py-2 text-left text-xs font-bold text-indigo-600 transition-colors hover:bg-slate-50","data-testid":"group-back-button",children:[e.jsx(qe,{className:"size-3.5"}),e.jsx("span",{children:"Back to all"}),e.jsx("span",{className:"ml-auto font-normal text-slate-400",children:d})]}),e.jsx("ul",{className:"max-h-60 overflow-auto p-1",children:g[d].map(c=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>_(c),className:`flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm transition-colors ${a?.name===c.name?"bg-indigo-50 font-bold text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,role:"option","aria-selected":a?.name===c.name,"data-testid":`place-item-${c.name}`,children:[e.jsx(ue,{className:`size-3.5 ${a?.name===c.name?"text-indigo-500":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:c.name}),c.country&&e.jsx("span",{className:"ml-auto text-[10px] font-medium tracking-wider text-slate-400 uppercase",children:c.country})]})},c.name))})]}):e.jsxs("ul",{className:"max-h-60 overflow-auto",children:[Object.keys(g).map(c=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>i(c),className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm text-slate-600 transition-colors hover:bg-slate-50","data-testid":`group-item-${c}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"size-3.5 text-indigo-400"}),e.jsx("span",{className:"font-bold",children:c})]}),e.jsx(we,{className:"size-3.5 -rotate-90 text-slate-300"})]})},c)),y.map(c=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>_(c),className:`flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm transition-colors ${a?.name===c.name?"bg-indigo-50 font-bold text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,role:"option","aria-selected":a?.name===c.name,"data-testid":`place-item-${c.name}`,children:[e.jsx(ue,{className:`size-3.5 ${a?.name===c.name?"text-indigo-500":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:c.name}),c.country&&e.jsx("span",{className:"ml-auto text-[10px] font-medium tracking-wider text-slate-400 uppercase",children:c.country})]})},c.name))]})})]})},bt=({isAdmin:t,userEmail:a,userFirstName:s,userMembership:n,onLoginClick:m,onLogoutClick:d,onLogoClick:i,onUpgradeClick:f,showLoginButton:v,showUpgradeButton:g,places:y=[],selectedPlace:_=null,onPlaceChange:c,tiers:I=[]})=>{const b=I.findIndex(x=>x.name===n),z=(b!==-1&&b<I.length-1?I[b+1]:null)?.name;return e.jsxs("header",{className:"sticky top-0 z-10 w-full border-b bg-white shadow-sm","data-testid":"weather-navbar",children:[e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between gap-4 px-4 py-2 md:py-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:i,className:"flex items-center gap-2 transition-opacity hover:opacity-80","data-testid":"navbar-logo",children:[e.jsx("img",{src:"/favicon_weather.png",alt:"",className:"size-8","aria-hidden":"true"}),e.jsx("h1",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-2xl font-bold text-transparent",children:"Weather"})]})}),c&&e.jsx("div",{className:"hidden max-w-md flex-1 items-center gap-3 md:flex","data-testid":"place-dropdown-desktop",children:e.jsx(Le,{places:y,selectedPlace:_,onSelect:c})}),e.jsxs("div",{className:"flex items-center gap-4",children:[v&&e.jsxs(E,{variant:"ghost",className:"gap-2 text-slate-600 hover:bg-slate-100",onClick:m,"data-testid":"login-button",children:[e.jsx(Ze,{size:18}),e.jsx("span",{className:"hidden md:inline",children:"Login"})]}),a&&e.jsxs("div",{className:"flex items-center gap-4",children:[g&&z&&e.jsxs(E,{variant:"outline",onClick:f,className:"rounded-2xl border-indigo-200 bg-indigo-50 text-indigo-700 hover:bg-indigo-100","data-testid":"upgrade-button",children:[e.jsxs("span",{className:"hidden md:inline",children:["Upgrade to ",z]}),e.jsx("span",{className:"md:hidden",children:"Upgrade"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 md:inline","data-testid":"user-display-name",children:s||a}),n&&e.jsx("span",{className:"text-[10px] font-bold tracking-wider text-indigo-500 uppercase","data-testid":"user-membership",children:n})]}),e.jsx(E,{variant:"ghost",size:"icon",onClick:d,className:"text-slate-400 hover:bg-slate-100 hover:text-red-500",title:"Logout","data-testid":"logout-button",children:e.jsx(Ye,{size:20})})]})]})]}),c&&e.jsx("div",{className:"border-t px-4 py-2 md:hidden","data-testid":"place-dropdown-mobile",children:e.jsx(Le,{places:y,selectedPlace:_,onSelect:c})})]})},jt=({onAuthSuccess:t,onCancel:a})=>e.jsxs("div",{className:"flex flex-col items-center","data-testid":"login-view",children:[e.jsx(Je,{appName:"Weather",loginEndpoint:"/weather/login",registerEndpoint:"/weather/register",onSuccess:(s,n)=>t(s.access_token,s.user,n),className:"min-h-0 bg-transparent"}),e.jsx(E,{variant:"ghost",onClick:a,className:"mt-4 text-slate-500","data-testid":"login-cancel-button",children:"Cancel"})]}),vt=({groups:t,userId:a,userGroups:s,orderedGroups:n,limits:m,isAtGroupLimit:d,draggedGroupId:i,canDragGroupId:f,onAddGroup:v,onUpdateGroup:g,onDeleteGroup:y,onDragStart:_,onDragOver:c,onDragEnd:I,setCanDragGroupId:b})=>{const[T,z]=React.useState(""),[x,h]=React.useState(null),[o,L]=React.useState(""),W=async l=>{l.preventDefault(),T.trim()&&(await v(T),z(""))},K=async l=>{l.preventDefault(),!(!x||!o.trim())&&(await g(x,o),h(null),L(""))};return e.jsx("div",{className:"mt-8","data-testid":"groups-management-section",children:e.jsx("div",{className:"overflow-hidden rounded-2xl border bg-white shadow-sm","data-testid":"groups-table-container",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b bg-slate-50 md:table-header-group",children:e.jsx("tr",{children:e.jsx("th",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Groups"}),e.jsxs("span",{className:"text-xs font-normal text-slate-500",children:[s.length," / ",m.groups]})]})})})}),e.jsxs("tbody",{className:"divide-y",children:[n.map(l=>e.jsxs("tr",{draggable:f===l.id,onDragStart:()=>l.id&&_(l.id),onDragOver:R=>l.id&&c(R,l.id),onDragEnd:I,className:`flex flex-col border-b transition-colors last:border-b-0 hover:bg-slate-50 md:table-row md:border-b-0 ${i===l.id?"bg-indigo-50/50 opacity-40":""} ${f===l.id?"select-none":""}`,"data-testid":`group-row-${l.id}`,children:[e.jsx("td",{className:"block px-6 pt-2 md:table-cell",children:x===l.id?e.jsxs("form",{onSubmit:K,className:"flex flex-1 gap-2 py-2",children:[e.jsx(se,{value:o,onChange:R=>L(R.target.value),autoFocus:!0,className:"h-9 rounded-xl"}),e.jsx(E,{type:"submit",className:"h-9",children:"Save"}),e.jsx(E,{variant:"outline",onClick:()=>h(null),className:"h-9",children:"Cancel"})]}):e.jsx("span",{className:"block font-bold",children:l.name})}),e.jsx("td",{className:"ml-auto block px-6 text-left md:table-cell md:text-right",children:e.jsxs("div",{className:"flex justify-start gap-1 md:justify-end",children:[e.jsx(E,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-indigo-600","data-testid":`edit-group-${l.id}`,onClick:()=>{h(l.id),L(l.name)},children:e.jsx(je,{size:14})}),e.jsx(E,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-red-600","data-testid":`delete-group-${l.id}`,onClick:()=>l.id&&y(l.id),children:e.jsx(De,{size:14})}),e.jsx("div",{className:"cursor-grab touch-none p-2 text-slate-300 transition-colors hover:text-indigo-600 active:cursor-grabbing",title:"Hold to drag","data-testid":`group-drag-handle-${l.id}`,onMouseDown:()=>b(l.id||null),onMouseUp:()=>b(null),onTouchStart:()=>b(l.id||null),onTouchEnd:()=>b(null),onTouchCancel:()=>b(null),onClick:R=>R.stopPropagation(),children:e.jsx(Ae,{size:18})})]})})]},l.id)),!d&&e.jsx("tr",{className:"flex flex-col bg-slate-50/30 md:table-row",children:e.jsx("td",{colSpan:2,className:"block px-6 py-4 md:table-cell",children:e.jsxs("form",{onSubmit:W,className:"flex gap-2",children:[e.jsx(se,{placeholder:"New Group Name...",value:T,onChange:l=>z(l.target.value),className:"rounded-xl","data-testid":"new-group-name-input"}),e.jsxs(E,{type:"submit",disabled:!T.trim(),className:"gap-2 rounded-xl","data-testid":"submit-group-button",children:[e.jsx(be,{size:18})," Add"]})]})})})]})]})})})},Nt=({isImporting:t,onImportClick:a,onExportYAML:s})=>e.jsxs("div",{className:"mb-8 flex flex-col items-start justify-between gap-4 px-4 sm:flex-row sm:items-center","data-testid":"management-header",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold","data-testid":"management-title",children:"Manage"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(E,{variant:"outline",onClick:a,className:"gap-2 rounded-xl",disabled:t,"data-testid":"import-yaml-button",children:[e.jsx(Xe,{size:18})," Import YAML"]}),e.jsxs(E,{variant:"outline",onClick:s,className:"gap-2 rounded-xl","data-testid":"export-yaml-button",children:[e.jsx(Qe,{size:18})," Export YAML"]})]})]}),St=({groups:t,userId:a,userRole:s,className:n="",...m})=>e.jsxs("select",{className:`flex h-10 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 ${n}`,"data-testid":"group-select",...m,children:[e.jsx("option",{value:"",children:"---"}),t.filter(d=>d.user_id===a||s==="admin").map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))]}),kt=({editingPlace:t,groups:a,userId:s,userRole:n,isSearching:m,isAutoFetching:d,onSearchPlace:i,onSubmit:f,onCancel:v})=>{const[g,y]=React.useState({name:"",coords:[0,0],linkWU:"",country:"",group_id:null}),[_,c]=React.useState(""),[I,b]=React.useState(!1);React.useEffect(()=>{t?(y(t),c(`${t.coords[0]}, ${t.coords[1]}`)):(y({name:"",coords:[0,0],linkWU:"",country:"",group_id:null}),c(""))},[t]);const T=async()=>{if(g.linkWU){b(!0);try{const h=await i(g.linkWU);y(o=>({...o,name:h.city||o.name,coords:[h.lat,h.lon],country:h.countryCode||o.country})),c(`${h.lat}, ${h.lon}`)}finally{b(!1)}}},z=h=>{h.preventDefault(),f(g,_)},x=I||m||d;return e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 mb-8 rounded-2xl border bg-white p-6 shadow-lg duration-300","data-testid":"place-form-container",children:[e.jsxs("h3",{className:"mb-6 flex items-center gap-2 text-lg font-bold",children:[t?e.jsx(je,{size:20,className:"text-indigo-600"}):e.jsx(be,{size:20,className:"text-indigo-600"}),t?"Edit Location":"Add New Location"]}),e.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(oe,{htmlFor:"name",children:["City Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(se,{id:"name",value:g.name,onChange:h=>y({...g,name:h.target.value}),required:!0,className:"rounded-xl","data-testid":"place-name-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(oe,{htmlFor:"country",children:"Country Code"}),e.jsx(se,{id:"country",value:g.country||"",onChange:h=>y({...g,country:h.target.value}),placeholder:"GB, FRA, ZAF...",className:"rounded-xl","data-testid":"place-country-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(oe,{htmlFor:"coords",children:"Coordinates (lat, lon)"}),e.jsx(se,{id:"coords",value:_,onChange:h=>c(h.target.value),placeholder:"51.507, -0.127 (Auto-fetch if empty)",className:"rounded-xl","data-testid":"place-coords-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(oe,{htmlFor:"linkWU",children:["WU Path (or URL) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{id:"linkWU",value:g.linkWU,onChange:h=>{let o=h.target.value;const L="https://www.wunderground.com/weather/";o.startsWith(L)&&(o=o.substring(L.length)),y({...g,linkWU:o})},placeholder:"gb/london/ILONDO440",required:!0,className:"rounded-xl","data-testid":"place-link-wu-input"}),e.jsx(E,{type:"button",variant:"outline",size:"icon",onClick:T,disabled:!g.linkWU||x,className:"shrink-0 rounded-xl",title:"Fetch details from Wunderground","data-testid":"fetch-wu-details-button",children:e.jsx(et,{size:18,className:I?"animate-pulse":""})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(oe,{htmlFor:"group",children:"Group"}),e.jsx(St,{id:"group",value:g.group_id||"",onChange:h=>y({...g,group_id:h.target.value?parseInt(h.target.value):null}),groups:a,userId:s,userRole:n,"data-testid":"place-group-select"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 md:col-span-2",children:[e.jsxs(E,{type:"button",variant:"outline",onClick:v,disabled:x,className:"rounded-xl","data-testid":"cancel-form-button",children:[e.jsx(tt,{size:18,className:"mr-2"})," Cancel"]}),e.jsx(E,{type:"submit",className:"min-w-[120px] rounded-xl",disabled:x,"data-testid":"save-place-button",children:d?e.jsx(e.Fragment,{children:"Searching..."}):e.jsxs(e.Fragment,{children:[e.jsx(at,{size:18,className:"mr-2"})," ",t?"Update":"Save"]})})]})]})]})},_t=({places:t,orderedPlaces:a,groups:s,userPlaces:n,limits:m,isAtLimit:d,draggedId:i,canDragId:f,onAddClick:v,onEdit:g,onDelete:y,onDragStart:_,onDragOver:c,onDragEnd:I,onDropOnGroup:b,setCanDragId:T})=>{const z=React.useMemo(()=>{const x={};a.forEach(o=>{const L=o.group||"---";x[L]||(x[L]=[]),x[L].push(o)});const h=[];return s.forEach(o=>{h.push([o.name,x[o.name]||[]]),delete x[o.name]}),(x["---"]||h.length===0)&&(h.push(["---",x["---"]||[]]),delete x["---"]),Object.entries(x).forEach(o=>h.push(o)),h.filter(([o,L])=>L.length>0?!0:o!=="---")},[s,a]);return e.jsx("div",{className:"rounded-2xl border bg-white shadow-sm","data-testid":"places-table-container",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b bg-slate-50 md:table-header-group",children:e.jsx("tr",{children:e.jsx("th",{className:"px-6 text-xs tracking-wider text-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-slate-500 uppercase",children:"Locations"}),e.jsxs("span",{className:"p-4 text-xs font-normal text-slate-500","data-testid":"location-counter",children:[n.length," / ",m.locations," locations used"]}),e.jsxs(E,{onClick:v,disabled:d,className:"flex h-8 gap-2 rounded-xl","data-testid":"add-place-button",children:[e.jsx(be,{size:16})," ",d?"Limit Reached":"Add"]})]})})})}),e.jsx("tbody",{className:"divide-y",children:z.map(([x,h])=>e.jsxs(React.Fragment,{children:[e.jsx("tr",{className:"flex flex-col bg-slate-50/50 transition-colors md:table-row",onDragOver:o=>{o.preventDefault(),o.currentTarget.classList.add("bg-indigo-100/50")},onDragLeave:o=>{o.currentTarget.classList.remove("bg-indigo-100/50")},onDrop:o=>{o.currentTarget.classList.remove("bg-indigo-100/50"),b(o,x)},"data-testid":`group-header-${x}`,children:e.jsx("td",{colSpan:2,className:"block px-6 py-2 text-[0.75rem] font-bold tracking-widest text-indigo-500 uppercase md:table-cell",children:x})}),h.map(o=>e.jsxs("tr",{draggable:f===o.id,onDragStart:()=>o.id&&_(o.id),onDragOver:L=>o.id&&c(L,o.id),onDragEnd:I,onDrop:L=>o.id&&b(L,x),className:`flex flex-col border-b transition-colors last:border-b-0 hover:bg-slate-50 md:table-row md:border-b-0 ${i===o.id?"bg-indigo-50/50 opacity-40":""} ${f===o.id?"select-none":""}`,"data-testid":`place-row-${o.id}`,children:[e.jsx("td",{className:"block px-6 pt-2 md:table-cell",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-50 p-2",children:e.jsx(ue,{size:16,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:o.name}),e.jsx("div",{className:"flex gap-2 text-xs text-slate-400",children:e.jsx("span",{children:o.country||"N/A"})})]})]})}),e.jsx("td",{className:"ml-auto block px-6 text-left md:table-cell md:text-right",children:e.jsxs("div",{className:"flex justify-start gap-2 md:justify-end",children:[e.jsx("a",{href:`https://www.wunderground.com/weather/${o.linkWU}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex rounded-lg p-2 text-slate-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"View on Weather Underground","data-testid":`view-wu-link-${o.id}`,children:e.jsx(dt,{size:16})}),e.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${o.coords[0]},${o.coords[1]}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex rounded-lg p-2 text-slate-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"View on Google Maps","data-testid":`view-map-link-${o.id}`,children:e.jsx(Ve,{size:16})}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>g(o),className:"text-slate-400 hover:bg-indigo-50 hover:text-indigo-600",title:"Edit location","data-testid":`edit-place-${o.id}`,children:e.jsx(je,{size:16})}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>o.id&&y(o.id),className:"text-slate-400 hover:bg-red-50 hover:text-red-600",title:"Delete location","data-testid":`delete-place-${o.id}`,children:e.jsx(De,{size:16})}),e.jsx("div",{className:"cursor-grab touch-none p-2 text-slate-300 transition-colors hover:text-indigo-600 active:cursor-grabbing",title:"Hold to drag","data-testid":`drag-handle-${o.id}`,onMouseDown:()=>T(o.id||null),onMouseUp:()=>T(null),onTouchStart:()=>T(o.id||null),onTouchEnd:()=>T(null),onTouchCancel:()=>T(null),onClick:L=>L.stopPropagation(),children:e.jsx(Ae,{size:18})})]})})]},o.id))]},x))})]})})},Rt=({places:t,groups:a,userMembership:s,userRole:n,userId:m,onAddGroup:d,onUpdateGroup:i,onDeleteGroup:f,onReorderGroups:v,onAddPlace:g,onUpdatePlace:y,onDeletePlace:_,onReorderPlaces:c,onSearchPlace:I,onExportPlaces:b,onImportPlaces:T,tiers:z})=>{const{successToast:x,errorToast:h,warningToast:o}=He(),[L,W]=React.useState(!1),[K,l]=React.useState(!1),[R,P]=React.useState(!1),[H,X]=React.useState(null),[Q,ie]=React.useState(!1),te=React.useRef(null),[B,me]=React.useState(null),[ve,he]=React.useState(null),[Y,pe]=React.useState(null),[Ne,xe]=React.useState(null),le=React.useMemo(()=>t.filter(p=>p.user_id===m),[t,m]),[q,fe]=React.useState(t);React.useEffect(()=>{B===null&&fe(t)},[t,B]);const ne=React.useMemo(()=>z.find(N=>N.name===s)?.limits||{locations:10,groups:1},[z,s]),Se=le.length>=ne.locations,de=React.useMemo(()=>a.filter(p=>p.user_id===m),[a,m]),ke=de.length>=ne.groups,[J,r]=React.useState(a);React.useEffect(()=>{Y===null&&r(a)},[a,Y]);const u=()=>{X(null),W(!1),l(!1),P(!1)},U=p=>{X(p),W(!1)},F=async p=>{try{await d({name:p}),x("Group added successfully")}catch(N){h(`Failed to add group: ${N}`)}},Z=async(p,N)=>{try{await i(p,{name:N}),x("Group updated successfully")}catch(w){h(`Failed to update group: ${w}`)}},V=async p=>{try{await f(p),x("Group deleted successfully")}catch(N){h(`Failed to delete group: ${N}`)}},re=async()=>{try{const p=await b(),N=Ke(p),w=new Blob([N],{type:"text/yaml"}),j=URL.createObjectURL(w),S=document.createElement("a");S.href=j,S.download=`weather-places-${new Date().toISOString().split("T")[0]}.yml`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(j)}catch(p){h(`Failed to export YAML: ${p}`)}},Ue=async p=>{const N=p.target.files?.[0];if(!N)return;ie(!0);const w=new FileReader;w.onload=async j=>{try{const S=j.target?.result,M=jsyaml.load(S);let D=M;if(Array.isArray(M))D={places:[{name:null,items:M}]};else if(!(M&&M.places&&Array.isArray(M.places)))throw new Error("Invalid YAML format");await T(D),x("Locations imported successfully.")}catch(S){h(`Failed to import YAML: ${S}`)}finally{ie(!1),te.current&&(te.current.value="")}},w.readAsText(N)},Pe=async(p,N)=>{let w=p.coords,j=p.name,S=p.country;const M=N.trim();if(M===""||M==="0, 0"||M==="0,0"){if(p.linkWU){P(!0);try{const O=await I(p.linkWU);w=[O.lat,O.lon],j=p.name||O.city||"",S=p.country||O.countryCode||""}catch(O){h(`Failed to fetch coordinates: ${O}`),P(!1);return}finally{P(!1)}}}else{const O=M.split(/[, ]+/);if(O.length>=2){const _e=parseFloat(O[0]),Re=parseFloat(O[1]);!isNaN(_e)&&!isNaN(Re)&&(w=[_e,Re])}}const D={...p,name:j,country:S,coords:w};if(le.some(O=>O.name.toLowerCase()===j.toLowerCase()&&O.id!==(H?.id||null))){o(`A location with the name "${j}" already exists in your list.`);return}try{H?.id?await y(H.id,D):await g(D),u()}catch(O){h(`Failed to save location: ${O}`)}},$e=p=>{me(p)},ze=(p,N)=>{if(p.preventDefault(),B===null||B===N)return;const w=q.findIndex(D=>D.id===B),j=q.findIndex(D=>D.id===N);if(w===-1||j===-1)return;const S=[...q],[M]=S.splice(w,1);S.splice(j,0,M),S.map(D=>D.id).join(",")!==q.map(D=>D.id).join(",")&&fe(S)},Me=()=>{if(B!==null){const p=t.map(w=>w.id).join(","),N=q.map(w=>w.id).join(",");if(p!==N){const w=q.map(j=>j.id).filter(j=>j!==void 0);c(w).catch(j=>console.error("Failed to reorder",j))}}me(null),he(null)},Oe=p=>{pe(p)},Ge=(p,N)=>{if(p.preventDefault(),Y===null||Y===N)return;const w=J.findIndex(D=>D.id===Y),j=J.findIndex(D=>D.id===N);if(w===-1||j===-1)return;const S=[...J],[M]=S.splice(w,1);S.splice(j,0,M),S.map(D=>D.id).join(",")!==J.map(D=>D.id).join(",")&&r(S)},Fe=()=>{if(Y!==null){const p=de.map(w=>w.id).join(","),N=J.map(w=>w.id).join(",");if(p!==N){const w=J.map(j=>j.id).filter(j=>j!==void 0);v(w).catch(j=>console.error("Failed to reorder groups",j))}}pe(null),xe(null)},We=async(p,N)=>{if(p.preventDefault(),B===null)return;const w=q.find(S=>S.id===B);if(!w)return;const j=N==="---"?null:a.find(S=>S.name===N)?.id||null;if(w.group_id!==j)try{await y(B,{...w,group_id:j}),x(`Moved ${w.name} to ${N==="---"?"Standalone":N}`)}catch(S){h(`Failed to move item: ${S}`)}};return e.jsxs("div",{className:"mx-auto max-w-4xl py-4 md:px-4","data-testid":"management-view",children:[e.jsx("input",{type:"file",accept:".yml,.yaml",className:"hidden",ref:te,onChange:Ue,disabled:Q}),e.jsx(Nt,{isImporting:Q,onImportClick:()=>te.current?.click(),onExportYAML:re}),(L||H)&&e.jsx(kt,{editingPlace:H,groups:a,userId:m,userRole:n,isSearching:K,isAutoFetching:R,onSearchPlace:I,onSubmit:Pe,onCancel:u}),e.jsx(_t,{places:t,orderedPlaces:q,groups:a,userPlaces:le,limits:ne,isAtLimit:Se,draggedId:B,canDragId:ve,onAddClick:()=>{u(),W(!0)},onEdit:U,onDelete:_,onDragStart:$e,onDragOver:ze,onDragEnd:Me,onDropOnGroup:We,setCanDragId:he}),e.jsx(vt,{groups:a,userId:m,userGroups:de,orderedGroups:J,limits:ne,isAtGroupLimit:ke,draggedGroupId:Y,canDragGroupId:Ne,onAddGroup:F,onUpdateGroup:Z,onDeleteGroup:V,onDragStart:Oe,onDragOver:Ge,onDragEnd:Fe,setCanDragGroupId:xe})]})},C={LINE_WIDTH_DEFAULT:2,LINE_WIDTH_FILLED_AREA:2,TENSION:.3,POINT_RADIUS:1,HIT_RADIUS:16},Ct={z1x:"2000px",z2x:"4000px",z3x:"6000px",z4x:"8000px"},k={Temperature:"#ef4444",Precipitation:"#3b82f6",PrecipChance:"#0ea5e9",WindGust:"#8b5cf6",UV:"#f59e0b",CloudCover:"#94a3b8",Humidity:"#10b981",Snow:"#d946ef"};function It(){Chart.Chart.register(Chart.CategoryScale,Chart.LinearScale,Chart.PointElement,Chart.LineElement,Chart.BarElement,Chart.Title,Chart.Tooltip,Chart.Legend,Chart.Filler)}function ye(t){const a=new Date;if(!t||t==="Local")return a;let s=0;if(t!=="Z"){const m=t.startsWith("-")?-1:1,d=parseInt(t.slice(1,3)),i=parseInt(t.slice(3,5))||0;s=m*(d*36e5+i*6e4)}const n=a.getTime()+a.getTimezoneOffset()*6e4;return new Date(n+s)}function Ee(t,a){const s=t.scales.x,n=t.data.labels;if(!s||!n)return null;const m=a.getTime();for(let d=0;d<n.length-1;d++){const i=new Date(n[d]).getTime(),f=new Date(n[d+1]).getTime();if(m>=i&&m<=f){const v=(m-i)/(f-i),g=s.getPixelForValue(n[d]),y=s.getPixelForValue(n[d+1]);return g+(y-g)*v}}return null}const Lt={id:"nowLine",afterDatasetsDraw:t=>{const{ctx:a,chartArea:{top:s,bottom:n}}=t,m=t.options.plugins?.nowLine?.tzOffset,d=ye(m),i=Ee(t,d);if(i!==null){a.save(),a.beginPath(),a.lineWidth=2,a.strokeStyle="#0d9488",a.moveTo(i,s),a.lineTo(i,n),a.stroke(),a.fillStyle="#0d9488",a.font="bold 13px sans-serif",a.textAlign="left";const f=d.getHours().toString().padStart(2,"0"),v=d.getMinutes().toString().padStart(2,"0"),g=`${f}:${v}`,y=a.measureText(g);a.fillStyle="rgba(13, 148, 136, 0.9)",a.fillRect(i,s+10,y.width+16,24),a.fillStyle="#ffffff",a.fillText(g,i+8,s+27),a.restore()}}},Tt=()=>({type:"category",grid:{color:t=>{const a=t.chart.data.labels[t.index];return new Date(a).getHours()===0?"#0f172a":"transparent"},lineWidth:t=>{const a=t.chart.data.labels[t.index];return new Date(a).getHours()===0?2:0},drawTicks:!0},ticks:{maxRotation:0,autoSkip:!1,padding:10,color:"#334155",font:{weight:"bold",size:14},callback:function(t){const a=this.getLabelForValue(t),s=new Date(a);return isNaN(s.getTime())?"":s.getHours()===12?s.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}):""}}});It();const Dt=({place:t,zoomLevel:a})=>{const[s,n]=React.useState(null),[m,d]=React.useState(!0),i=React.useRef(null),f=React.useRef(null);if(React.useEffect(()=>{d(!0),Promise.all([A.fetchWUForecast(t),A.fetchWUHistory(t)]).then(([l,R])=>{n({forecast:l,history:R}),d(!1)})},[t]),React.useEffect(()=>{if(!m&&s&&i.current){const l=setTimeout(()=>{const R=f.current,P=i.current;if(R&&P){const H=ye(s.forecast.tzOffset),X=Ee(R,H);if(X!==null){const Q=X-P.offsetWidth/2;P.scrollTo({left:Math.max(0,Q),behavior:"smooth"})}}},500);return()=>clearTimeout(l)}},[m,s,a]),m||!s)return e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-400",children:"Loading forecast data..."})});const v=1440*60*1e3,g=[...s.history.x.slice().reverse(),...s.forecast.x].map(l=>l.toISOString()),y=s.history.x.length,_=s.history.sunriseTimeLocal?new Date(s.history.sunriseTimeLocal.slice(0,19)):null,c=s.history.sunsetTimeLocal?new Date(s.history.sunsetTimeLocal.slice(0,19)):null;let I=0,b=null;if(_&&c){const l=c.getTime()-_.getTime();I=l/v*100,b=new Date(_.getTime()+l/2)}const T=ye(s.forecast.tzOffset),z=[...s.history.x.slice().reverse(),...s.forecast.x],h=[...s.history.y_temperature.slice().reverse(),...s.forecast.y_temperature].filter((l,R)=>{if(l===null)return!1;const P=z[R];return P.getFullYear()===T.getFullYear()&&P.getMonth()===T.getMonth()&&P.getDate()===T.getDate()}),o=h.length>0?Math.min(...h):null,L=h.length>0?Math.max(...h):null,W={labels:g,datasets:[{label:"Temperature (°C)",data:[...s.history.y_temperature.slice().reverse(),...s.forecast.y_temperature],borderColor:k.Temperature,backgroundColor:k.Temperature+"20",yAxisID:"y_temp",tension:C.TENSION,pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,borderWidth:C.LINE_WIDTH_DEFAULT},{label:"Rain Probability (%)",data:[...Array(y).fill(null),...s.forecast.y_precipChance],borderColor:k.PrecipChance,backgroundColor:k.PrecipChance+"20",yAxisID:"y_perc",tension:C.TENSION,pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,borderWidth:C.LINE_WIDTH_DEFAULT},{label:"Rain (mm/h)",data:[...Array(y).fill(null),...s.forecast.y_precipitation],borderColor:k.Precipitation,backgroundColor:k.Precipitation+"40",yAxisID:"y_rain",fill:!0,pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,borderWidth:C.LINE_WIDTH_FILLED_AREA},{label:"Wind Gust (km/h)",data:[...s.history.y_windGust.slice().reverse(),...s.forecast.y_windGust],borderColor:k.WindGust,yAxisID:"y_wind",pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,borderDash:[5,5],borderWidth:C.LINE_WIDTH_DEFAULT},{label:"Cloud Cover (%)",data:[...s.history.y_cloudCover.slice().reverse(),...s.forecast.y_cloudCover],borderColor:k.CloudCover,yAxisID:"y_cloud",pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,fill:!1,borderWidth:C.LINE_WIDTH_DEFAULT},{label:"UV Index",data:[...s.history.y_uvIndex.slice().reverse(),...s.forecast.y_uvIndex],borderColor:k.UV,yAxisID:"y_uv",pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,fill:!1,borderWidth:C.LINE_WIDTH_DEFAULT},{label:"Humidity (%)",data:[...s.history.y_humidity.slice().reverse(),...s.forecast.y_humidity],borderColor:k.Humidity,yAxisID:"y_humidity",pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,fill:!1,borderWidth:C.LINE_WIDTH_DEFAULT},{label:"Snow (cm/h)",data:[...s.history.y_snow.slice().reverse(),...s.forecast.y_snow],borderColor:k.Snow,backgroundColor:k.Snow+"30",yAxisID:"y_snow",fill:"origin",pointRadius:C.POINT_RADIUS,pointHitRadius:C.HIT_RADIUS,borderWidth:C.LINE_WIDTH_FILLED_AREA}]},K={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!0},plugins:{legend:{position:"top",labels:{boxWidth:12,usePointStyle:!0,font:{size:11}}},tooltip:{filter:l=>{const R=l.dataset.yAxisID,P=l.raw;return R==="y_temp"?!0:["y_perc","y_rain","y_uv","y_snow"].includes(R)?P!==0&&P!==null:!1},callbacks:{title:l=>new Date(l[0].label).toLocaleString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit",hour12:!1})}},nowLine:{tzOffset:s.forecast.tzOffset}},scales:{x:Tt(),y_temp:{type:"linear",display:!0,position:"left",grid:{color:"rgba(239, 68, 68, 0.15)",drawOnChartArea:!0},ticks:{color:k.Temperature,font:{size:10,weight:"bold"},stepSize:5,precision:0},title:{display:!0,text:"Temperature °C",color:k.Temperature,font:{size:12,weight:"bold"}},beginAtZero:!1,afterDataLimits:l=>{l.min=Math.floor(l.min/5)*5,l.max=Math.ceil(l.max/5)*5}},y_perc:{type:"linear",display:!0,position:"left",min:0,max:100,grid:{drawOnChartArea:!1},ticks:{color:k.PrecipChance,font:{size:10,weight:"bold"},stepSize:100},title:{display:!0,text:"Rain %",color:k.PrecipChance,font:{size:12,weight:"bold"}}},y_rain:{type:"linear",display:!0,position:"left",min:0,suggestedMax:1,grid:{color:"rgba(59, 130, 246, 0.15)",drawOnChartArea:!0,lineWidth:5},ticks:{color:k.Precipitation,font:{size:10,weight:"bold"},stepSize:1},title:{display:!0,text:"Rain mm/h",color:k.Precipitation,font:{size:12,weight:"bold"}},afterDataLimits:l=>{l.max=Math.ceil(Math.max(l.max,1))}},y_snow:{type:"linear",display:!0,position:"left",min:0,suggestedMax:1,grid:{drawOnChartArea:!1},ticks:{color:k.Snow,font:{size:10,weight:"bold"},stepSize:1},title:{display:!0,text:"Snow cm/h",color:k.Snow,font:{size:12,weight:"bold"}},afterDataLimits:l=>{l.max=Math.ceil(Math.max(l.max,1))}},y_wind:{type:"linear",display:!0,position:"left",min:0,grid:{drawOnChartArea:!1},ticks:{color:k.WindGust,font:{size:10,weight:"bold"},stepSize:25},title:{display:!0,text:"Wind Gust km/h",color:k.WindGust,font:{size:12,weight:"bold"}}},y_cloud:{type:"linear",display:!0,position:"left",min:0,max:100,grid:{drawOnChartArea:!1},ticks:{color:k.CloudCover,font:{size:10,weight:"bold"},stepSize:100},title:{display:!0,text:"Cloud Coverage %",color:k.CloudCover,font:{size:12,weight:"bold"}}},y_uv:{type:"linear",display:!0,position:"left",min:0,max:12,grid:{drawOnChartArea:!1},ticks:{color:k.UV,font:{size:10,weight:"bold"},stepSize:12},title:{display:!0,text:"UV",color:k.UV,font:{size:12,weight:"bold"}}},y_humidity:{type:"linear",display:!0,position:"left",min:0,max:100,grid:{drawOnChartArea:!1},ticks:{color:k.Humidity,font:{size:10,weight:"bold"},stepSize:100},title:{display:!0,text:"Humidity %",color:k.Humidity,font:{size:12,weight:"bold"}}}}};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4 md:grid-cols-3",children:[e.jsx(ae,{icon:e.jsx(Ie,{className:"text-red-500"}),label:"TEMP / UV index",value:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-red-500",children:[s.forecast.y_temperature[0],"°C"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-amber-500",children:["UV ",s.forecast.y_uvIndex[0]]})]})}),e.jsx(ae,{icon:e.jsx(Ie,{className:"text-slate-500"}),label:"Min / Max",value:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-blue-500",children:[o,"°"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-red-500",children:[L,"°"]})]})}),e.jsx(ae,{icon:e.jsx(Ce,{className:"text-sky-500"}),label:"Rain / Precip",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsxs("span",{className:"text-sky-500",children:[s.forecast.y_precipChance[0],"%"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-blue-500",children:[s.forecast.y_precipitation[0]," mm/h"]})]})}),e.jsx(ae,{icon:e.jsx(Ce,{className:"text-emerald-500"}),label:"Humidity / Cloud",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsxs("span",{className:"text-emerald-500",children:[s.forecast.y_humidity[0],"%"]}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsxs("span",{className:"text-slate-400",children:[s.forecast.y_cloudCover[0],"%"]})]})}),e.jsx(ae,{icon:e.jsx(xt,{className:"text-slate-500"}),label:"Sun rise / Set",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsx("span",{className:"text-slate-900",children:_?_.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsx("span",{className:"text-slate-900",children:c?c.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"})]})}),e.jsx(ae,{icon:e.jsx(nt,{className:"text-slate-500"}),label:"Noon / Daylight %",value:e.jsxs("div",{className:"flex gap-2 text-sm md:text-base",children:[e.jsx("span",{className:"text-slate-900",children:b?b.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"}),e.jsx("span",{className:"text-slate-300",children:"/"}),e.jsx("span",{className:"text-slate-900",children:I>0?`${I.toFixed(1)}%`:"N/A"})]})})]}),e.jsx("div",{ref:i,className:"custom-scrollbar h-[400px] w-full overflow-x-auto",children:e.jsx("div",{className:"h-full",style:{width:Ct[a]},children:e.jsx(st,{ref:f,data:W,options:K,plugins:[Lt]})})})]})},ae=({icon:t,label:a,value:s})=>e.jsxs("div",{className:"flex items-center gap-2 rounded-xl bg-slate-50 p-2 md:p-3",children:[e.jsx("div",{className:"flex-shrink-0",children:t}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-[10px] font-semibold tracking-wider text-slate-500 md:text-xs",children:a}),e.jsx("div",{className:"truncate text-base font-bold md:text-lg",children:s})]})]}),Te=[{value:"z1x",label:"1x"},{value:"z2x",label:"2x"},{value:"z3x",label:"3x"},{value:"z4x",label:"4x"}],At=({currentZoom:t,onSelect:a})=>{const[s,n]=React.useState(!1),m=React.useRef(null);React.useEffect(()=>{const i=f=>{m.current&&!m.current.contains(f.target)&&n(!1)};return s&&document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]);const d=Te.find(i=>i.value===t)?.label||t;return e.jsxs("div",{className:"relative inline-block",ref:m,"data-testid":"zoom-dropdown",children:[e.jsxs("button",{type:"button",onClick:()=>n(!s),className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:outline-none",children:[e.jsx(wt,{className:"size-4 text-indigo-500"}),e.jsxs("span",{children:["Zoom: ",d]}),e.jsx(we,{className:`size-3 text-slate-400 transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&e.jsx("ul",{className:"animate-in fade-in zoom-in absolute right-0 z-20 mt-2 w-40 overflow-hidden rounded-xl border border-slate-200 bg-white p-1 shadow-xl duration-200",children:Te.map(i=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>{a(i.value),n(!1)},className:`flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm transition-colors ${t===i.value?"bg-indigo-50 font-bold text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,children:e.jsx("span",{children:i.label})})},i.value))})]})},Et=({selectedPlace:t,zoomLevel:a,onZoomChange:s})=>e.jsx("div",{className:"mx-auto max-w-7xl md:px-4 md:py-8","data-testid":"public-view",children:t&&e.jsxs("div",{className:"space-y-8","data-testid":"weather-details",children:[e.jsxs("div",{className:"rounded-b-2xl border bg-white py-4 shadow-sm md:rounded-2xl md:p-6","data-testid":"weather-charts-container",children:[e.jsx(Dt,{place:t,zoomLevel:a}),e.jsx("div",{className:"mt-8 flex justify-center","data-testid":"zoom-dropdown-container",children:e.jsx(At,{currentZoom:a,onSelect:s})})]}),e.jsx("section",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:e.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm md:p-6","data-testid":"external-links-container",children:[e.jsxs("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold",children:[e.jsx(ht,{className:"size-5 text-amber-500"})," External Links"]}),e.jsxs("ul",{className:"space-y-2",children:[t.linkWU.startsWith("gb/")&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx("a",{href:`https://weather.metoffice.gov.uk/maps-and-charts/rainfall-radar-forecast-map#?layer=rainfall-rate&bbox=[[${(t.coords[0]-1).toFixed(4)},${(t.coords[1]-3).toFixed(4)}],[${(t.coords[0]+1).toFixed(4)},${(t.coords[1]+3).toFixed(4)}]]`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"met-office-link",children:"MET Office"})}),e.jsx("li",{children:e.jsx("a",{href:"https://weather.metoffice.gov.uk/warnings-and-advice/uk-warnings",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"met-warnings-link",children:"MET Warnings"})})]}),e.jsx("li",{children:e.jsx("a",{href:`https://www.wunderground.com/forecast/${t.linkWU}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"wu-link",children:"Weather Underground Forecast"})}),e.jsx("li",{children:e.jsx("a",{href:`https://www.lightningmaps.org/?lang=en#m=oss;y=${t.coords[0]};x=${t.coords[1]};z=13`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 hover:underline","data-testid":"lightning-maps-link",children:"Lightning Maps"})})]})]})})]})}),Ut=({currentMembership:t,tiers:a,onUpgrade:s,onBack:n})=>{const m=d=>{const i=a.map(g=>g.name),f=i.indexOf(t),v=i.indexOf(d);return v===f?"current":v<f&&v!==-1?"lower":"upgrade"};return e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8","data-testid":"upgrade-view",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:n,title:"Back to management",children:e.jsx(rt,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Upgrade Membership"}),e.jsx("p",{className:"text-slate-500",children:"Choose the plan that best fits your needs"})]})]}),e.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:a.map(d=>{const i=m(d.name);return e.jsxs("div",{className:`relative flex flex-col rounded-2xl border bg-white p-8 shadow-sm transition-all hover:shadow-md ${i==="current"?"ring-2 ring-indigo-500":""}`,children:[i==="current"&&e.jsx("span",{className:"absolute -top-3 left-1/2 -translate-x-1/2 rounded-full bg-indigo-500 px-3 py-1 text-xs font-bold tracking-wider text-white uppercase",children:"Current Plan"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold tracking-tight text-slate-900 uppercase",children:d.name}),e.jsxs("div",{className:"mt-4 flex items-baseline gap-1",children:[e.jsx("span",{className:"text-4xl font-extrabold text-slate-900",children:d.price}),e.jsx("span",{className:"text-slate-500",children:"/month"})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:d.description})]}),e.jsx("ul",{className:"mb-8 flex-1 space-y-4",children:d.features.map((f,v)=>e.jsxs("li",{className:"flex items-center justify-between gap-3 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ot,{size:18,className:"mt-0.5 shrink-0 text-emerald-500"}),e.jsx("span",{children:f})]}),i==="upgrade"&&e.jsx("button",{onClick:()=>s(d.name),className:"rounded bg-indigo-50 px-2 py-1 text-[10px] font-bold text-indigo-600 uppercase transition-colors hover:bg-indigo-100","data-testid":`upgrade-feature-${d.name}-${v}`,children:"Upgrade"})]},v))}),e.jsx(E,{className:"w-full",variant:i==="upgrade"?"default":"outline",disabled:i!=="upgrade",onClick:()=>s(d.name),"data-testid":`upgrade-button-${d.name}`,children:i==="current"?"Current Plan":i==="lower"?"Included":`Upgrade to ${d.name}`})]},d.name)})})]})},Pt=()=>e.jsx("div",{className:"flex min-h-[60vh] items-center justify-center","data-testid":"weather-loading-spinner",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-indigo-500"})}),$t=()=>{const t=yt(),a=React.useMemo(()=>t.tiers.filter(n=>n.apps?.includes("weather")),[t.tiers]),s=()=>t.loading?e.jsx(Pt,{}):t.showLogin?e.jsx(jt,{onLogin:t.login,onRegister:t.register,onAuthSuccess:t.onAuthSuccess,onCancel:t.navigateToPublic}):t.user&&t.showUpgrade?e.jsx(Ut,{currentMembership:t.user.membership,tiers:a,onUpgrade:t.handleUpgrade,onBack:t.navigateToEdit}):t.user&&t.showEdit?e.jsx(Rt,{places:t.places,groups:t.groups,userMembership:t.user.membership,userRole:t.user.role,userId:t.user.id,onAddGroup:t.handleAddGroup,onUpdateGroup:t.handleUpdateGroup,onDeleteGroup:t.handleDeleteGroup,onReorderGroups:t.handleReorderGroups,onAddPlace:t.handleAddPlace,onUpdatePlace:t.handleUpdatePlace,onDeletePlace:t.handleDeletePlace,onReorderPlaces:t.handleReorderPlaces,onSearchPlace:t.handleSearchPlace,onExportPlaces:t.handleExportPlaces,onImportPlaces:t.handleImportPlaces,tiers:t.tiers}):e.jsx(Et,{selectedPlace:t.selectedPlace,zoomLevel:t.zoomLevel,onZoomChange:t.setZoomLevel});return e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-12 font-sans text-slate-900","data-testid":"weather-page",children:[e.jsx(bt,{isAdmin:!!t.user,userEmail:t.user?.email,userFirstName:t.user?.first_name,userRole:t.user?.role,userMembership:t.user?.membership,onLoginClick:t.navigateToLogin,onLogoutClick:()=>t.logout(),onLogoClick:t.user?t.navigateToEdit:t.navigateToPublic,onUpgradeClick:t.navigateToUpgrade,showLoginButton:!t.user&&!t.showLogin,showUpgradeButton:t.showEdit&&a.findIndex(n=>n.name===t.user?.membership)<a.length-1,places:t.places,selectedPlace:t.selectedPlace,onPlaceChange:t.handlePlaceChange,tiers:a}),e.jsx("main",{"data-testid":"weather-main-content",children:s()})]})};ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(Be,{children:e.jsx($t,{})})}));
