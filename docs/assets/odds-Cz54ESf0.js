import"./index-BQ2tfx3b.js";import{j as r}from"./jsx-runtime-u17CrQMm.js";import{A as K}from"./api-CH_Pe6Vg.js";const X="label";function H(e,n){typeof e=="function"?e(n):e&&(e.current=n)}function se(e,n){const a=e.options;a&&n&&Object.assign(a,n)}function J(e,n){e.labels=n}function Z(e,n,a=X){const l=[];e.datasets=n.map(s=>{const u=e.datasets.find(t=>t[a]===s[a]);return!u||!s.data||l.includes(u)?{...s}:(l.push(u),Object.assign(u,s),u)})}function oe(e,n=X){const a={labels:[],datasets:[]};return J(a,e.labels),Z(a,e.datasets,n),a}function ie(e,n){const{height:a=150,width:l=300,redraw:s=!1,datasetIdKey:u,type:t,data:f,options:d,plugins:R=[],fallbackContent:C,updateMode:g,...h}=e,k=React.useRef(null),m=React.useRef(null),j=()=>{k.current&&(m.current=new Chart.Chart(k.current,{type:t,data:oe(f,u),options:d&&{...d},plugins:R}),H(n,m.current))},M=()=>{H(n,null),m.current&&(m.current.destroy(),m.current=null)};return React.useEffect(()=>{!s&&m.current&&d&&se(m.current,d)},[s,d]),React.useEffect(()=>{!s&&m.current&&J(m.current.config.data,f.labels)},[s,f.labels]),React.useEffect(()=>{!s&&m.current&&f.datasets&&Z(m.current.config.data,f.datasets,u)},[s,f.datasets]),React.useEffect(()=>{m.current&&(s?(M(),setTimeout(j)):m.current.update(g))},[s,d,f.labels,f.datasets,g]),React.useEffect(()=>{m.current&&(M(),setTimeout(j))},[t]),React.useEffect(()=>(j(),()=>M()),[]),r.jsx("canvas",{ref:k,role:"img",height:a,width:l,...h,children:C})}const le=React.forwardRef(ie);function A(e,n){return Chart.Chart.register(n),React.forwardRef((a,l)=>r.jsx(le,{...a,ref:l,type:e}))}Chart.LineController;const ce=A("bar",Chart.BarController);Chart.RadarController;Chart.DoughnutController;Chart.PolarAreaController;Chart.BubbleController;const de=A("pie",Chart.PieController);Chart.ScatterController;const q=e=>{const n=e.filter(l=>l.favorite===1),a=e.filter(l=>l.favorite!==1);return[...n,...a]},ue=(e,n)=>{const a=[];return e.forEach(l=>{const s=`group-${l.id}`;a.push({kind:"group",id:s,groupId:l.id,label:l.label}),n.has(l.id)&&l.markets.forEach(u=>{a.push({kind:"option",id:`option-${u.id}`,groupId:l.id,marketId:u.id,label:u.label})})}),a},fe=(e,n)=>e.find(a=>a.markets.some(l=>l.id===n)),Q=e=>e.flatMap(n=>n.markets),ee=({favorite:e})=>e!==1?null:r.jsx("span",{className:"text-[#ffdc00] text-base leading-none","aria-hidden":"true",children:"★"}),te=({label:e,favorite:n,closeDate:a})=>r.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[r.jsx(ee,{favorite:n}),r.jsx("span",{children:e}),a?r.jsxs(r.Fragment,{children:[" ",r.jsxs("span",{className:"text-[#9aa5c0] text-sm font-semibold",children:["(",a,")"]})]}):null]}),pe=({selectedMarket:e,isOpen:n,onToggle:a,onClose:l,toggleRef:s})=>r.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-xl border border-white/10 bg-white/20 px-3 py-2.5 text-left font-semibold text-[#e8ecf5] shadow-[0_16px_32px_rgba(0,0,0,0.35)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#e63946] focus-visible:ring-offset-2 focus-visible:ring-offset-transparent","aria-haspopup":"listbox","aria-expanded":n,onClick:a,onKeyDown:u=>{u.key==="Escape"&&l()},ref:s,children:[r.jsx(te,{label:e?.label??"",favorite:e?.favorite,closeDate:e?.close_date}),r.jsx("span",{className:"ml-1 text-sm font-bold text-[#9aa5c0]","aria-hidden":"true",children:"▾"})]}),me=({requestState:e})=>r.jsx("li",{children:r.jsx("span",{className:"flex w-full items-center justify-between gap-2 rounded-lg border border-transparent bg-white/10 px-2.5 py-2 text-left font-semibold text-[#e8ecf5]",children:e==="loading"?"Loading markets...":"No markets available"})}),be=({group:e,isExpanded:n,headerId:a,onToggle:l,onKeyDown:s,setItemRef:u,isFocused:t,onFocus:f})=>r.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-lg bg-[#26356d] px-2.5 py-2 text-left font-bold text-[#e8ecf5] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#e63946]","aria-expanded":n,"aria-controls":`${e.id}-options`,onClick:l,onKeyDown:d=>s(d,a),"data-kind":"group",tabIndex:t?0:-1,ref:d=>u(a,d),onFocus:f,children:[r.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.isFavorites?r.jsx(ee,{favorite:1}):null,r.jsx("span",{children:e.label})]}),r.jsx("span",{className:n?"text-sm font-bold text-[#9aa5c0]":"text-sm font-bold text-[#9aa5c0] -rotate-90","aria-hidden":"true",children:"▾"})]}),he=({market:e,isActive:n,optionId:a,onSelect:l,onKeyDown:s,setItemRef:u,isFocused:t,onFocus:f})=>r.jsx("button",{type:"button",className:n?"flex w-full items-center justify-between gap-3 rounded-lg border border-[rgba(230,57,70,0.35)] bg-[rgba(230,57,70,0.14)] px-2.5 py-2 text-left font-semibold text-[#e8ecf5] transition hover:bg-[rgba(230,57,70,0.18)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#e63946]":"flex w-full items-center justify-between gap-3 rounded-lg border border-transparent bg-white/20 px-2.5 py-2 text-left font-semibold text-[#e8ecf5] transition hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#e63946]",role:"option","aria-selected":n,onClick:()=>l(e.id),onKeyDown:d=>s(d,a),"data-kind":"option",tabIndex:t?0:-1,ref:d=>u(a,d),onFocus:f,children:r.jsx(te,{label:e.label,favorite:e.favorite,closeDate:e.close_date})}),xe=({group:e,selectedMarketId:n,onSelect:a,onKeyDown:l,setItemRef:s,focusedItemId:u,onFocusItem:t})=>r.jsx("ul",{className:"mt-1 flex list-none flex-col gap-1 pl-4 pr-1 pb-2",id:`${e.id}-options`,role:"group",children:e.markets.map(f=>{const d=`option-${f.id}`,R=f.id===n;return r.jsx("li",{children:r.jsx(he,{market:f,isActive:R,optionId:d,onSelect:C=>a(C),onKeyDown:l,setItemRef:s,isFocused:u===d,onFocus:()=>t(d)})},d)})}),ge=({normalizedGroups:e,expandedGroupIds:n,focusedItemId:a,onToggleGroup:l,onKeyDown:s,setItemRef:u,onFocusItem:t,selectedMarketId:f,onSelect:d,requestState:R,dropdownStyle:C})=>r.jsx("ul",{className:"fixed z-10 mt-1 list-none rounded-xl border border-white/10 bg-[#0b111d] p-1 shadow-[0_16px_40px_rgba(0,0,0,0.35)] overflow-y-auto space-y-1",role:"listbox","aria-label":"Choose market",style:C,children:e.length===0?r.jsx(me,{requestState:R}):e.map(g=>{const h=n.has(g.id),k=`group-${g.id}`;return r.jsxs("li",{className:"py-1",children:[r.jsx(be,{group:g,isExpanded:h,headerId:k,onToggle:()=>l(g.id),onKeyDown:s,setItemRef:u,isFocused:a===k,onFocus:()=>t(k)}),h?r.jsx(xe,{group:g,selectedMarketId:f,onSelect:m=>{d(m)},onKeyDown:s,setItemRef:u,focusedItemId:a,onFocusItem:t}):null]},g.id)})}),we=({groups:e,selectedMarketId:n,onSelect:a,requestState:l})=>{const s=React.useMemo(()=>e.map((o,x)=>({...o,id:`group-${x}-${o.label||"group"}`,markets:q(o.markets)})),[e]),u=React.useMemo(()=>{const o=Q(s).filter(x=>x.favorite===1);return o.length===0?null:{id:"group-favorites",label:"Favorites",markets:q(o),isFavorites:!0}},[s]),t=React.useMemo(()=>u?[u,...s]:s,[s,u]),[f,d]=React.useState(!1),[R,C]=React.useState(new Set),[g,h]=React.useState(null),[k,m]=React.useState({}),j=React.useRef(null),M=React.useRef(null),P=React.useRef(new Map),y=React.useMemo(()=>Q(t),[t]),E=React.useMemo(()=>y.length===0?{id:n,label:l==="loading"?"Loading markets...":"No markets available"}:y.find(o=>o.id===n)??y[0],[y,n,l]),N=React.useMemo(()=>ue(t,R),[t,R]);React.useEffect(()=>{if(!f)return;const o=fe(t,n)??t[0];C(c=>{const p=o?new Set([o.id]):new Set;return c.size===p.size&&[...p].every(w=>c.has(w))?c:p});const x=o?.markets[0],i=o?.markets.find(c=>c.id===n)?.id??x?.id;h(i?`option-${i}`:null)},[t,f,n]),React.useEffect(()=>{const o=x=>{j.current&&!j.current.contains(x.target)&&d(!1)};return f&&document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[f]),React.useEffect(()=>{if(!f||!g)return;P.current.get(g)?.focus()},[g,f]),React.useEffect(()=>{if(!f)return;const o=()=>{if(!M.current)return;const x=M.current.getBoundingClientRect(),i=window.innerHeight,c=window.innerWidth,p=12,b=Math.min(720,c-p*2),v=x.left+x.width/2-b/2,O=Math.min(Math.max(v,p),Math.max(p,c-b-p)),W=i-x.bottom-p,V=x.top-p,U=W<240&&V>W,ae=Math.max(140,Math.min(720,U?V:W));m({position:"fixed",width:`${b}px`,maxHeight:`${ae}px`,left:`${O}px`,transform:"none",top:U?void 0:`${x.bottom+8}px`,bottom:U?`${i-x.top+8}px`:void 0})};return o(),window.addEventListener("resize",o),window.addEventListener("scroll",o,{passive:!0}),()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}},[f,t,n]);const I=o=>{C(x=>x.has(o)?new Set:new Set([o]))},S=o=>{if(N.length===0)return;const x=N.findIndex(b=>b.id===g),i=x===-1?0:x,c=Math.min(N.length-1,Math.max(0,i+o)),p=N[c];h(p?.id??null)},_=(o,x)=>{if(o.key==="ArrowDown"&&(o.preventDefault(),S(1)),o.key==="ArrowUp"&&(o.preventDefault(),S(-1)),o.key==="Escape"){o.preventDefault(),d(!1);return}const i=N.find(c=>c.id===x);i&&(i.kind==="group"&&(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),I(i.groupId)),i.kind==="option"&&(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),a(i.marketId),d(!1)))},D=(o,x)=>{P.current.set(o,x)},$=()=>d(!1),L=()=>d(o=>!o),T=o=>{a(o),$()};return r.jsxs("div",{className:"relative flex min-w-[220px] flex-col gap-1 text-[#e8ecf5]",ref:j,children:[r.jsx(pe,{selectedMarket:E??null,isOpen:f,onToggle:L,onClose:$,toggleRef:M}),f?r.jsx(ge,{normalizedGroups:t,expandedGroupIds:R,focusedItemId:g,onToggleGroup:I,onKeyDown:_,setItemRef:D,onFocusItem:h,selectedMarketId:n,onSelect:T,requestState:l,dropdownStyle:k}):null]})},ye=e=>e.state?.status==="ACTIVE",Re=e=>e.state?.status==="LOSER",ke=e=>e.state?.status==="WINNER",Y=e=>{if(!e||e.length===0)return null;const[n]=e;return typeof n.price!="number"||typeof n.size!="number"?null:{price:n.price,size:n.size}},ve=(e,n,a,l)=>{const s=[],u=d=>typeof d!="number"?1:d<=0?0:1/d;if(typeof e=="number"&&e>0&&s.push({price:e,weight:u(a)}),typeof n=="number"&&n>0&&s.push({price:n,weight:u(l)}),s.length===0)return null;const t=s.reduce((d,R)=>d+R.weight,0);return t===0?null:1/(s.reduce((d,R)=>d+R.price*R.weight,0)/t)},re="* ",B="1.244214540",je=e=>{const n="https://ero.betfair.com/www/sports/exchange/readonly/v1/bymarket",a=[["rollupLimit","10"],["rollupModel","STAKE"],["currencyCode","GBP"],["locale","en_GB"]],l="MARKET_STATE,MARKET_DESCRIPTION,RUNNER_DESCRIPTION,RUNNER_EXCHANGE_PRICES_BEST,RUNNER_STATE",s=new URLSearchParams;return a.forEach(([u,t])=>s.append(u,t)),s.append("marketIds",e),s.append("types",l),`${n}?${s.toString()}`},Ne=(e,n)=>{const a=e.eventTypes?.[0]?.eventNodes?.[0]?.marketNodes?.[0],l=a?{marketId:a.marketId,status:a.state.status,inplay:a.state.inplay,numberOfWinners:a.state.numberOfWinners,description:a.description,runners:a.runners}:void 0,s=l?.description?.marketName??"—",u=l?.runners??[],t=u.filter(ye),f=u.filter(Re),d=u.filter(ke),R=y=>{const E=y.description?.runnerName??"Unknown runner",N=Y(y.exchange?.availableToBack),I=Y(y.exchange?.availableToLay),S=N?.price??(typeof y.state?.lastPriceTraded=="number"?y.state?.lastPriceTraded:null),_=I?.price??null,D=N?.size??null,$=I?.size??null,L=y.state?.status,T=L==="ACTIVE"||L==="LOSER"||L==="WINNER"?L:"UNKNOWN",o=T==="WINNER",x=o?re+E:E,i=o?1:ve(S,_,D,$),c=o?1:typeof _=="number"&&_>0?1/_:null,p=o?1:typeof S=="number"&&S>0?1/S:null;return{id:y.selectionId,name:x,status:T,bestBack:S,bestLay:_,impliedProbability:i,probabilityMin:c,probabilityMax:p}},g=[...[...t,...d].map(R)].sort((y,E)=>{const N=y.impliedProbability??0,I=E.impliedProbability??0;if(N!==I)return I-N;const S=y.bestBack??Number.POSITIVE_INFINITY,_=E.bestBack??Number.POSITIVE_INFINITY;return S!==_?S-_:0}),h=g.filter(y=>(y.impliedProbability??0)>=.01),k=h.reduce((y,E)=>y+(E.impliedProbability??0),0),m=Math.max(0,1-k),j=g.length-h.length,M={id:-1,name:j>0?`Others ${j}`:"Others",bestBack:null,bestLay:null,status:"AGGREGATE",impliedProbability:m,probabilityMin:m,probabilityMax:m},P=[...h,M].sort((y,E)=>{const N=y.impliedProbability??0,I=E.impliedProbability??0;return N!==I?I-N:0});return{marketId:l?.marketId??"unknown",marketName:s,runners:P,fetchedAt:n.toISOString(),status:l?.status??"UNKNOWN",inplay:!!l?.inplay,numberOfWinners:l?.numberOfWinners??1,activeRunnerCount:t.length,loserRunnerCount:f.length,winnerRunnerCount:d.length,totalRunners:t.length+f.length+d.length}},Me={id:"valueLabel",afterDatasetsDraw(e,n,a){const l=e.config.type;if(l&&l!=="bar")return;const{ctx:s,data:u}=e,t=a?.color??"#e8ecf5";s.save();const f=e.getSortedVisibleDatasetMetas(),d=f[f.length-1];d&&(d.data.forEach((R,C)=>{const g=a?.impliedProbabilities?.[C],h=typeof g=="number"?g:u.datasets?.reduce((m,j)=>{const M=j?.data?.[C];return typeof M=="number"?m+M:m},0);if(typeof h!="number"||h<=0)return;const k=R.tooltipPosition(!0);k.x===null||k.y===null||(s.fillStyle=t,s.font='600 12px "Inter", system-ui, -apple-system, sans-serif',s.textBaseline="middle",s.textAlign="left",s.fillText(`${h.toFixed(1)}%`,k.x+6,k.y))}),s.restore())}};Chart.Chart.register(Chart.ArcElement,Chart.BarElement,Chart.CategoryScale,Chart.LinearScale,Chart.Legend,Chart.Title,Chart.Tooltip,Me);const F=["#ba0034","#0293d9","#ff901a","#50469d","#eb9fa2","#87365c","#97d76f","#ed2fa4","#0b6109","#ffa1e4","#01dbc6"],G=()=>typeof window>"u"?B:new URLSearchParams(window.location.search).get("marketId")??B,z=e=>e===null||Number.isNaN(e)?"—":`${(e*100).toFixed(1)}%`,Ce=()=>{const[e,n]=React.useState([]),[a,l]=React.useState("idle"),[s,u]=React.useState(null),[t,f]=React.useState(null),[d,R]=React.useState("idle"),[C,g]=React.useState(null),[h,k]=React.useState(()=>G()),m=React.useMemo(()=>e.flatMap(i=>i.markets),[e]),j=React.useCallback(i=>i&&m.some(c=>c.id===i)?i:m.length>0?m[0].id:B,[m]),M=React.useCallback(async()=>{l("loading"),u(null);try{const i=await fetch(`${K}/markets/`);if(!i.ok)throw new Error(`Market list request failed with status ${i.status}`);const c=await i.json(),p=Array.isArray(c)?c:c?.markets??[],b=p.flatMap(v=>v.markets),w=b.find(v=>v.id===G())?.id??b[0]?.id??B;n(p),k(v=>v===w?v:w),l("success")}catch(i){console.error("Failed to fetch market list",i),l("error"),u("Unable to load available markets. Please retry.")}},[K]),P=React.useCallback(async i=>{R("loading"),g(null);try{const c=await fetch(je(i),{mode:"cors"});if(!c.ok)throw new Error(`Request failed with status ${c.status}`);const p=await c.json(),b=Ne(p,new Date);f(b),R("success")}catch(c){console.error("Failed to fetch market",c),R("error"),g("We could not load market prices. Please retry.")}},[]);React.useEffect(()=>{M()},[M]),React.useEffect(()=>{P(h)},[P,h]),React.useEffect(()=>{if(typeof window>"u")return;const i=new URLSearchParams(window.location.search),c=i.get("marketId");if(h&&c!==h){i.set("marketId",h);const p=`${window.location.pathname}?${i.toString()}${window.location.hash}`;window.history.replaceState({},"",p)}},[h]),React.useEffect(()=>{const i=()=>{const c=G(),p=j(c);k(b=>b===p?b:p)};return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[j]),React.useEffect(()=>{if(m.length===0)return;const i=j(h);i!==h&&k(i)},[m,j,h]);const y=React.useMemo(()=>`https://www.betfair.com/exchange/plus/politics/market/${h}`,[h]),E=React.useMemo(()=>t?new Date(t.fetchedAt).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",weekday:"short",month:"short",day:"numeric"}):null,[t]),N=React.useMemo(()=>{if(!t)return null;const i=t.runners.map(w=>w.name),c=t.runners.map((w,v)=>w.name.startsWith("Others")?"#9aa0ae":F[v%F.length]),p=t.runners.map(w=>Math.max(0,w.probabilityMin??0)*100),b=t.runners.map(w=>{const v=Math.max(0,w.probabilityMin??0),O=Math.max(v,w.probabilityMax??v);return Math.max(0,O-v)*100});return{labels:i,datasets:[{label:"Minimum probability (%)",data:p,backgroundColor:c,borderColor:c,borderWidth:1,borderSkipped:!1,stack:"probability"},{label:"Spread from min to max (%)",data:b,backgroundColor:"#ffffff",borderColor:"#ffffff",borderWidth:1,borderRadius:{topRight:3,bottomRight:3,topLeft:0,bottomLeft:0},borderSkipped:!1,stack:"probability"}]}},[t]),I=React.useMemo(()=>{if(!t)return null;const i=t.runners.map(b=>(b.impliedProbability??0)*100),c=t.runners.reduce((b,w)=>{const v=(w.probabilityMax??0)*100;return v>b?v:b},0),p=Math.max(5,c);return{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,animation:!1,transitions:{active:{animation:{duration:0}},resize:{animation:{duration:0}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label(b){const w=t.runners[b.dataIndex],v=z(w.probabilityMin),O=z(w.probabilityMax);return`${w.name} — ${v} to ${O}`}}},valueLabel:{color:"#e8ecf5",impliedProbabilities:i}},scales:{x:{stacked:!0,grid:{color:"rgba(232, 236, 245, 0.50)"},ticks:{color:"#e8ecf5",callback:b=>`${b}%`},suggestedMax:p},y:{stacked:!0,grid:{display:!1},ticks:{color:b=>{const w=b.tick?.label;if(typeof w=="string"){if(w.startsWith(re))return"#ff3b30";if(w.startsWith("Others"))return"#9aa0ae"}return"#e8ecf5"},autoSkip:!1}}}}},[t]),S=React.useMemo(()=>{if(!t)return null;const i=t.runners.map(p=>p.name),c=t.runners.map((p,b)=>p.name.startsWith("Others")?"#9aa0ae":F[b%F.length]);return{labels:i,datasets:[{label:"Implied probability",data:t.runners.map(p=>(p.impliedProbability??0)*100),backgroundColor:c,borderWidth:0}]}},[t]),_=React.useMemo(()=>t?{animation:!1,transitions:{active:{animation:{duration:0}},resize:{animation:{duration:0}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label(i){const c=t.runners[i.dataIndex];return`${c.name}: ${z(c.impliedProbability)}`}}}}}:null,[t]),D=React.useMemo(()=>t?Math.max(320,t.runners.length*34):320,[t]),$=React.useMemo(()=>{if(!t)return"bar-empty";const i=t.runners.map(c=>c.id).join("-");return`${t.marketId}-${i}-${t.fetchedAt}`},[t]),L=React.useMemo(()=>{if(!t)return null;const i=t.runners.filter(b=>b.status==="ACTIVE"&&!b.name.startsWith("Others")).length,c=Math.max(0,t.activeRunnerCount-i),p=t.numberOfWinners-t.winnerRunnerCount;return[`${t.activeRunnerCount} still active`,c>0?` (${i} displayed + ${c} others below 1%)`:"",t.winnerRunnerCount>0?` + ${t.winnerRunnerCount} already won`:"",t.loserRunnerCount>0?` + ${t.loserRunnerCount} already lost`:"",t.winnerRunnerCount+t.loserRunnerCount>0?` = ${t.totalRunners} starters`:"",p>1?` ; ${p} winning spots left`:""].join("")},[t]),T=d==="loading"&&!t,o=t?.runners.length===0,x=t?.inplay??!1;return r.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_20%_-10%,rgba(230,57,70,0.18),transparent_35%),radial-gradient(circle_at_80%_20%,rgba(118,174,255,0.12),transparent_40%),#060910] px-[clamp(1.25rem,4vw,2.5rem)] py-[clamp(1.25rem,4vw,2.5rem)] font-sans text-[#e8ecf5]",style:{colorScheme:"dark"},children:r.jsxs("div",{className:"mx-auto flex max-w-[1200px] flex-col gap-6",children:[r.jsx("header",{className:"rounded-[24px] border border-white/10 bg-[linear-gradient(120deg,rgba(14,20,34,0.85),rgba(14,20,34,0.65))] p-[clamp(1.25rem,3vw,2rem)] shadow-[0_20px_60px_rgba(0,0,0,0.35)]",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Odds"}),t?.status!=="OPEN"&&r.jsx("div",{className:"my-3 inline-flex items-center gap-1 rounded-full border border-[rgba(230,57,70,0.45)] bg-[rgba(230,57,70,0.15)] px-3 py-1 text-sm font-semibold text-[#e8ecf5]","aria-label":"Market status",children:t?.status??"Unknown"}),x&&r.jsx("div",{className:"my-3 inline-flex items-center justify-center rounded-full border border-[#ffd447] bg-[#ffd447] px-3 py-1 text-sm font-semibold text-[#0e1422] shadow-[0_0_0_0_rgba(255,212,71,0.45)] animate-pulse","aria-label":"Market live",children:"LIVE"}),r.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-[#9aa5c0]","aria-live":"polite",children:E?r.jsxs("span",{className:"text-sm",children:["Updated ",E]}):r.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-sm font-semibold text-[#e8ecf5]",children:"Fetching market..."})}),r.jsxs("div",{className:"mt-4 flex flex-col items-start gap-3",children:[r.jsx(we,{groups:e,selectedMarketId:h,onSelect:k,requestState:a}),r.jsx("a",{className:"text-sm font-semibold text-[#9aa5c0] underline decoration-slate-500 underline-offset-4 hover:text-[#e8ecf5]",href:y,target:"_blank",rel:"noreferrer noopener",children:"Original data"}),L&&r.jsx("div",{className:"inline-flex items-center gap-1 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-sm font-semibold text-[#e8ecf5]","aria-label":"Total runners",children:L})]})]})}),s&&r.jsxs("div",{className:"flex flex-col gap-4 rounded-[14px] border border-[rgba(230,57,70,0.5)] bg-[rgba(230,57,70,0.1)] px-4 py-3 text-left shadow-[0_20px_60px_rgba(0,0,0,0.35)] md:flex-row md:items-center md:justify-between",role:"alert","aria-live":"assertive",children:[r.jsxs("div",{children:[r.jsx("p",{className:"m-0 text-lg font-bold text-[#e8ecf5]",children:"Market list unavailable"}),r.jsx("p",{className:"m-0 mt-1 text-sm text-[#9aa5c0]",children:s})]}),r.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg border border-white/15 bg-white/5 px-3 py-2 font-semibold text-[#e8ecf5] hover:border-white/30",onClick:()=>{M()},children:"Retry"})]}),C&&r.jsxs("div",{className:"flex flex-col gap-4 rounded-[14px] border border-[rgba(230,57,70,0.5)] bg-[rgba(230,57,70,0.1)] px-4 py-3 text-left shadow-[0_20px_60px_rgba(0,0,0,0.35)] md:flex-row md:items-center md:justify-between",role:"alert","aria-live":"assertive",children:[r.jsxs("div",{children:[r.jsx("p",{className:"m-0 text-lg font-bold text-[#e8ecf5]",children:"Price fetch failed"}),r.jsx("p",{className:"m-0 mt-1 text-sm text-[#9aa5c0]",children:C})]}),r.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg border border-white/15 bg-white/5 px-3 py-2 font-semibold text-[#e8ecf5] hover:border-white/30",onClick:()=>{P(h)},children:"Retry"})]}),r.jsx("section",{className:"grid grid-cols-1 gap-4",children:r.jsxs("div",{className:"w-full rounded-2xl border border-white/10 bg-[#0e1422] p-5 shadow-[0_20px_60px_rgba(0,0,0,0.35)]",children:[r.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:r.jsx("div",{children:r.jsx("h2",{className:"text-xl font-semibold",children:"Probability"})})}),T&&r.jsx("div",{className:"mt-3 flex flex-col gap-2","aria-hidden":"true",children:Array.from({length:5}).map((i,c)=>r.jsx("div",{className:"h-4 rounded-md bg-white/10 animate-pulse"},c))}),!T&&t&&!o&&r.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[r.jsx("div",{className:"w-full rounded-[14px] border border-white/10 bg-white/5 p-3 text-[#e8ecf5] shadow-inner","aria-label":"Horizontal bar chart of implied probabilities",children:N&&r.jsx("div",{className:"w-full",role:"img","aria-label":"Implied probability bar chart",style:{height:`${D}px`},children:I&&r.jsx(ce,{data:N,options:I},$)})}),r.jsx("div",{className:"w-full rounded-[14px] border border-white/10 bg-white/5 p-3 text-[#e8ecf5] shadow-inner","aria-label":"Pie chart of implied probabilities",children:S&&r.jsx("div",{className:"w-full min-h-[260px]",role:"img","aria-label":"Implied probability pie chart",children:_&&r.jsx(de,{data:S,options:_})})})]}),!T&&o&&r.jsx("p",{className:"mt-3 text-[#9aa5c0]",role:"status",children:"No runners available right now."})]})})]})})},ne=document.getElementById("root");if(!ne)throw new Error("Root element #root not found");document.body.classList.add("odds-page");ReactDOM.createRoot(ne).render(r.jsx(React.StrictMode,{children:r.jsx(Ce,{})}));
