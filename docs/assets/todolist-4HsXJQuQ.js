import"./modulepreload-polyfill-B5Qt9EMX.js";import{r as s,j as e,R as tt,a as st}from"./client-BsyqJ1xH.js";import{B as O}from"./button-BZSrPANe.js";import{g as Oe}from"./api-C-gcI8S5.js";const de="todo.jwt",at=()=>{const o=s.useMemo(()=>`${Oe()}/auth`,[]),[i,c]=s.useState(()=>typeof window>"u"?null:window.localStorage.getItem(de)),[_,N]=s.useState(null),[L,T]=s.useState(!1),[S,b]=s.useState(null),[V,H]=s.useState(!1),p=s.useCallback(d=>{c(d),!(typeof window>"u")&&(d?window.localStorage.setItem(de,d):window.localStorage.removeItem(de))},[]),j=s.useCallback(d=>{b(d||null),p(null),N(null)},[p]),A=s.useCallback(async d=>{const x=await fetch(`${o}/me`,{headers:{Authorization:`Bearer ${d}`}});if(!x.ok)throw new Error(x.status===401?"Session expired. Please log in again.":"Unable to load profile.");const m=await x.json();N({id:m.id,email:m.email}),b(null)},[o]);s.useEffect(()=>{if(!i){N(null),T(!0);return}T(!1),A(i).catch(d=>{const x=d instanceof Error?d.message:"Session expired.";j(x)}).finally(()=>{T(!0)})},[j,A,i]);const f=s.useCallback(async(d,x)=>{H(!0),b(null);try{const m=await fetch(`${o}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:x})});if(!m.ok){const C=await m.json().catch(()=>({}));throw new Error(C.detail??"Invalid credentials")}const w=await m.json();p(w.access_token),await A(w.access_token)}catch(m){const w=m instanceof Error?m.message:"Unable to log in.";throw j(w),new Error(w)}finally{H(!1)}},[o,j,A,p]),F=s.useCallback(()=>{j()},[j]),v=s.useCallback(async(d,x)=>{if(!i)throw new Error("Not authenticated");const m=new Headers(x?.headers);m.set("Authorization",`Bearer ${i}`);const w=await fetch(d,{...x,headers:m});if(w.status===401)throw j("Session expired. Please log in again."),new Error("Session expired. Please log in again.");return w},[j,i]),P=s.useCallback(()=>b(null),[]);return{user:_,token:i,ready:L,isAuthenticated:!!(_&&i),login:f,logout:F,authenticatedFetch:v,sessionError:S,clearSessionError:P,loginPending:V}},ot=o=>o.toISOString().split("T")[0],ue=()=>{const o=ot(new Date);return{name:"",description:"",startDate:o,dueDate:o,category:"",isCompleted:!1}},J=o=>{const i=o.slice(0,10),[c,_,N]=i.split("-"),L=Number(c),T=Number(_),S=Number(N);if([L,T,S].some(b=>Number.isNaN(b))){const b=new Date(o);return b.setHours(0,0,0,0),b}return new Date(L,T-1,S)},ge=()=>{const o=new Date;return o.setHours(0,0,0,0),o},nt=1440*60*1e3,lt=o=>({name:o.name,description:o.description,startDate:o.start_date,dueDate:o.due_date,category:o.category,isCompleted:o.is_completed}),rt=Oe(),U=`${rt}/tasks`,Fe="NONE",Le=o=>{const i=J(o);return Number.isNaN(i.valueOf())?o:new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}).format(i)},$e=(o,i=!1)=>{if(i)return!1;const c=ge(),_=J(o);return _.setHours(0,0,0,0),_<c},ct=o=>{const i=J(o);if(Number.isNaN(i.valueOf()))return 0;i.setHours(0,0,0,0);const c=ge();return Math.round((i.getTime()-c.getTime())/nt)},it=o=>o>0?`+${o}d`:`${o}d`,Ae=o=>o.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,""),he=o=>{const i=ge(),c=J(o);return c.setHours(0,0,0,0),c.getTime()<=i.getTime()},me=o=>o.is_completed?{label:"Completed",modifier:"todo-status--completed"}:he(o.start_date)?{label:"Active",modifier:"todo-status--active"}:{label:"Blocked",modifier:"todo-status--blocked"},dt=()=>{const[o,i]=s.useState([]),[c,_]=s.useState(ue),[N,L]=s.useState(!0),[T,S]=s.useState(null),[b,V]=s.useState(!1),[H,p]=s.useState(null),[j,A]=s.useState(null),[f,F]=s.useState([]),[v,P]=s.useState(null),[d,x]=s.useState(!1),[m,w]=s.useState(!1),[C,Pe]=s.useState({key:"due_date",direction:"asc"}),[W,Y]=s.useState(()=>new Set),[Z,fe]=s.useState(!1),[_e,q]=s.useState(null),[K,le]=s.useState(!1),[B,pe]=s.useState({label:"",slug:""}),[be,ye]=s.useState(!1),[xe,je]=s.useState(!1),[ve,E]=s.useState(null),{user:Be,ready:Q,isAuthenticated:h,login:ke,logout:Ne,authenticatedFetch:k,sessionError:Se,clearSessionError:X,loginPending:we}=at(),[Ie,G]=s.useState(!1),[I,re]=s.useState({email:"",password:""}),[ee,te]=s.useState(null),D=s.useCallback(()=>{te(null),X()},[X]),Ce=s.useCallback((t,a)=>{re(n=>({...n,[t]:a})),ee&&te(null),X()},[X,ee]),ce=s.useMemo(()=>{const t=o.filter(r=>!r.is_completed),a=t.filter(r=>$e(r.due_date,r.is_completed)).length,n=t.filter(r=>he(r.start_date)).length,l=t.filter(r=>!he(r.start_date)).length;return{overdue:a,ready:n,blocked:l,total:o.length}},[o]),Ee=s.useMemo(()=>o.filter(t=>{const a=me(t).label;return!(!d&&a==="Blocked"||!m&&a==="Completed")}),[o,d,m]),M=s.useCallback(async()=>{if(!h){i([]),L(!1),A(null),S("Log in to view your tasks.");return}L(!0),S(null);try{const n=(await(await k(`${U}/?limit=100`)).json()).map(l=>({...l,category:l.category??"",is_completed:!!l.is_completed}));i(n),A(new Date)}catch(t){const a=t instanceof Error?t.message:"Unable to load tasks.";S(a)}finally{L(!1)}},[k,h]);s.useEffect(()=>{Q&&M()},[Q,M]);const se=s.useCallback(async()=>{if(!h){F([]);return}try{const t=await k(`${U}/categories`);if(!t.ok)throw new Error("Unable to load categories");const a=await t.json();F(a)}catch{F([])}},[k,h]);s.useEffect(()=>{Q&&se()},[Q,se]);const Me=s.useCallback(async t=>{t.preventDefault(),D();const a=I.email.trim().toLowerCase(),n=I.password;if(!a||!n){te("Enter email and password.");return}try{await ke(a,n),G(!1),re({email:"",password:""}),S(null),M(),se()}catch(l){const r=l instanceof Error?l.message:"Unable to log in.";te(r)}},[se,M,ke,I.email,I.password,D]),Re=s.useCallback(()=>{Ne(),i([]),F([]),_(ue()),P(null),Y(new Set),S("Log in to view your tasks."),G(!1),D()},[Ne,D]),ze=s.useCallback(()=>{D(),G(!0)},[D]),He=s.useCallback(()=>{D(),G(!1)},[D]);s.useEffect(()=>{h&&(G(!1),re({email:"",password:""}),D())},[h,D]),s.useEffect(()=>{h||le(!1)},[h]),s.useEffect(()=>{Y(t=>{if(t.size===0)return t;const a=new Set(o.map(r=>r.id));let n=!1;const l=new Set;return t.forEach(r=>{a.has(r)?l.add(r):n=!0}),n?l:t})},[o]);const ie=s.useCallback(()=>{const t=ue(),a=f[0]?.value;return a?{...t,category:a}:t},[f]);s.useEffect(()=>{f.length!==0&&_(t=>t.category&&f.some(a=>a.value===t.category)?t:{...t,category:f[0].value})},[f]);const ae=s.useMemo(()=>f.reduce((t,a)=>(t[a.value]=a.label,t),{}),[f]),qe=s.useMemo(()=>{const t=[...Ee],a=r=>{const g=J(r).getTime();return Number.isNaN(g)?0:g},n={Blocked:0,Active:1,Completed:2},l=r=>{switch(C.key){case"start_date":return a(r.start_date);case"due_date":return a(r.due_date);case"status":return n[me(r).label]??0;case"category":default:return(ae[r.category]??r.category??"").toLowerCase()}};return t.sort((r,g)=>{const u=l(r),y=l(g);if(typeof u=="number"&&typeof y=="number")return u===y?r.id-g.id:C.direction==="asc"?u-y:y-u;const $=u.toString(),z=y.toString();return $===z?r.id-g.id:C.direction==="asc"?$.localeCompare(z,void 0,{sensitivity:"base"}):z.localeCompare($,void 0,{sensitivity:"base"})})},[ae,C,Ee]),R=(t,a)=>{_(n=>({...n,[t]:a}))},Ke=async t=>{t.preventDefault(),p(null);const a=c.name.trim(),n=c.description.trim();if(!a){p("Please provide a name.");return}if(!c.category){p("Select a category for this task.");return}if(c.startDate>c.dueDate){p("Start date must be on or before the due date.");return}if(!h){p("Log in to manage tasks.");return}const l=v!==null,r=l?`${U}/${v}`:`${U}/`,g=l?"PUT":"POST";V(!0);try{const u=await k(r,{method:g,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:n,start_date:c.startDate,due_date:c.dueDate,category:c.category,is_completed:c.isCompleted})});if(!u.ok)throw new Error("Failed to save the task");const y=await u.json();i($=>l?$.map(z=>z.id===y.id?y:z):[y,...$]),_(ie()),P(null),p(l?"Task updated":"Task saved")}catch(u){const y=u instanceof Error?u.message:"Unexpected error";p(y)}finally{V(!1)}},De=s.useCallback(t=>{_(lt(t)),P(t.id),p(null)},[]),Ge=s.useCallback(()=>{_(ie()),P(null),p(null)},[ie]),Je=t=>{Pe(a=>a.key===t?{key:t,direction:a.direction==="asc"?"desc":"asc"}:{key:t,direction:"asc"})},oe=t=>C.key!==t?"none":C.direction==="asc"?"ascending":"descending",ne=(t,a)=>{const n=C.key===t?C.direction:null,l=n?`Sort by ${a} (${n==="asc"?"ascending":"descending"})`:`Sort by ${a}`;return e.jsxs("button",{type:"button",className:"todo-table__sort",onClick:()=>Je(t),"aria-label":l,children:[e.jsx("span",{children:a}),e.jsx("span",{className:"todo-table__sort-icon","aria-hidden":"true",children:n?n==="asc"?"↑":"↓":"↕"})]})},Ve=s.useCallback((t,a)=>{Y(n=>{const l=new Set(n);return a?l.add(t):l.delete(t),l})},[]),We=s.useCallback(async()=>{const t=Array.from(W);if(t.length===0||Z){q(t.length===0?"Select at least one task to delete.":null);return}if(!h){q("Log in to delete tasks.");return}fe(!0),q(null);const a=new Set(t);try{await Promise.all(t.map(async n=>{if(!(await k(`${U}/${n}`,{method:"DELETE"})).ok)throw new Error("Unable to delete selected tasks.")})),i(n=>n.filter(l=>!a.has(l.id))),Y(new Set),q(t.length===1?"Deleted 1 task.":`Deleted ${t.length} tasks.`)}catch(n){const l=n instanceof Error?n.message:"Failed to delete selected tasks.";q(l)}finally{fe(!1)}},[k,Z,h,W]),Ye=(t,a)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),De(a))},Ze=W.size,Te=s.useCallback((t,a)=>{pe(n=>t==="label"&&!be?{label:a,slug:Ae(a)}:{...n,[t]:a}),t==="slug"&&ye(!0),E(null)},[be]),Qe=s.useCallback(async t=>{t.preventDefault();const a=B.label.trim(),n=B.slug||a,l=Ae(n);if(!a||!l){E("Provide both a label and a slug.");return}if(f.some(r=>r.value===l)){E("That slug already exists.");return}if(!h){E("Log in to manage categories.");return}je(!0),E(null);try{const r=await k(`${U}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:l,label:a})});if(!r.ok)throw new Error("Unable to add category.");const g=await r.json();F(u=>[...u,g].sort((y,$)=>y.label.localeCompare($.label))),pe({label:"",slug:""}),ye(!1),E("Category added.")}catch(r){const g=r instanceof Error?r.message:"Failed to add category.";E(g)}finally{je(!1)}},[k,B.label,B.slug,f,h]),Xe=s.useCallback(async t=>{if(!(!t||t===Fe)){if(!h){E("Log in to manage categories.");return}try{if(!(await k(`${U}/categories/${t}`,{method:"DELETE"})).ok)throw new Error("Unable to delete category.");F(n=>n.filter(l=>l.value!==t)),E("Category removed.")}catch(a){const n=a instanceof Error?a.message:"Failed to delete category.";E(n)}}},[k,h,F]),et=s.useMemo(()=>{if(typeof window>"u")return"/users/";const{pathname:t,search:a,hash:n}=window.location;if(!t)return"/users/";const l=`${t}${a||""}${n||""}`;return l?`/users/?back=${encodeURIComponent(l)}`:"/users/"},[]);return e.jsxs("div",{className:"todo-app",children:[e.jsxs("nav",{className:"todo-nav","aria-label":"Primary navigation",children:[e.jsx("div",{className:"todo-nav__logo",children:"To Do list"}),e.jsxs("ul",{className:"todo-nav__menu",children:[e.jsx("li",{className:"todo-nav__item",children:e.jsx("button",{type:"button",className:`todo-nav__link todo-nav__link--button${K?"":" todo-nav__link--active"}`,"aria-pressed":!K,onClick:()=>le(!1),children:"Tasks"})}),e.jsx("li",{className:"todo-nav__item",children:e.jsx("button",{type:"button",className:`todo-nav__link todo-nav__link--button${K?" todo-nav__link--active":""}`,"aria-pressed":K,onClick:()=>le(t=>!t),children:"Manage categories"})})]}),e.jsx("div",{className:"todo-nav__auth",children:h?e.jsxs("div",{className:"todo-nav__user",children:[e.jsx("div",{className:"todo-nav__user-details",children:e.jsx("span",{className:"todo-nav__user-email",children:Be?.email})}),e.jsx("button",{type:"button",className:"todo-nav__logout",onClick:Re,children:"Logout"})]}):e.jsxs("div",{className:"todo-nav__login",children:[Ie?e.jsxs("form",{className:"todo-nav__login-form",onSubmit:Me,children:[e.jsxs("label",{className:"todo-nav__login-field",children:[e.jsx("span",{children:"Email"}),e.jsx("input",{type:"email",value:I.email,onChange:t=>Ce("email",t.target.value),autoComplete:"email",required:!0})]}),e.jsxs("label",{className:"todo-nav__login-field",children:[e.jsx("span",{children:"Password"}),e.jsx("input",{type:"password",value:I.password,onChange:t=>Ce("password",t.target.value),autoComplete:"current-password",required:!0})]}),e.jsxs("div",{className:"todo-nav__login-actions",children:[e.jsx("button",{type:"submit",className:"todo-nav__login-submit",disabled:we,children:we?"Signing in…":"Sign in"}),e.jsx("button",{type:"button",className:"todo-nav__login-cancel",onClick:He,children:"Cancel"})]})]}):e.jsx("button",{type:"button",className:"todo-nav__link todo-nav__link--button",onClick:ze,children:"Login"}),e.jsx("a",{className:"todo-nav__register-link",href:et,children:"Register"}),(ee||Se)&&e.jsx("p",{className:"todo-nav__feedback",role:"status",children:ee??Se})]})})]}),h?K?e.jsx("section",{className:"todo-categories","aria-label":"Category manager",children:e.jsxs("div",{className:"todo-categories__panel",children:[e.jsx("div",{children:e.jsx("h3",{children:"Manage categories"})}),e.jsxs("form",{className:"todo-categories__form",onSubmit:Qe,children:[e.jsxs("label",{className:"todo-categories__field",children:[e.jsx("span",{children:"Category label"}),e.jsx("input",{type:"text",value:B.label,onChange:t=>Te("label",t.target.value),placeholder:"can include spaces",required:!0})]}),e.jsxs("label",{className:"todo-categories__field",children:[e.jsx("span",{children:"Category slug"}),e.jsx("input",{type:"text",value:B.slug,onChange:t=>Te("slug",t.target.value),placeholder:"DESIGN",required:!0})]}),e.jsx(O,{type:"submit",className:"todo-button todo-button--primary",disabled:xe,children:xe?"Adding…":"Add category"})]}),e.jsx("ul",{className:"todo-categories__list",children:f.map(t=>e.jsxs("li",{className:"todo-categories__item",children:[e.jsxs("span",{children:[e.jsx("strong",{children:t.label})," ",e.jsx("small",{children:t.value})]}),e.jsx(O,{type:"button",variant:"outline",className:"todo-button todo-button--danger-solid",onClick:()=>void Xe(t.value),disabled:t.value===Fe,children:"Delete"})]},t.value))}),ve?e.jsx("p",{className:"todo-categories__feedback",children:ve}):null]})}):e.jsx(e.Fragment,{children:e.jsxs("main",{className:"todo-app__layout",children:[e.jsxs("section",{className:"todo-form","aria-labelledby":"todo-form-title",children:[e.jsxs("div",{className:"todo-form__header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"todo-form__eyebrow",children:v?"Edit":"Create"}),e.jsx("h2",{id:"todo-form-title",children:v?"Update task":"New task"})]}),e.jsx("div",{className:"todo-form__header-actions",children:e.jsx(O,{type:"button",variant:"outline",className:"todo-button todo-button--outline",onClick:()=>void M(),disabled:N,children:N?"Syncing…":"Refresh"})})]}),v?e.jsxs("p",{className:"todo-form__notice",children:["Editing task #",v]}):null,e.jsxs("form",{className:"todo-form__body",onSubmit:Ke,children:[e.jsxs("label",{className:"todo-form__field",htmlFor:"task-name",children:[e.jsx("span",{children:"Name"}),e.jsx("input",{id:"task-name",type:"text",value:c.name,onChange:t=>R("name",t.target.value),placeholder:"Write the task title",required:!0})]}),e.jsxs("label",{className:"todo-form__field",htmlFor:"task-description",children:[e.jsxs("span",{children:["Description ",e.jsx("span",{className:"todo-form__optional",children:"(optional)"})]}),e.jsx("textarea",{id:"task-description",value:c.description,onChange:t=>R("description",t.target.value),rows:3})]}),e.jsxs("div",{className:"todo-form__grid",children:[e.jsxs("label",{className:"todo-form__field",htmlFor:"task-start",children:[e.jsx("span",{children:"Start date"}),e.jsx("input",{id:"task-start",type:"date",value:c.startDate,onChange:t=>R("startDate",t.target.value)})]}),e.jsxs("label",{className:"todo-form__field",htmlFor:"task-due",children:[e.jsx("span",{children:"Due date"}),e.jsx("input",{id:"task-due",type:"date",value:c.dueDate,onChange:t=>R("dueDate",t.target.value)})]})]}),e.jsxs("label",{className:"todo-form__field",htmlFor:"task-category",children:[e.jsx("span",{children:"Category"}),e.jsx("select",{id:"task-category",value:c.category,onChange:t=>R("category",t.target.value),children:f.length===0?e.jsx("option",{value:c.category,children:ae[c.category]??c.category}):f.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("label",{className:"todo-form__field todo-form__field--inline",htmlFor:"task-completed",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Status"}),e.jsx("p",{children:"Is the task complete?"})]}),e.jsx("input",{id:"task-completed",type:"checkbox",checked:c.isCompleted,onChange:t=>R("isCompleted",t.target.checked)})]}),e.jsxs("div",{className:"todo-form__actions",children:[e.jsx(O,{type:"button",variant:"outline",className:"todo-button todo-button--outline",onClick:Ge,children:v?"Cancel edit":"Clear"}),e.jsx(O,{type:"submit",className:"todo-button todo-button--primary",disabled:b,children:b?"Saving…":v?"Save changes":"Save"})]}),H?e.jsx("p",{className:"todo-form__feedback",children:H}):null]})]}),e.jsxs("section",{className:"todo-list","aria-live":"polite","aria-busy":N,children:[e.jsx("header",{className:"todo-list__header",children:e.jsxs("div",{className:"todo-list__header-actions",children:[e.jsxs("label",{className:"todo-list__toggle",htmlFor:"toggle-show-blocked",children:[e.jsxs("div",{className:"todo-list__toggle-copy",children:[e.jsx("span",{children:"Show blocked tasks"}),e.jsx("p",{children:"Tasks that cannot be started yet"})]}),e.jsx("input",{id:"toggle-show-blocked",type:"checkbox",role:"switch","aria-checked":d,checked:d,onChange:t=>x(t.target.checked)})]}),e.jsxs("label",{className:"todo-list__toggle",htmlFor:"toggle-show-completed",children:[e.jsxs("div",{className:"todo-list__toggle-copy",children:[e.jsx("span",{children:"Show completed tasks"}),e.jsx("p",{children:"Tasks done"})]}),e.jsx("input",{id:"toggle-show-completed",type:"checkbox",role:"switch","aria-checked":m,checked:m,onChange:t=>w(t.target.checked)})]}),e.jsxs("dl",{className:"todo-list__stats",children:[e.jsxs("div",{className:"todo-list__stats-item todo-list__stats-item--blocked",children:[e.jsx("dt",{children:"Blocked"}),e.jsx("dd",{children:ce.blocked})]}),e.jsxs("div",{className:"todo-list__stats-item todo-list__stats-item--active",children:[e.jsx("dt",{children:"Active"}),e.jsx("dd",{children:ce.ready})]}),e.jsxs("div",{className:"todo-list__stats-item todo-list__stats-item--overdue",children:[e.jsx("dt",{children:"Overdue"}),e.jsx("dd",{children:ce.overdue})]})]}),e.jsx(O,{type:"button",variant:"outline",className:"todo-button todo-button--danger",onClick:()=>void We(),disabled:Z||Ze===0,children:Z?"Deleting…":"Delete selected"}),_e?e.jsx("p",{className:"todo-list__feedback",role:"status",children:_e}):null]})}),N?e.jsx("p",{className:"todo-list__status",children:"Loading tasks…"}):T?e.jsxs("div",{className:"todo-list__status todo-list__status--error",children:[e.jsx("p",{children:T}),e.jsx(O,{type:"button",size:"sm",className:"todo-button todo-button--outline todo-button--compact",onClick:()=>void M(),children:"Try again"})]}):o.length===0?e.jsx("div",{className:"todo-list__status",children:e.jsx("p",{children:"No tasks yet. Save your first task on the left."})}):e.jsx("div",{className:"todo-list__table-wrapper",children:e.jsxs("table",{className:"todo-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"todo-table__select-header",children:"Select"}),e.jsx("th",{scope:"col","aria-sort":oe("status"),children:ne("status","Status")}),e.jsx("th",{scope:"col",children:"Task"}),e.jsx("th",{scope:"col","aria-sort":oe("category"),children:ne("category","Category")}),e.jsx("th",{scope:"col",children:"Days left"}),e.jsx("th",{scope:"col","aria-sort":oe("start_date"),children:ne("start_date","Start date")}),e.jsx("th",{scope:"col","aria-sort":oe("due_date"),children:ne("due_date","Due date")})]})}),e.jsx("tbody",{children:qe.map(t=>{const a=me(t),n=`todo-status${a.modifier?` ${a.modifier}`:""}`,l=ct(t.due_date),r=["todo-table__due-offset"];l<0?r.push("todo-table__due-offset--overdue"):l===0?r.push("todo-table__due-offset--today"):r.push("todo-table__due-offset--upcoming");const g=["todo-table__row"];return $e(t.due_date,t.is_completed)&&g.push("todo-table__row--overdue"),v===t.id&&g.push("todo-table__row--selected"),e.jsxs("tr",{className:g.join(" "),onClick:()=>De(t),onKeyDown:u=>Ye(u,t),tabIndex:0,children:[e.jsx("td",{className:"todo-table__cell todo-table__cell--select",children:e.jsx("input",{type:"checkbox",className:"todo-table__select-input","aria-label":`Select task ${t.name}`,checked:W.has(t.id),onChange:u=>Ve(t.id,u.target.checked),onClick:u=>u.stopPropagation()})}),e.jsx("td",{className:"todo-table__cell todo-table__cell--status",children:e.jsx("span",{className:n,children:a.label})}),e.jsx("td",{className:"todo-table__cell todo-table__task",children:e.jsx("span",{className:"todo-table__task-name",children:t.name})}),e.jsx("td",{className:"todo-table__cell",children:e.jsx("span",{className:"todo-table__chip",children:ae[t.category]??(t.category||"Uncategorized")})}),e.jsx("td",{className:"todo-table__cell todo-table__cell--due-offset",children:e.jsx("span",{className:r.join(" "),children:it(l)})}),e.jsx("td",{className:"todo-table__cell todo-table__cell--date",children:Le(t.start_date)}),e.jsx("td",{className:"todo-table__cell todo-table__cell--date",children:e.jsx("span",{className:"todo-table__date-value",children:Le(t.due_date)})})]},t.id)})})]})}),j?e.jsxs("p",{className:"todo-list__synced",children:["Last synced ",j.toLocaleTimeString()]}):null]})]})}):e.jsx("section",{className:"todo-empty","aria-live":"polite",children:e.jsxs("div",{className:"todo-empty__panel",children:[e.jsx("h3",{children:"Welcome"}),e.jsx("p",{children:"Use the Login button above to access and manage your personal task board."})]})})]})},Ue=document.getElementById("root");if(!Ue)throw new Error("Root element #root not found");tt.createRoot(Ue).render(e.jsx(st.StrictMode,{children:e.jsx(dt,{})}));
