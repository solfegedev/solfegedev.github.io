import"./index-CvrIQurp.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as _}from"./api-CH_Pe6Vg.js";const N=()=>{const[r,p]=React.useState(null),[x,b]=React.useState(!0),[o,h]=React.useState(null);React.useEffect(()=>{(async()=>{try{const a=await fetch(`${_}/football/cross-table`);if(!a.ok)throw new Error("Failed to fetch cross table data");const t=await a.json();p(t)}catch(a){h(a instanceof Error?a.message:"Unknown error")}finally{b(!1)}})()},[]);const f=(s,a)=>{if(r)return r.matches.find(t=>t.home_team_id===s&&t.away_team_id===a)},g=(s,a)=>{const t=new Date(s);if(a){const i=new Date,n=t.getTime()-i.getTime();if(n>0){const m=Math.floor(n/864e5),j=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),w=Math.floor(n%(1e3*60*60)/(1e3*60));let c="";return m>0&&(c+=`${m}d `),c+=`${j}h${w.toString().padStart(2,"0")}`,c}}const l=t.getDate(),d=t.toLocaleString("en-GB",{month:"short"});return`${l} ${d}`},u=r?Math.max(...r.teams.map(s=>s.played),0):0;return e.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_rgba(79,70,229,0.7),_transparent_55%),_#050816] text-slate-100 flex items-center justify-center py-8 md:px-6 md:py-10 font-sans",children:e.jsxs("div",{className:"w-full max-w-[100vw] md:max-w-[85vw] rounded-[1rem] border border-slate-400/20 bg-slate-900/70 py-4 md:p-10 shadow-[0_25px_60px_rgba(2,6,23,0.8)] backdrop-blur-[18px]",children:[e.jsx("header",{className:"mb-4 flex flex-col gap-3 text-left",children:e.jsx("h1",{className:"text-2xl px-4 md:text-4xl font-semibold leading-tight text-white",children:"Premier League Table"})}),x?e.jsx("div",{className:"flex py-20 items-center justify-center rounded-md md:rounded-xl border border-slate-700/50 bg-slate-800/20",children:e.jsx("div",{className:"text-xl font-semibold text-slate-400 animate-pulse",children:"Loading cross table..."})}):o?e.jsx("div",{className:"flex py-20 items-center justify-center rounded-md md:rounded-xl border border-red-500/20 bg-red-900/10",children:e.jsxs("div",{className:"text-xl font-semibold text-red-400 text-center",children:[e.jsx("p",{children:"Error loading data"}),e.jsx("p",{className:"text-sm font-normal mt-2 text-red-300/80",children:o})]})}):!r||r.teams.length===0?e.jsx("div",{className:"flex py-20 items-center justify-center rounded-md md:rounded-xl border border-slate-700/50 bg-slate-800/20",children:e.jsx("div",{className:"text-xl font-semibold text-slate-400",children:"No data available."})}):e.jsx("div",{className:"w-full overflow-x-auto rounded-md md:rounded-xl border border-slate-700/50 bg-slate-950/30",children:e.jsxs("table",{className:"min-w-full border-collapse text-[10px] md:text-xs text-slate-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"sticky left-0 z-20 bg-indigo-900 border-b border-slate-700 p-2 min-w-[40px]"}),e.jsx("th",{className:"bg-indigo-900 border-b border-r border-slate-700 p-2 text-slate-200 font-bold text-left min-w-[80px] md:min-w-[120px]",children:"Home \\ Away"}),r.teams.map(s=>e.jsx("th",{className:"bg-indigo-900/80 border-b border-slate-700 p-2 text-slate-200 font-bold text-center min-w-[40px] md:min-w-[60px]",title:s.name,children:s.icon_url?e.jsx("img",{src:s.icon_url,alt:s.name,className:"w-6 h-6 mx-auto object-contain"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden md:inline",children:s.name.substring(0,3).toUpperCase()}),e.jsx("span",{className:"md:hidden",children:s.name.substring(0,2).toUpperCase()})]})},s.id)),[{label:"Pts"},{label:"P"},{label:"GD"},{label:"W"},{label:"D"},{label:"L"},{label:"F"},{label:"A"}].map(s=>e.jsx("th",{className:"bg-indigo-900/80 border-slate-700 text-indigo-200 border-b p-2 font-bold text-center min-w-[30px]",children:s.label},s.label))]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:r.teams.map(s=>e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-slate-900 border-slate-700 p-2 shadow-[2px_0_5px_rgba(0,0,0,0.3)] min-w-[40px]",children:s.icon_url&&e.jsx("img",{src:s.icon_url,alt:"",className:"w-5 h-5 object-contain mx-auto"})}),e.jsx("th",{className:"bg-slate-900 border-r border-slate-700 p-2 text-slate-200 font-semibold text-left whitespace-nowrap min-w-[80px] md:min-w-[120px]",children:e.jsx("span",{className:"truncate max-w-[6rem] md:max-w-none",title:s.name,children:s.name})}),r.teams.map(a=>{if(s.id===a.id)return e.jsx("td",{className:"bg-slate-800/50 border-r border-slate-800"},a.id);const t=f(s.id,a.id);return e.jsx("td",{className:"border-r border-slate-800/50 p-1 md:p-2 text-center align-middle h-10 md:h-12",children:t?t.home_score!==null&&t.away_score!==null?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`font-bold text-lg ${(r.weeks_in_progress||[]).includes(t.match_week)?"text-orange-600":"text-indigo-300"}`,children:[t.home_score,e.jsx("span",{className:"text-slate-600 mx-0.5",children:"-"}),t.away_score]}),t.period!=="FullTime"&&t.period!=="PreMatch"&&e.jsx("span",{className:"text-[8px] text-red-500 font-bold animate-pulse -mt-1 uppercase",children:t.period==="MidSecondHalf"?"2nd":t.period==="MidFirstHalf"?"1st":t.period==="HalfTime"?"HT":"LIVE"})]}):e.jsx("div",{className:`text-[10px] md:text-xs leading-tight ${(r.weeks_in_progress||[]).includes(t.match_week)?"text-yellow-300 font-bold":t.match_week===r.next_week?"text-green-500 font-bold":"text-slate-500"}`,children:g(t.kickoff,(r.weeks_in_progress||[]).includes(t.match_week)||r.next_week===t.match_week)}):e.jsx("span",{className:"text-slate-700",children:"-"})},a.id)}),[{key:"points",className:"font-bold text-lg"},{key:"played",className:a=>a.played<u?"text-yellow-500":""},{key:"goal_difference",className:"font-medium",format:a=>a>0?`+${a}`:a},{key:"won"},{key:"drawn"},{key:"lost"},{key:"goals_for"},{key:"goals_against"}].map(({key:a,className:t,format:l})=>{const d=s[a],i=typeof t=="function"?t(s):t||"";return e.jsx("td",{className:`bg-indigo-900/80 border-r border-slate-800/50 p-1 md:p-2 text-center ${i}`,children:l?l(d):d},a)})]},s.id))})]})}),r&&r.teams.length>0&&!x&&!o&&e.jsxs("footer",{className:"mt-8 flex flex-col md:flex-row gap-4 md:gap-8 text-[10px] md:text-xs text-slate-400 border-t border-slate-800 pt-6 px-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-600 shadow-[0_0_8px_rgba(234,88,12,0.4)]"}),e.jsx("span",{children:"result for this week"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-300 shadow-[0_0_8px_rgba(253,224,71,0.4)]"}),e.jsx("span",{children:"time before kick-off this week"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]"}),e.jsx("span",{children:"time before kick-off next week"})]})]})]})})};document.body.classList.add("football-page");ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(N,{})}));
