import"./modulepreload-polyfill-B5Qt9EMX.js";import{r,j as e,R as L,a as M}from"./client-BsyqJ1xH.js";import{B as O}from"./button-BZSrPANe.js";/* empty css              */const N={Hitchin:{lat:51.9666095,lng:-.2395976},Chesterfield:{lat:53.2352134,lng:-1.4264097},Royston:{lat:52.0472741,lng:-.0246467}},f="petrol:fuelType",S="petrol:mpg",b="petrol:miles",v="petrol:costPerLitre",p=(a,d)=>{try{const t=localStorage.getItem(a);if(t!==null)return t}catch{}return d},k=()=>{const[a,d]=r.useState(()=>p(S,"57")),[t,y]=r.useState(()=>p(b,"127")),[c,P]=r.useState(()=>p(v,"137")),[i,_]=r.useState(()=>p(f,"Petrol")==="Diesel"?"Diesel":"Petrol"),[h,x]=r.useState(""),[n,g]=r.useState(null);r.useEffect(()=>{try{localStorage.setItem(f,i),localStorage.setItem(S,a),localStorage.setItem(b,t),localStorage.setItem(v,c)}catch{}},[i,a,t,c]);const R=s=>{s.preventDefault();const l=parseFloat(a),o=parseFloat(t),u=parseFloat(c);if(l<=0||o<0||u<0||Number.isNaN(l)||Number.isNaN(o)||Number.isNaN(u)){x("Please enter positive values for MPG and non-negative values for miles and cost."),g(null);return}const j=u+.9,m=o/l*4.54609,F=m*j/100,w=m*j/o;x(""),g({cost:F,litres:m,costPerMilePence:w})},T=s=>{_(s.target.checked?"Diesel":"Petrol")},C=s=>{const l=N[s];if(!l)throw new Error(`Town ${s} is not configured in GPS_COORDS`);return`https://www.petrolprices.com/app/map?${new URLSearchParams([["fuelType",i==="Petrol"?"2":"5"],["brandType","0"],["resultLimit","0"],["offset","0"],["sortType","price"],["lat",l.lat.toString()],["lng",l.lng.toString()],["z","10"],["d","5"]]).toString()}`};return e.jsxs("div",{className:"petrol-page",children:[e.jsxs("header",{className:"petrol-hero",children:[e.jsx("h1",{children:"Fuel calculator"}),e.jsx("p",{children:"Estimate how much a trip costs"})]}),e.jsxs("div",{className:"petrol-layout",children:[e.jsxs("section",{className:"petrol-card petrol-form","aria-label":"Fuel calculator",children:[e.jsx("h2",{children:"Trip details"}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("label",{className:"input-group",htmlFor:"mpg",children:[e.jsx("span",{children:"Consumption (mpg UK)"}),e.jsx("input",{id:"mpg",type:"number",min:"0",step:"1",value:a,onChange:s=>d(s.target.value),required:!0})]}),e.jsxs("label",{className:"input-group",htmlFor:"miles",children:[e.jsx("span",{children:"Distance (miles)"}),e.jsx("input",{id:"miles",type:"number",min:"0",step:"1",value:t,onChange:s=>y(s.target.value),required:!0})]}),e.jsxs("label",{className:"input-group",htmlFor:"cost",children:[e.jsx("span",{children:"Cost per Litre (pence)"}),e.jsxs("div",{className:"input-with-suffix",children:[e.jsx("input",{id:"cost",type:"number",min:"0",step:"1",value:c,onChange:s=>{P(s.target.value)},required:!0}),e.jsx("span",{className:"input-with-suffix__suffix","aria-hidden":"true","data-testid":"cost-suffix",children:".9"})]})]}),e.jsx(O,{type:"submit",className:"petrol-cta",children:"Calculate cost"})]}),h&&e.jsx("div",{className:"result","aria-live":"polite",children:h}),e.jsxs("div",{className:"petrol-result",children:[e.jsxs("div",{children:[e.jsx("p",{className:"label",children:"Cost"}),e.jsx("p",{className:"value",children:n?`£${n.cost.toFixed(2)}`:"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"label",children:"Quantity"}),e.jsx("p",{className:"value",children:n?`${n.litres.toFixed(1)} L`:"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"label",children:"Cost per mile"}),e.jsx("p",{className:"value",children:n?`${n.costPerMilePence.toFixed(1)} p`:"—"})]})]})]}),e.jsxs("section",{className:"petrol-card","aria-label":"price map links",children:[e.jsx("h2",{children:"Links"}),e.jsxs("div",{className:"toggle-row",children:[e.jsx("div",{children:e.jsx("p",{className:"toggle-row__label",children:"Fuel type"})}),e.jsxs("label",{className:"switch-toggle",children:[e.jsx("input",{id:"fuel-type",type:"checkbox",checked:i==="Diesel",onChange:T,"aria-label":"Toggle fuel type between Petrol and Diesel"}),e.jsx("span",{className:"slider","aria-hidden":"true"})]}),e.jsx("span",{className:"switch-label",children:i})]}),e.jsx("div",{className:"petrol-links","aria-label":"External price map links",children:Object.keys(N).map(s=>e.jsx("a",{className:"petrol-link-card",href:C(s),target:"_blank",rel:"noopener noreferrer",children:e.jsxs("div",{children:["Prices for ",i," in ",s]})},s))})]})]})]})},E=document.getElementById("root");if(!E)throw new Error("Root element #root not found");L.createRoot(E).render(e.jsx(M.StrictMode,{children:e.jsx(k,{})}));
