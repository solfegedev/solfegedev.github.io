import"./index-Ch1IFy9t.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as ie}from"./api-CH_Pe6Vg.js";import{S as de,C as ce}from"./search-XMVjuEej.js";import{X as ue}from"./x-BS-d4QNZ.js";import{c as me}from"./createLucideIcon-DtX1aPOG.js";import{D as xe,U as pe,P as he,G as ge}from"./upload-FXP4Asuw.js";import{P as fe}from"./plus-DDkdk0pc.js";import{T as be}from"./trash-2-DQbJ9aIh.js";import{C as je}from"./check-CWX8rMms.js";const ve=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ye=me("folder",ve),G=`${ie}/bookmarks`,q=async s=>{if(s.ok)return s.status===204?null:s.json();throw await s.json().catch(()=>({detail:s.statusText}))},f={get:(s,r)=>fetch(`${G}${s}`,{headers:r?{Authorization:`Bearer ${r}`}:{}}).then(q),post:(s,r,n)=>fetch(`${G}${s}`,{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify(r)}).then(q),put:(s,r,n)=>fetch(`${G}${s}`,{method:"PUT",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify(r)}).then(q),delete:(s,r)=>fetch(`${G}${s}`,{method:"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}).then(q)},R=React.forwardRef(({variant:s="default",className:r="",...n},d)=>{const x="w-full bg-slate-950 border border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",i={default:"px-4 py-2",small:"px-3 py-1.5 text-sm"};return e.jsx("input",{ref:d,className:`${x} ${i[s]} ${r}`,...n})});R.displayName="Input";const b=React.forwardRef(({variant:s="primary",className:r="",children:n,...d},x)=>{const i="transition-colors rounded-lg font-bold",c={primary:"bg-gradient-to-r from-indigo-500 to-violet-500 text-white py-2 px-8 shadow-[0_15px_35px_rgba(108,99,255,0.35)] hover:from-indigo-400 hover:to-violet-400 rounded-full uppercase tracking-[0.08em]",secondary:"bg-slate-700 hover:bg-slate-600 text-white py-2 px-8 h-[42px]",icon:"text-slate-500 hover:text-blue-400 p-1 transition-all",danger:"text-rose-500 hover:text-rose-400 p-2 hover:bg-rose-500/10 rounded-lg","icon-danger":"text-red-400 hover:text-red-300 p-1"};return e.jsx("button",{ref:x,className:`${i} ${c[s]} ${r}`,...d,children:n})});b.displayName="Button";const E=({label:s,htmlFor:r,hint:n,id:d,...x})=>{const i=d||r;return e.jsxs("div",{children:[e.jsxs("label",{htmlFor:i,className:"block text-sm font-medium text-slate-400 mb-1",children:[s," ",n&&e.jsx("span",{className:"text-slate-500",children:n})]}),e.jsx(R,{id:i,...x})]})},X=React.forwardRef(({className:s="",children:r,...n},d)=>e.jsx("select",{ref:d,className:`w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${s}`,...n,children:r}));X.displayName="Select";const Z=({className:s})=>e.jsx(be,{className:`w-5 h-5 ${s||""}`}),Ne=({className:s})=>e.jsx(he,{className:`w-4 h-4 ${s||""}`}),we=({className:s})=>e.jsx(je,{className:`w-5 h-5 ${s||""}`}),H=({className:s})=>e.jsx(ue,{className:`w-4 h-4 ${s||""}`}),ke=({className:s})=>e.jsx(de,{className:`w-4 h-4 ${s||""}`}),Se=({className:s})=>e.jsx(ye,{className:`w-5 h-5 ${s||""}`}),Re=({className:s})=>e.jsx(ce,{className:`w-5 h-5 ${s||""}`}),$e=({className:s})=>e.jsx(ge,{className:`w-5 h-5 ${s||""}`}),Ce=({className:s})=>e.jsx(xe,{className:`w-5 h-5 ${s||""}`}),Ue=({className:s})=>e.jsx(pe,{className:`w-5 h-5 ${s||""}`}),_e=({className:s})=>e.jsx(fe,{className:`w-4 h-4 ${s||""}`}),De=({onLogin:s})=>{const[r,n]=React.useState(""),[d,x]=React.useState(""),[i,c]=React.useState(null),[h,j]=React.useState(!1),N=async g=>{g.preventDefault(),j(!0),c(null);try{const v=await f.post("/login",{email:r,password:d});s(v)}catch(v){c(v.detail||"Login failed")}finally{j(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-6 bg-slate-900 rounded-xl border border-slate-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Login to Bookmarks"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx(E,{label:"Email",type:"email",required:!0,"data-testid":"login-email",value:r,onChange:g=>n(g.target.value)}),e.jsx(E,{label:"Password",type:"password",required:!0,"data-testid":"login-password",value:d,onChange:g=>x(g.target.value)}),i&&e.jsx("p",{className:"text-red-400 text-sm",children:i}),e.jsx(b,{type:"submit",disabled:h,"data-testid":"login-submit",variant:"primary",className:"w-full disabled:opacity-50",children:h?"Logging in...":"Login"})]})]})},Ie=({auth:s})=>{const[r,n]=React.useState([]),[d,x]=React.useState(!0),[i,c]=React.useState(null),[h,j]=React.useState(null),[N,g]=React.useState(""),[v,C]=React.useState(""),[U,_]=React.useState(""),[D,I]=React.useState(null),[F,w]=React.useState(!1),[B,k]=React.useState(null),[T,O]=React.useState(""),[M,A]=React.useState(""),[a,p]=React.useState(""),[S,V]=React.useState(null),[L,J]=React.useState(""),Y=async()=>{try{const t=await f.get("/",s.access_token);n(t)}catch(t){console.error("Failed to fetch bookmarks",t)}finally{x(!1)}};React.useEffect(()=>{Y()},[s]);const K=async t=>{t.preventDefault(),I(null);try{const o=await f.post("/",{title:N,url:v,group:U.trim()||null},s.access_token);n([...r,o]),g(""),C(""),_(""),w(!1),o.group&&V(o.group)}catch(o){I(o.detail||"Failed to add bookmark")}},Q=async t=>{if(confirm("Are you sure you want to delete this bookmark?"))try{await f.delete(`/${t}`,s.access_token),n(r.filter(o=>o.id!==t)),k(null)}catch(o){console.error("Failed to delete bookmark",o)}},W=t=>{k(t.id),O(t.title),A(t.url),p(t.group||"")},ee=async t=>{try{const o={title:T,url:M,group:a.trim()||null},l=await f.put(`/${t}`,o,s.access_token);n(r.map(u=>u.id===t?l:u)),k(null),o.group&&V(o.group)}catch(o){console.error("Failed to update bookmark",o)}},te=t=>{c(t)},se=(t,o)=>{if(t.preventDefault(),i===null||i===o)return;const l=r.findIndex(y=>y.id===i),u=r.findIndex(y=>y.id===o);if(l===-1||u===-1)return;const m=[...r],[$]=m.splice(l,1);m.splice(u,0,$),m.map(y=>y.id).join(",")!==r.map(y=>y.id).join(",")&&n(m)},ae=async()=>{if(i!==null){c(null);try{const t={download_date:new Date().toISOString(),groups:Object.entries(r.reduce((o,l)=>{const u=l.group||"Un-grouped";return o[u]||(o[u]=[]),o[u].push({title:l.title,url:l.url}),o},{})).map(([o,l])=>({name:o,items:l}))};await f.post("/bulk",t,s.access_token)}catch(t){console.error("Failed to save reordered bookmarks",t),Y()}}},P=React.useMemo(()=>L.trim()?new Fuse(r,{keys:["title","url","group"],threshold:.4}).search(L).map(o=>o.item):r,[r,L]).reduce((t,o)=>{const l=o.group||"Un-grouped";return t[l]||(t[l]=[]),t[l].push(o),t},{}),z=Object.keys(P).sort((t,o)=>{if(t==="Un-grouped")return 1;if(o==="Un-grouped")return-1;const l=u=>Math.min(...P[u].map(m=>r.findIndex($=>$.id===m.id)));return l(t)-l(o)}),re=t=>{V(S===t?null:t)},le=async()=>{try{const t=await f.get("/export",s.access_token),o=jsyaml.dump(t),l=new Blob([o],{type:"text/yaml"}),u=URL.createObjectURL(l),m=document.createElement("a");m.href=u,m.download=`bookmarks_${new Date().toISOString().split("T")[0]}.yaml`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(u)}catch(t){console.error("Failed to export bookmarks",t)}},oe=async t=>{const o=t.target.files?.[0];if(!o)return;const l=new FileReader;l.onload=async u=>{try{const m=u.target?.result,$=jsyaml.load(m);if(!$||!Array.isArray($.groups))throw new Error("Invalid format: expected 'groups' array");if(confirm("This will replace ALL your current bookmarks. Continue?")){const y=await f.post("/bulk",$,s.access_token);n(y)}}catch(m){alert("Failed to upload bookmarks: "+m.message)}},l.readAsText(o),t.target.value=""},ne=(t,o=!1)=>e.jsx("div",{"data-testid":`bookmark-row-${t.id}`,draggable:h===t.id&&B!==t.id,onDragStart:()=>te(t.id),onDragOver:l=>se(l,t.id),onDragEnd:()=>{ae(),j(null)},className:`group flex items-center justify-between py-0 hover:bg-slate-800/40 transition-colors min-h-[2rem] px-4 ${i===t.id?"opacity-20 bg-blue-500/10":""} ${h===t.id?"select-none":""}`,children:B===t.id?e.jsxs("div",{className:"flex-1 flex flex-col gap-2","data-testid":"edit-bookmark-form",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[e.jsx(R,{type:"text",placeholder:"Title","data-testid":"edit-bookmark-title",variant:"small",value:T,onChange:l=>O(l.target.value),autoFocus:!0}),e.jsx(R,{type:"text",placeholder:"Group","data-testid":"edit-bookmark-group",variant:"small",value:a,onChange:l=>p(l.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("textarea",{placeholder:"URL","data-testid":"edit-bookmark-url",className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none overflow-hidden min-h-[38px]",value:M,ref:l=>{l&&(l.style.height="auto",l.style.height=l.scrollHeight+"px")},onChange:l=>{A(l.target.value),l.target.style.height="auto",l.target.style.height=l.target.scrollHeight+"px"},onFocus:l=>{l.target.select(),l.target.style.height="auto",l.target.style.height=l.target.scrollHeight+"px"}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{onClick:()=>ee(t.id),"data-testid":"save-edit-button",variant:"icon",className:"text-blue-400 hover:text-blue-300",title:"Save",children:e.jsx(we,{})}),e.jsx(b,{onClick:()=>Q(t.id),"data-testid":"delete-bookmark-button",variant:"icon-danger",title:"Delete",children:e.jsx(Z,{})}),e.jsx(b,{onClick:()=>k(null),"data-testid":"cancel-edit-button",variant:"icon",className:"text-slate-500 hover:text-slate-300",title:"Cancel",children:e.jsx(H,{className:"w-5 h-5"})})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",draggable:!1,"data-testid":`bookmark-link-${t.id}`,className:"flex-1 font-medium text-slate-300 hover:text-blue-400 transition-colors truncate mr-4",children:t.title}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{onClick:()=>W(t),"data-testid":`edit-bookmark-button-${t.id}`,variant:"icon",title:"Edit",children:e.jsx(Ne,{})}),e.jsx("div",{className:"p-1 cursor-grab active:cursor-grabbing text-slate-600 hover:text-blue-400 transition-colors",title:"Hold to move",onMouseDown:()=>j(t.id),onMouseUp:()=>j(null),children:e.jsx($e,{className:"w-4 h-4"})})]})]})},t.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center border-b border-slate-800 pb-4 gap-4",children:e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(R,{type:"text",placeholder:"Search bookmarks...",className:"w-full bg-slate-900 pl-9 pr-4",variant:"small",value:L,onChange:t=>J(t.target.value),"data-testid":"search-input"}),e.jsx(ke,{className:"text-slate-500 absolute left-3 top-1/2 -translate-y-1/2"}),L&&e.jsx("button",{onClick:()=>J(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white",children:e.jsx(H,{})})]})}),F&&e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-blue-500/50 shadow-lg mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-bold text-sm",children:"New Bookmark"}),e.jsx("button",{onClick:()=>w(!1),className:"text-slate-500 hover:text-white",children:e.jsx(H,{})})]}),e.jsxs("form",{onSubmit:K,className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(R,{type:"text",placeholder:"Title",required:!0,autoFocus:!0,"data-testid":"new-bookmark-title",variant:"small",value:N,onChange:t=>g(t.target.value)}),e.jsx(R,{type:"url",placeholder:"URL",required:!0,"data-testid":"new-bookmark-url",variant:"small",value:v,onChange:t=>C(t.target.value)}),e.jsx(R,{type:"text",placeholder:"Group (Optional)","data-testid":"new-bookmark-group",variant:"small",value:U,onChange:t=>_(t.target.value)}),e.jsx(b,{type:"submit","data-testid":"save-bookmark-button",variant:"primary",className:"py-1.5 text-sm px-4",children:"Save"}),D&&e.jsx("p",{className:"text-red-400 text-xs md:col-span-4",children:D})]})]}),d?e.jsx("p",{className:"text-slate-500 italic","data-testid":"loading-indicator",children:"Loading..."}):r.length===0?e.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-8 text-center text-slate-500 italic","data-testid":"no-bookmarks-message",children:"No bookmarks yet."}):e.jsx("div",{className:"space-y-1",children:z.map(t=>e.jsxs("div",{"data-testid":`group-container-${t}`,className:"bg-slate-900 rounded-sm border border-slate-800 overflow-hidden shadow-xl transition-all",children:[t!=="Un-grouped"?e.jsxs("button",{onClick:()=>re(t),"data-testid":`group-header-${t}`,className:`w-full flex items-center justify-between px-4 py-1 bg-slate-800/40 hover:bg-slate-800/60 transition-colors text-left border-l-4 ${S===t?"border-blue-500":"border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:`transition-colors ${S===t?"text-blue-400":"text-slate-500"}`}),e.jsx("span",{className:"font-bold text-lg text-slate-100",children:t}),e.jsx("span",{className:"text-xs font-bold text-slate-400 bg-slate-950/50 px-2 py-0.5 rounded-full border border-slate-800/50",children:P[t].length})]}),e.jsx(Re,{className:`text-slate-500 transition-transform duration-300 ${S===t?"rotate-180":""}`})]}):z.length>1?e.jsx("div",{className:"px-4 py-2 bg-slate-800/20 border-b border-slate-800/50",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Other / Un-grouped"})}):null,(S===t||t==="Un-grouped"||L.trim()!=="")&&e.jsx("div",{className:"divide-y divide-slate-800/50","data-testid":`group-content-${t}`,children:P[t].map(o=>ne(o,t!=="Un-grouped"||z.length>1))})]},t))}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto justify-end",children:[e.jsx("button",{onClick:le,title:"Download YAML",className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ce,{})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".yaml,.yml",onChange:oe,className:"absolute inset-0 opacity-0 cursor-pointer",title:"Upload YAML"}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ue,{})})]}),!F&&e.jsxs(b,{onClick:()=>w(!0),"data-testid":"add-bookmark-button",variant:"primary",className:"flex items-center gap-1.5 px-3 py-1.5 text-sm",children:[e.jsx(_e,{}),"Add"]})]})]})},Le=({auth:s})=>{const[r,n]=React.useState([]),[d,x]=React.useState(!0),[i,c]=React.useState(null),[h,j]=React.useState(""),[N,g]=React.useState(""),[v,C]=React.useState(""),[U,_]=React.useState(""),[D,I]=React.useState("user"),[F,w]=React.useState(null),B=async()=>{try{const a=await f.get("/admin/users",s.access_token);n(a)}catch(a){console.error("Failed to fetch users",a)}finally{x(!1)}};React.useEffect(()=>{B()},[s]);const k=()=>{c(null),j(""),g(""),C(""),_(""),I("user"),w(null)},T=a=>{c(a),j(a.email),g(""),C(a.first_name??""),_(a.last_name??""),I(a.role),w(null)},O=async a=>{a.preventDefault(),w(null);try{if(i){const p=await f.put(`/admin/users/${i.id}`,{email:h,password:N||void 0,role:D,first_name:v,last_name:U},s.access_token);n(r.map(S=>S.id===i.id?p:S)),k()}else{const p=await f.post("/admin/users",{email:h,password:N,role:D,first_name:v,last_name:U},s.access_token);n([...r,p]),k()}}catch(p){w(p.detail||`Failed to ${i?"update":"add"} user`)}},M=async a=>{if(a===s.user.id){alert("You cannot delete yourself.");return}if(confirm("Are you sure you want to delete this user? All their bookmarks will be lost."))try{await f.delete(`/admin/users/${a}`,s.access_token),n(r.filter(p=>p.id!==a))}catch(p){console.error("Failed to delete user",p)}},A=a=>a?new Date(a).toLocaleString():"-";return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Edit User":"Add New User"}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsx(E,{label:"Email",htmlFor:"user-email",type:"email",required:!0,"data-testid":"admin-add-user-email",value:h,onChange:a=>j(a.target.value)}),e.jsx(E,{label:"Password",htmlFor:"user-password",hint:i?"(leave blank to keep current)":"",type:"password",required:!i,"data-testid":"admin-add-user-password",value:N,onChange:a=>g(a.target.value)}),e.jsx(E,{label:"First Name",htmlFor:"user-first-name",type:"text",required:!0,"data-testid":"admin-add-user-first-name",value:v,onChange:a=>C(a.target.value)}),e.jsx(E,{label:"Last Name",htmlFor:"user-last-name",type:"text",required:!0,"data-testid":"admin-add-user-last-name",value:U,onChange:a=>_(a.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-4 items-end",children:[e.jsxs("div",{className:"w-1/4",children:[e.jsx("label",{htmlFor:"user-role",className:"block text-sm text-slate-400 mb-1",children:"Role"}),e.jsxs(X,{id:"user-role","data-testid":"admin-add-user-role",value:D,onChange:a=>I(a.target.value),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),i&&e.jsx(b,{type:"button",onClick:k,variant:"secondary",children:"Cancel"}),e.jsx(b,{type:"submit","data-testid":"admin-add-user-submit",variant:"primary",className:"h-[42px]",children:i?"Update User":"Create User"})]})]}),F&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:F})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Management"}),d?e.jsx("p",{children:"Loading..."}):e.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-800 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left whitespace-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800/50 border-b border-slate-800",children:[e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase",children:"Updated At"}),e.jsx("th",{className:"px-6 py-3 font-bold text-sm uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:r.map(a=>e.jsxs("tr",{onClick:()=>T(a),className:`cursor-pointer transition-colors ${i?.id===a.id?"bg-blue-500/10 hover:bg-blue-500/20":"hover:bg-slate-800/30"}`,children:[e.jsx("td",{className:"px-6 py-4 text-slate-400 font-mono text-sm",children:a.id}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-slate-100",children:a.email}),(a.first_name||a.last_name)&&e.jsxs("span",{className:"text-xs text-slate-500",children:[a.first_name||""," ",a.last_name||""]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider ${a.role==="admin"?"bg-purple-500/10 text-purple-400 border border-purple-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"}`,children:a.role})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`flex items-center gap-1.5 text-xs font-medium ${a.is_active?"text-emerald-400":"text-rose-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),a.is_active?"Active":"Deactivated"]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-400 font-mono",children:A(a.last_login_at)}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-400 font-mono",children:A(a.updated_at)}),e.jsx("td",{className:"px-6 py-4 text-right",children:a.id!==s.user.id&&e.jsx(b,{onClick:p=>{p.stopPropagation(),M(a.id)},variant:"danger",title:"Delete User",children:e.jsx(Z,{})})})]},a.id))})]})})]})]})},Ee=()=>{const[s,r]=React.useState("login"),[n,d]=React.useState(null);React.useEffect(()=>{const c=localStorage.getItem("bookmarks_auth");if(c)try{const h=JSON.parse(c);d(h),r("dashboard")}catch{localStorage.removeItem("bookmarks_auth")}},[]);const x=()=>{d(null),localStorage.removeItem("bookmarks_auth"),r("login")},i=c=>{d(c),localStorage.setItem("bookmarks_auth",JSON.stringify(c)),r("dashboard")};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex flex-col",children:[e.jsx("header",{className:"border-b border-slate-800 bg-slate-900/50 backdrop-blur-md sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r(n?"dashboard":"login"),children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center font-bold",children:"B"}),e.jsx("span",{className:"font-bold text-xl tracking-tight hidden md:inline",children:"Bookmarks"})]})}),e.jsx("nav",{className:"flex items-center gap-4",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-slate-400 md:inline",children:[n.user.first_name," ",n.user.last_name]}),n.user.role==="admin"&&e.jsx("button",{onClick:()=>r(s==="admin"?"dashboard":"admin"),className:`text-sm font-medium transition-all px-3 py-1 rounded-full ${s==="admin"?"text-slate-300 hover:text-white hover:bg-slate-800":"bg-slate-600 text-white shadow-lg shadow-slate-900/20"}`,children:s==="admin"?"My Dashboard":"Manage Users"}),e.jsx("button",{onClick:x,className:"text-sm font-medium text-slate-300 hover:text-white transition-colors",children:"Logout"})]})})]})}),e.jsxs("main",{className:"flex-1 max-w-6xl w-full mx-auto px-4 py-8",children:[s==="login"&&e.jsx(De,{onLogin:i}),s==="dashboard"&&n&&e.jsx(Ie,{auth:n}),s==="admin"&&n&&n.user.role==="admin"&&e.jsx(Le,{auth:n})]})]})};ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(Ee,{})}));
