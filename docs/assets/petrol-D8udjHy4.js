import"./modulepreload-polyfill-B5Qt9EMX.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{B as w}from"./button-UTh2Cu_R.js";/* empty css              */const j={Hitchin:{lat:51.9666095,lng:-.2395976},Chesterfield:{lat:53.2352134,lng:-1.4264097},Royston:{lat:52.0472741,lng:-.0246467}},N="petrol:fuelType",f="petrol:mpg",S="petrol:miles",b="petrol:costPerLitre",o=(a,p)=>{try{const t=localStorage.getItem(a);if(t!==null)return t}catch{}return p},L=()=>{const[a,p]=React.useState(()=>o(f,"57")),[t,R]=React.useState(()=>o(S,"127")),[c,y]=React.useState(()=>o(b,"137")),[r,E]=React.useState(()=>o(N,"Petrol")==="Diesel"?"Diesel":"Petrol"),[m,h]=React.useState(""),[i,x]=React.useState(null);React.useEffect(()=>{try{localStorage.setItem(N,r),localStorage.setItem(f,a),localStorage.setItem(S,t),localStorage.setItem(b,c)}catch{}},[r,a,t,c]);const P=s=>{s.preventDefault();const l=parseFloat(a),n=parseFloat(t),d=parseFloat(c);if(l<=0||n<0||d<0||Number.isNaN(l)||Number.isNaN(n)||Number.isNaN(d)){h("Please enter positive values for MPG and non-negative values for miles and cost."),x(null);return}const g=d+.9,u=n/l*4.54609,C=u*g/100,F=u*g/n;h(""),x({cost:C,litres:u,costPerMilePence:F})},_=s=>{E(s.target.checked?"Diesel":"Petrol")},T=s=>{const l=j[s];if(!l)throw new Error(`Town ${s} is not configured in GPS_COORDS`);return`https://www.petrolprices.com/app/map?${new URLSearchParams([["fuelType",r==="Petrol"?"2":"5"],["brandType","0"],["resultLimit","0"],["offset","0"],["sortType","price"],["lat",l.lat.toString()],["lng",l.lng.toString()],["z","10"],["d","5"]]).toString()}`};return e.jsxs("div",{className:"petrol-page",children:[e.jsxs("header",{className:"petrol-hero",children:[e.jsx("h1",{children:"Fuel calculator"}),e.jsx("p",{children:"Estimate how much a trip costs"})]}),e.jsxs("div",{className:"petrol-layout",children:[e.jsxs("section",{className:"petrol-card petrol-form","aria-label":"Fuel calculator",children:[e.jsx("h2",{children:"Trip details"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("label",{className:"input-group",htmlFor:"mpg",children:[e.jsx("span",{children:"Consumption (mpg UK)"}),e.jsx("input",{id:"mpg",type:"number",min:"0",step:"1",value:a,onChange:s=>p(s.target.value),required:!0})]}),e.jsxs("label",{className:"input-group",htmlFor:"miles",children:[e.jsx("span",{children:"Distance (miles)"}),e.jsx("input",{id:"miles",type:"number",min:"0",step:"1",value:t,onChange:s=>R(s.target.value),required:!0})]}),e.jsxs("label",{className:"input-group",htmlFor:"cost",children:[e.jsx("span",{children:"Cost per Litre (pence)"}),e.jsxs("div",{className:"input-with-suffix",children:[e.jsx("input",{id:"cost",type:"number",min:"0",step:"1",value:c,onChange:s=>{y(s.target.value)},required:!0}),e.jsx("span",{className:"input-with-suffix__suffix","aria-hidden":"true","data-testid":"cost-suffix",children:".9"})]})]}),e.jsx(w,{type:"submit",className:"petrol-cta",children:"Calculate cost"})]}),m&&e.jsx("div",{className:"result","aria-live":"polite",children:m}),e.jsxs("div",{className:"petrol-result",children:[e.jsxs("div",{children:[e.jsx("p",{className:"label",children:"Cost"}),e.jsx("p",{className:"value",children:i?`£${i.cost.toFixed(2)}`:"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"label",children:"Quantity"}),e.jsx("p",{className:"value",children:i?`${i.litres.toFixed(1)} L`:"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"label",children:"Cost per mile"}),e.jsx("p",{className:"value",children:i?`${i.costPerMilePence.toFixed(1)} p`:"—"})]})]})]}),e.jsxs("section",{className:"petrol-card","aria-label":"price map links",children:[e.jsx("h2",{children:"Links"}),e.jsxs("div",{className:"toggle-row",children:[e.jsx("div",{children:e.jsx("p",{className:"toggle-row__label",children:"Fuel type"})}),e.jsxs("label",{className:"switch-toggle",children:[e.jsx("input",{id:"fuel-type",type:"checkbox",checked:r==="Diesel",onChange:_,"aria-label":"Toggle fuel type between Petrol and Diesel"}),e.jsx("span",{className:"slider","aria-hidden":"true"})]}),e.jsx("span",{className:"switch-label",children:r})]}),e.jsx("div",{className:"petrol-links","aria-label":"External price map links",children:Object.keys(j).map(s=>e.jsx("a",{className:"petrol-link-card",href:T(s),target:"_blank",rel:"noopener noreferrer",children:e.jsxs("div",{children:["Prices for ",r," in ",s]})},s))})]})]})]})},v=document.getElementById("root");if(!v)throw new Error("Root element #root not found");ReactDOM.createRoot(v).render(e.jsx(React.StrictMode,{children:e.jsx(L,{})}));
