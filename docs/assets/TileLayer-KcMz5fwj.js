function O(u,n){const e=React.useRef(n);React.useEffect(function(){n!==e.current&&u.attributionControl!=null&&(e.current!=null&&u.attributionControl.removeAttribution(e.current),n!=null&&u.attributionControl.addAttribution(n)),e.current=n},[u,n])}const z=1;function k(u){return Object.freeze({__version:z,map:u})}function j(u,n){return Object.freeze({...u,...n})}const y=React.createContext(null);function d(){const u=React.use(y);if(u==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return u}function b(u){function n(e,t){const{instance:c,context:a}=u(e).current;React.useImperativeHandle(t,()=>c);const{children:o}=e;return o==null?null:React.createElement(y,{value:a},o)}return React.forwardRef(n)}function N(u){function n(e,t){const[c,a]=React.useState(!1),{instance:o}=u(e,a).current;React.useImperativeHandle(t,()=>o),React.useEffect(function(){c&&o.update()},[o,c,e.children]);const r=o._contentNode;return r?ReactDOM.createPortal(e.children,r):null}return React.forwardRef(n)}function g(u){function n(e,t){const{instance:c}=u(e).current;return React.useImperativeHandle(t,()=>c),null}return React.forwardRef(n)}function S(u){return function(e){const t=d(),c=u(e,t),{instance:a}=c.current,o=React.useRef(e.position),{position:r}=e;return React.useEffect(function(){return a.addTo(t.map),function(){a.remove()}},[t.map,a]),React.useEffect(function(){r!=null&&r!==o.current&&(a.setPosition(r),o.current=r)},[a,r]),c}}function p(u,n){const e=React.useRef(void 0);React.useEffect(function(){return n!=null&&u.instance.on(n),e.current=n,function(){e.current!=null&&u.instance.off(e.current),e.current=null}},[u,n])}function m(u,n){const e=u.pane??n.pane;return e?{...u,pane:e}:u}function A(u,n){return function(t,c){const a=d(),o=u(m(t,a),a);return O(a.map,t.attribution),p(o.current,t.eventHandlers),n(o.current,a,t,c),o}}function C(u,n,e){return Object.freeze({instance:u,context:n,container:e})}function R(u,n){return n==null?function(t,c){const a=React.useRef(void 0);return a.current||(a.current=u(t,c)),a}:function(t,c){const a=React.useRef(void 0);a.current||(a.current=u(t,c));const o=React.useRef(t),{instance:r}=a.current;return React.useEffect(function(){o.current!==t&&(n(r,t,o.current),o.current=t)},[r,t,n]),a}}function I(u,n){React.useEffect(function(){return(n.layerContainer??n.map).addLayer(u.instance),function(){n.layerContainer?.removeLayer(u.instance),n.map.removeLayer(u.instance)}},[n,u])}function H(u){return function(e){const t=d(),c=u(m(e,t),t);return O(t.map,e.attribution),p(c.current,e.eventHandlers),I(c.current,t),c}}function D(u,n){const e=React.useRef(void 0);React.useEffect(function(){if(n.pathOptions!==e.current){const c=n.pathOptions??{};u.instance.setStyle(c),e.current=c}},[u,n])}function _(u){return function(e){const t=d(),c=u(m(e,t),t);return p(c.current,e.eventHandlers),I(c.current,t),D(c.current,e),c}}function q(u){function n(c,a){return C(u(c),a)}const e=R(n),t=S(e);return g(t)}function V(u,n){const e=R(u,n),t=H(e);return b(t)}function Z(u,n){const e=R(u),t=A(e,n);return N(t)}function F(u,n){const e=R(u,n),t=_(e);return b(t)}function B(u,n){const e=R(u,n),t=H(e);return g(t)}function G(u,n,e){const{opacity:t,zIndex:c}=n;t!=null&&t!==e.opacity&&u.setOpacity(t),c!=null&&c!==e.zIndex&&u.setZIndex(c)}function U(){return d().map}function J(u){const n=U();return React.useEffect(function(){return n.on(u),function(){n.off(u)}},[n,u]),n}function X({bounds:u,boundsOptions:n,center:e,children:t,className:c,id:a,placeholder:o,style:r,whenReady:i,zoom:f,...M},P){const[h]=React.useState({className:c,id:a,style:r}),[s,w]=React.useState(null),v=React.useRef(void 0);React.useImperativeHandle(P,()=>s?.map??null,[s]);const x=React.useCallback(E=>{if(E!==null&&!v.current){const l=new L.Map(E,M);v.current=l,e!=null&&f!=null?l.setView(e,f):u!=null&&l.fitBounds(u,n),i!=null&&l.whenReady(i),w(k(l))}},[]);React.useEffect(()=>()=>{s?.map.remove()},[s]);const T=s?React.createElement(y,{value:s},t):o??null;return React.createElement("div",{...h,ref:x},T)}const K=React.forwardRef(X),Q=V(function({position:n,...e},t){const c=new L.Marker(n,e);return C(c,j(t,{overlayContainer:c}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==t.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==t.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),W=Z(function(n,e){const t=new L.Popup(n,e.overlayContainer);return C(t,e)},function(n,e,{position:t},c){React.useEffect(function(){const{instance:o}=n;function r(f){f.popup===o&&(o.update(),c(!0))}function i(f){f.popup===o&&c(!1)}return e.map.on({popupopen:r,popupclose:i}),e.overlayContainer==null?(t!=null&&o.setLatLng(t),o.openOn(e.map)):e.overlayContainer.bindPopup(o),function(){e.map.off({popupopen:r,popupclose:i}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(o)}},[n,e,c,t])}),Y=B(function({url:n,...e},t){const c=new L.TileLayer(n,m(e,t));return C(c,t)},function(n,e,t){G(n,e,t);const{url:c}=e;c!=null&&c!==t.url&&n.setUrl(c)});export{y as L,K as M,W as P,Y as T,Q as a,C as b,F as c,J as d,j as e,V as f,q as g,b as h,S as i,R as j,d as k,U as u};
