import"./index-pErSQAtW.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{P as je,A as tt}from"./Auth-uEj7rJlD.js";import{A as Oe}from"./api-CH_Pe6Vg.js";import{D as st,U as at}from"./upload--Rbr-3Yq.js";import{C as Ae,M as ve}from"./map-afHLg9l6.js";import{P as ke}from"./pencil-DHu_drsE.js";import{G as De}from"./grip-vertical-BjGCJcsX.js";import{E as Pe}from"./external-link-Bw0ICscN.js";import{c as rt}from"./createLucideIcon-DtX1aPOG.js";import{T as Ce}from"./trash-2-DQbJ9aIh.js";import{S as ot}from"./search-Cfl0sis-.js";import{f as nt,b as lt,e as it,g as ct,u as Ee,T as Se,M as dt,a as ut,P as mt}from"./TileLayer-KcMz5fwj.js";import{L as ge}from"./LayersControl-bsTFKbeJ.js";import{u as pt,T as gt}from"./Toast-COaeoAQl.js";import{X as ht}from"./x-BS-d4QNZ.js";import{C as xt}from"./copy-CzC7y2Qs.js";import{S as ft}from"./share-2-9_T9uTds.js";import{S as bt}from"./settings-G074OJw9.js";import{L as wt}from"./log-out-B0TqtotO.js";import{L as yt}from"./list-BhDG0LsZ.js";/* empty css                */import"./button-D6DGr86I.js";import"./clsx-B-dksMZM.js";import"./eye-Jn_UhOO1.js";import"./circle-check-F4iM422t.js";const jt=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Te=rt("route",jt),vt=nt(function({children:r,...o},c){const u=new L.LayerGroup([],o);return lt(u,it(c,{layerContainer:u}))}),Nt=ct(function(r){return new L.Control.Zoom(r)}),N=`${Oe}/maps`,C=()=>{const t=localStorage.getItem("map_token")||sessionStorage.getItem("map_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}},w={login:async(t,r,o=!0)=>{const c=await fetch(`${N}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:r,remember:o})});if(!c.ok){const d=await c.json().catch(()=>({detail:"Login failed"}));throw new Error(d.detail||"Login failed")}const u=await c.json();return o?localStorage.setItem("map_token",u.access_token):sessionStorage.setItem("map_token",u.access_token),u},getMe:async()=>{const t=await fetch(`${N}/auth/me`,{headers:C(),credentials:"include"});if(!t.ok)throw new Error("Not authenticated");return t.json()},getLists:async()=>{const t=await fetch(`${N}/lists`,{headers:C(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch lists");return t.json()},createList:async t=>{const r=await fetch(`${N}/lists`,{method:"POST",headers:C(),credentials:"include",body:JSON.stringify({name:t})});if(!r.ok)throw new Error("Failed to create list");return r.json()},reorderLists:async t=>{const r=await fetch(`${N}/lists/reorder`,{method:"POST",headers:C(),credentials:"include",body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to reorder lists");return r.json()},deleteList:async t=>{const r=await fetch(`${N}/lists/${t}`,{method:"DELETE",headers:C(),credentials:"include"});if(!r.ok)throw new Error("Failed to delete list");return r.json()},getGroups:async t=>{const r=t?`${N}/groups?list_id=${t}`:`${N}/groups`,o=await fetch(r,{headers:C(),credentials:"include"});if(!o.ok)throw new Error("Failed to fetch groups");return o.json()},createGroup:async(t,r,o,c)=>{const u=await fetch(`${N}/groups`,{method:"POST",headers:C(),credentials:"include",body:JSON.stringify({name:t,color:r,list_id:o,note:c})});if(!u.ok)throw new Error("Failed to create group");return u.json()},updateGroup:async(t,r)=>{const o=await fetch(`${N}/groups/${t}`,{method:"PUT",headers:C(),credentials:"include",body:JSON.stringify(r)});if(!o.ok)throw new Error("Failed to update group");return o.json()},deleteGroup:async t=>{const r=await fetch(`${N}/groups/${t}`,{method:"DELETE",headers:C(),credentials:"include"});if(!r.ok)throw new Error("Failed to delete group");return r.json()},getItems:async t=>{const r=t?`${N}/items?list_id=${t}`:`${N}/items`,o=await fetch(r,{headers:C(),credentials:"include"});if(!o.ok)throw new Error("Failed to fetch items");return o.json()},createItem:async(t,r,o,c,u,d,g,y,i)=>{const b=await fetch(`${N}/items`,{method:"POST",headers:C(),credentials:"include",body:JSON.stringify({group_id:t,name:r,latitude:o,longitude:c,note:u,url_google:d,url_item:g,exclude_initial_map:y,visited:i})});if(!b.ok)throw new Error("Failed to create item");return b.json()},updateItem:async(t,r)=>{const o=await fetch(`${N}/items/${t}`,{method:"PUT",headers:C(),credentials:"include",body:JSON.stringify(r)});if(!o.ok)throw new Error("Failed to update item");return o.json()},deleteItem:async t=>{const r=await fetch(`${N}/items/${t}`,{method:"DELETE",headers:C(),credentials:"include"});if(!r.ok)throw new Error("Failed to delete item");return r.json()},reorderGroups:async t=>{const r=await fetch(`${N}/groups/reorder`,{method:"POST",headers:C(),credentials:"include",body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to reorder groups");return r.json()},reorderItems:async t=>{const r=await fetch(`${N}/items/reorder`,{method:"POST",headers:C(),credentials:"include",body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to reorder items");return r.json()},exportData:async()=>{const t=await fetch(`${N}/export`,{headers:C(),credentials:"include"});if(!t.ok)throw new Error("Export failed");const r=await t.blob(),o=window.URL.createObjectURL(r),c=document.createElement("a");c.href=o,c.download="map_data.yaml",c.click(),window.URL.revokeObjectURL(o)},importData:async t=>{const r=await fetch(`${N}/import`,{method:"POST",headers:{...C(),"Content-Type":"text/plain"},credentials:"include",body:t});if(!r.ok){const o=await r.json().catch(()=>({detail:"Import failed"}));throw new Error(o.detail||"Import failed")}return r.json()},logout:async()=>{try{await fetch(`${Oe}/bookmarks/logout`,{method:"POST",credentials:"include"})}catch(t){console.error("Logout API call failed",t)}localStorage.removeItem("map_token"),sessionStorage.removeItem("map_token")},getSharedData:async t=>{const r=await fetch(`${N}/shared/${t}`);if(!r.ok)throw new Error("Failed to fetch shared list");return r.json()}},ze=React.createContext(void 0),It=({children:t})=>{const[r,o]=React.useState(null),[c,u]=React.useState([]),[d,g]=React.useState(null),[y,i]=React.useState([]),[b,x]=React.useState([]),[_,l]=React.useState(null),[R,p]=React.useState(!1),[E,D]=React.useState(!1),[$,M]=React.useState(null),[I,he]=React.useState(null),[G,Z]=React.useState(!0),[K,J]=React.useState(!1),[T,X]=React.useState(null),[se,z]=React.useState(null),[xe,Y]=React.useState("map"),U=(n,h,f)=>{f?localStorage.setItem("map_token",n):sessionStorage.setItem("map_token",n),o(h),j()},H=(n,h=!0)=>{l(n),p(h)},Q=n=>{K||(g(n),i([]),x([]),n?localStorage.setItem("map_current_list_id",String(n.id)):localStorage.removeItem("map_current_list_id"))},j=async()=>{if(K&&T){try{const n=await w.getSharedData(T);u([n.list]),g(n.list),i(n.groups),x(n.items)}catch(n){console.error(n),z("Failed to load shared list")}return}try{const n=await w.getLists();u(n);let h=d;if(!h&&n.length>0){const f=localStorage.getItem("map_current_list_id");f?h=n.find(v=>v.id===Number(f))||n[0]:h=n[0],g(h)}if(h){const[f,v]=await Promise.all([w.getGroups(h.id),w.getItems(h.id)]);i(f),x(v)}else i([]),x([])}catch(n){console.error(n)}};React.useEffect(()=>{j()},[d?.id,K,T]),React.useEffect(()=>{(async()=>{const f=new URLSearchParams(window.location.search).get("share_token");if(f){J(!0),X(f),Z(!1);return}const v=localStorage.getItem("map_token")||sessionStorage.getItem("map_token");try{const F=await w.getMe();o(F)}catch{v&&(localStorage.removeItem("map_token"),sessionStorage.removeItem("map_token"))}Z(!1)})()},[]);const fe=async(n,h)=>{z(null);try{await w.login(n,h);const f=await w.getMe();o(f),await j()}catch(f){throw z(f.message||"Login failed"),f}},ae=async()=>{await w.logout(),o(null),u([]),g(null),i([]),x([])},re=async n=>{await w.createList(n),await j()},oe=async n=>{await w.reorderLists(n),await j()},be=async n=>{await w.deleteList(n),d?.id===n&&(g(null),localStorage.removeItem("map_current_list_id")),await j()},ne=async(n,h,f)=>{const v=await w.createGroup(n,h,d?.id||void 0,f);return await j(),v},le=async(n,h)=>{await w.updateGroup(n,h),await j()},ie=async n=>{await w.deleteGroup(n),await j()},ce=async(n,h,f,v,F,V,we,Ne,pe)=>{const B=await w.createItem(n,h,f,v,F,V,we,Ne,pe);return await j(),B},de=async(n,h)=>{await w.updateItem(n,h),await j()},ue=async n=>{await w.deleteItem(n),await j()},q=async n=>{await w.reorderGroups(n),await j()},me=async n=>{await w.reorderItems(n),await j()},ee=async()=>{await w.exportData()},A=async n=>{await w.importData(n),await j()};return React.useEffect(()=>{(async()=>{const h=localStorage.getItem("map_token")||sessionStorage.getItem("map_token");try{const f=await w.getMe();o(f)}catch{h&&(localStorage.removeItem("map_token"),sessionStorage.removeItem("map_token"))}Z(!1)})()},[]),e.jsx(ze.Provider,{value:{user:r,lists:c,currentList:d,setCurrentList:Q,groups:y,items:b,selectedItem:_,setSelectedItem:H,shouldFocusItem:R,showAddItem:E,setShowAddItem:D,editingItem:$,setEditingItem:M,directionStartItem:I,setDirectionStartItem:he,isLoading:G,isReadOnly:K,shareToken:T,error:se,login:fe,logout:ae,refreshData:j,createList:re,reorderLists:oe,deleteList:be,createGroup:ne,updateGroup:le,deleteGroup:ie,createItem:ce,updateItem:de,deleteItem:ue,reorderGroups:q,reorderItems:me,exportData:ee,importData:A,mobileView:xe,setMobileView:Y,handleAuthSuccess:U},children:t})},W=()=>{const t=React.useContext(ze);if(t===void 0)throw new Error("useMap must be used within a MapProvider");return t},Ue={"red-500":"#ef4444","orange-500":"#f97316","amber-500":"#f59e0b","yellow-500":"#eab308","lime-500":"#84cc16","green-500":"#22c55e","emerald-500":"#10b981","teal-500":"#14b8a6","cyan-500":"#06b6d4","sky-500":"#0ea5e9","blue-500":"#3b82f6","indigo-500":"#6366f1","violet-500":"#8b5cf6","purple-500":"#a855f7","fuchsia-500":"#d946ef","pink-500":"#ec4899","rose-500":"#f43f5e","slate-500":"#64748b","gray-500":"#6b7280","zinc-500":"#71717a","neutral-500":"#737373","stone-500":"#78716c","red-600":"#dc2626","orange-600":"#ea580c","amber-600":"#d97706","yellow-600":"#ca8a04","lime-600":"#65a30d","green-600":"#16a34a","emerald-600":"#059669","teal-600":"#0d9488","cyan-600":"#0891b2","sky-600":"#0284c7","blue-600":"#2563eb","indigo-600":"#4f46e5","violet-600":"#7c3aed","purple-600":"#9333ea","fuchsia-600":"#c026d3","pink-600":"#db2777","rose-600":"#e11d48","slate-600":"#475569","gray-600":"#4b5563","zinc-600":"#52525b","neutral-600":"#525252","stone-600":"#57534e","red-400":"#f87171","orange-400":"#fb923c","amber-400":"#fbbf24","yellow-400":"#facc15","lime-400":"#a3e635","green-400":"#4ade80","emerald-400":"#34d399","teal-400":"#2dd4bf","cyan-400":"#22d3ee","sky-400":"#38bdf8","blue-400":"#60a5fa","indigo-400":"#818cf8","violet-400":"#a78bfa","purple-400":"#c084fc","fuchsia-400":"#e879f9","pink-400":"#f472b6","rose-400":"#fb7185","slate-400":"#94a3b8","gray-400":"#9ca3af","zinc-400":"#a1a1aa","neutral-400":"#a3a3a3","stone-400":"#a8a29e"},Fe=t=>Ue[t]||t,St="bg-red-200",Le="bg-gray-300",kt=()=>{const{groups:t,items:r,currentList:o,selectedItem:c,setSelectedItem:u,createGroup:d,updateGroup:g,deleteGroup:y,createItem:i,updateItem:b,deleteItem:x,reorderGroups:_,reorderItems:l,exportData:R,importData:p,logout:E,isReadOnly:D,showAddItem:$,setShowAddItem:M,editingItem:I,setEditingItem:he,directionStartItem:G,setDirectionStartItem:Z}=W(),[K,J]=React.useState(!1),[T,X]=React.useState(""),[se,z]=React.useState("blue-500"),[xe,Y]=React.useState(""),[U,H]=React.useState(null),[Q,j]=React.useState(""),[fe,ae]=React.useState(""),[re,oe]=React.useState(""),[be,ne]=React.useState(""),[le,ie]=React.useState(!1),[ce,de]=React.useState(!1),[ue,q]=React.useState(""),[me,ee]=React.useState(""),[A,n]=React.useState(null),[h,f]=React.useState(null),[v,F]=React.useState(r),[V,we]=React.useState(null),[Ne,pe]=React.useState(null),[B,$e]=React.useState(t),[Ie,Ve]=React.useState(new Set),ye=()=>{j(""),ae(""),oe(""),ne(""),ie(!1),de(!1),q(""),ee(""),he(null)};React.useEffect(()=>{console.log("Items in ListView:",r),F(r)},[r]),React.useEffect(()=>{$e(t)},[t]),React.useEffect(()=>{I&&(u(I),j(I.name),ae(I.note||""),oe(I.url_google||""),ne(I.url_item||""),ie(I.exclude_initial_map),de(I.visited),ee(String(I.group_id)),q(I.latitude!==null&&I.latitude!==void 0?`${I.latitude}, ${I.longitude}`:""))},[I]);const Be=s=>{const a=new Set(Ie);a.has(s)?a.delete(s):a.add(s),Ve(a)},Ze=s=>{n(s)},Je=(s,a)=>{if(s.preventDefault(),A===null||A===a)return;const m=v.findIndex(te=>te.id===A),S=v.findIndex(te=>te.id===a);if(m===-1||S===-1)return;const k={...v[m]},P=v[S];k.group_id!==P.group_id&&(k.group_id=P.group_id);const O=[...v];O.splice(m,1),O.splice(S,0,k),F(O)},Ge=async()=>{A!==null&&(n(null),f(null),await l(v.map(s=>({id:s.id,group_id:s.group_id}))))},He=s=>{we(s)},qe=(s,a)=>{if(s.preventDefault(),V===null||V===a)return;const m=B.findIndex(O=>O.id===V),S=B.findIndex(O=>O.id===a);if(m===-1||S===-1)return;const k=[...B],[P]=k.splice(m,1);k.splice(S,0,P),$e(k)},We=async()=>{V!==null&&(we(null),pe(null),await _(B.map(s=>s.id)))},Ke=async s=>{s.preventDefault();const a=xe.trim()||null;U?await g(U.id,{name:T,color:se,note:a}):await d(T,se,a),X(""),z("blue-500"),Y(""),H(null),J(!1)},Xe=s=>{const m=s.trim().split(/[\s,]+/);if(m.length>=2){const S=parseFloat(m[0]),k=parseFloat(m[1]);if(!isNaN(S)&&!isNaN(k))return{lat:S,lng:k}}return null},Re=s=>{if(!s)return"";try{const a=new URL(s),m=a.hostname==="maps.google.com"||a.hostname.includes("google.com")&&a.pathname.includes("/maps"),S=a.hostname.includes("booking.com");return m||S?a.origin+a.pathname:s}catch{return s}},Ye=async s=>{s.preventDefault();const a=Xe(ue);if(ue.trim()&&!a){alert("Invalid coordinates format. Please use 'lat, lng'.");return}let m=Number(me);if(!me){const O=t.find(te=>te.name.toUpperCase()==="DEFAULT");O?m=O.id:m=(await d("DEFAULT","gray-500","Default group for locations")).id}const S=fe.trim()||null,k=Re(re.trim())||null,P=Re(be.trim())||null;I?await b(I.id,{group_id:m,name:Q,latitude:a?.lat??null,longitude:a?.lng??null,note:S,url_google:k,url_item:P,exclude_initial_map:le,visited:ce}):await i(m,Q,a?.lat??null,a?.lng??null,S,k,P,le,ce),ye(),M(!1)},Qe=()=>{const s=re.trim();if(!s)return;const a=s.match(/\/place\/([^/]+)/);a&&!Q.trim()&&j(decodeURIComponent(a[1].replace(/\+/g," ")));const m=s.match(/!3d(-?\d+(?:\.\d+)?)/),S=s.match(/!4d(-?\d+(?:\.\d+)?)/);if(m&&S)q(`${m[1]}, ${S[1]}`);else{const k=s.match(/@(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/);k&&q(`${k[1]}, ${k[2]}`)}},et=async s=>{const a=s.target.files?.[0];if(a){const m=await a.text();await p(m)}};return e.jsxs("div",{className:"flex h-full flex-col overflow-y-auto bg-white p-4",children:[!D&&e.jsx("div",{className:"mb-4 border-b pb-4",children:e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{"data-testid":"add-group-button",onClick:()=>{H(null),X(""),z("blue-500"),Y(""),J(!0)},className:"flex flex-col items-center justify-center gap-1 rounded-lg border border-blue-100 bg-blue-50/50 py-2 text-[10px] font-bold text-blue-700 transition-colors hover:bg-blue-50",title:"Add Group",children:[e.jsx(je,{size:14}),"Group"]}),e.jsxs("button",{"data-testid":"add-location-button",onClick:()=>{ye(),M(!0)},className:"flex flex-col items-center justify-center gap-1 rounded-lg border border-green-100 bg-green-50/50 py-2 text-[10px] font-bold text-green-700 transition-colors hover:bg-green-50",title:"Add Location",children:[e.jsx(je,{size:14}),"Location"]}),e.jsxs("button",{onClick:R,className:"flex flex-col items-center justify-center gap-1 rounded-lg border border-gray-100 bg-gray-50 py-2 text-[10px] font-bold text-gray-600 transition-colors hover:bg-gray-100",title:"Export Data",children:[e.jsx(st,{size:14}),"Export"]}),e.jsxs("label",{className:"flex cursor-pointer flex-col items-center justify-center gap-1 rounded-lg border border-gray-100 bg-gray-50 py-2 text-[10px] font-bold text-gray-600 transition-colors hover:bg-gray-100",title:"Import Data",children:[e.jsx(at,{size:14}),"Import",e.jsx("input",{type:"file",className:"hidden",accept:".yaml,.yml",onChange:et})]})]})}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx("h2",{className:"text-xl font-bold",children:"Locations"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[B.length===0&&e.jsxs("div",{className:"py-10 text-center text-gray-500",children:[e.jsx("p",{children:"No groups yet."}),e.jsx("p",{className:"text-sm",children:"Create a group to start adding locations."})]}),B.map(s=>e.jsxs("div",{"data-testid":`group-container-${s.id}`,draggable:!D&&Ne===s.id,onDragStart:()=>He(s.id),onDragOver:a=>{V!==null&&qe(a,s.id)},onDragEnd:We,className:`rounded-lg border border-gray-100 bg-gray-50/30 p-4 shadow-sm transition-all hover:shadow-md ${V===s.id?"opacity-30":""}`,children:[e.jsxs("div",{className:"mb-3 flex cursor-pointer items-center justify-between",onClick:()=>Be(s.id),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{size:18,className:`mr-2 text-gray-400 transition-transform ${Ie.has(s.id)?"-rotate-90":""}`}),e.jsx("div",{className:"mr-3 h-3 w-3 rounded-full shadow-sm ring-2 ring-white",style:{backgroundColor:Fe(s.color)}}),e.jsx("h3",{className:"font-bold text-gray-800",children:s.name})]}),e.jsxs("div",{className:"ml-4 flex flex-1 items-center justify-between gap-2",children:[e.jsxs("span",{className:"rounded-full border bg-white px-2 py-0.5 text-xs font-medium text-gray-400",children:[v.filter(a=>a.group_id===s.id).length," items"]}),!D&&e.jsxs("div",{className:"flex items-center gap-1",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ye(),ee(String(s.id)),M(!0)},className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-green-50 hover:text-green-500",title:"Add Item to Group","data-testid":`add-item-to-group-${s.id}`,children:e.jsx(je,{size:14})}),e.jsx("button",{onClick:()=>{X(s.name),z(s.color),Y(s.note||""),H(s),J(!0)},className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-blue-50 hover:text-blue-500",title:"Edit Group",children:e.jsx(ke,{size:14})}),e.jsx("div",{"data-testid":`group-grip-${s.id}`,className:"cursor-grab p-0.5 text-gray-400 transition-colors hover:text-gray-600 active:cursor-grabbing",onMouseDown:()=>pe(s.id),onMouseUp:()=>pe(null),children:e.jsx(De,{size:14})})]})]})]}),!Ie.has(s.id)&&e.jsxs(e.Fragment,{children:[s.note&&e.jsx("div",{className:"mb-3 line-clamp-2 pl-6 text-xs whitespace-pre-wrap text-gray-500 italic transition-all hover:line-clamp-none",children:s.note}),e.jsx("ul",{"data-testid":`group-items-${s.id}`,className:"min-h-[20px] space-y-2 pl-6",onDragOver:a=>{a.preventDefault()},onDrop:a=>{if(a.preventDefault(),A===null)return;const m=v.findIndex(P=>P.id===A);if(m===-1)return;const S=v[m];if(S.group_id===s.id)return;const k=[...v];k[m]={...S,group_id:s.id},F(k),Ge()},children:v.filter(a=>a.group_id===s.id).map(a=>e.jsxs("li",{"data-testid":`item-${a.id}`,"data-visited":a.visited,onClick:()=>u(a),draggable:!D&&h===a.id,onDragStart:m=>{m.stopPropagation(),Ze(a.id)},onDragOver:m=>{m.stopPropagation(),Je(m,a.id)},onDragEnd:Ge,className:`group/item flex cursor-pointer items-center justify-between rounded-md p-1.5 text-sm transition-colors hover:bg-white/50 ${c?.id===a.id?"bg-blue-50 shadow-sm ring-1 ring-blue-200":a.visited?Le:a.latitude===void 0||a.latitude===null?St:"text-gray-600"} ${A===a.id?"opacity-30":""}`,children:[e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[e.jsx("div",{className:`truncate font-medium ${c?.id===a.id?"text-blue-600":""} ${a.visited?"line-through opacity-70":""}`,children:a.name}),c?.id===a.id&&a.note&&e.jsx("div",{className:"mt-1 text-xs whitespace-pre-wrap text-gray-500 italic",children:a.note})]}),e.jsxs("div",{className:"flex items-center gap-1",onClick:m=>m.stopPropagation(),children:[a.url_item&&e.jsx("a",{href:a.url_item,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-blue-50 hover:text-blue-500",title:"Open Item URL",children:e.jsx(Pe,{size:14})}),a.latitude!==null&&a.latitude!==void 0&&e.jsx("button",{"data-testid":`directions-button-${a.id}`,onClick:()=>{if(G)if(G.id===a.id)Z(null);else{const m=`https://www.google.com/maps/dir/${G.latitude},${G.longitude}/${a.latitude},${a.longitude}/`;window.open(m,"_blank"),Z(null)}else Z(a)},className:`rounded-lg p-1 transition-all hover:bg-blue-50 ${G?G.id===a.id?"animate-pulse bg-blue-100 text-blue-600":"text-green-500 hover:text-green-600":"text-gray-400 hover:text-blue-500"}`,title:G?G.id===a.id?"Cancel directions":`Directions from ${G.name} to here`:"Directions from here",children:e.jsx(Te,{size:14})}),(a.url_google||a.latitude!==null&&a.latitude!==void 0)&&e.jsx("a",{href:a.url_google||`https://www.google.com/maps/search/?api=1&query=${a.latitude},${a.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-blue-50 hover:text-blue-500",title:"Open in Google Maps",children:e.jsx(ve,{size:14})}),!D&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{he(a),M(!0)},className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-blue-50 hover:text-blue-500",title:"Edit",children:e.jsx(ke,{size:14})}),e.jsx("button",{onClick:()=>{x(a.id)},className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-red-50 hover:text-red-500",children:e.jsx(Ce,{size:14})}),e.jsx("div",{"data-testid":`item-grip-${a.id}`,className:"cursor-grab p-0.5 text-gray-400 transition-colors hover:text-gray-600 active:cursor-grabbing",onMouseDown:()=>f(a.id),onMouseUp:()=>f(null),children:e.jsx(De,{size:14})})]})]})]},a.id))})]})]},s.id))]}),K&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:U?"Edit Group":"Add Group"}),U&&e.jsx("button",{onClick:async()=>{confirm("Delete this group and all its items?")&&(await y(U.id),J(!1),H(null))},className:"rounded-lg p-1 text-gray-400 hover:bg-red-50 hover:text-red-500",title:"Delete Group",children:e.jsx(Ce,{size:18})})]}),e.jsxs("form",{onSubmit:Ke,children:[e.jsx("input",{className:"mb-4 w-full rounded border p-2",placeholder:"Group Name",value:T,onChange:s=>X(s.target.value),"data-testid":"group-name-input",required:!0}),e.jsx("textarea",{className:"mb-4 w-full rounded border p-2 text-sm",placeholder:"Note (optional)",value:xe,onChange:s=>Y(s.target.value),rows:3}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-xs font-medium text-gray-500",children:"Select Color"}),e.jsx("div",{className:"grid max-h-48 grid-cols-6 gap-2 overflow-y-auto rounded border p-2",children:Object.entries(Ue).map(([s,a])=>e.jsx("button",{type:"button",title:s,onClick:()=>z(s),className:`h-8 w-8 rounded-full border-2 transition-all ${se===s?"scale-110 border-black shadow-md":"border-transparent hover:scale-105"}`,style:{backgroundColor:a}},s))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{J(!1),H(null)},className:"flex-1 rounded border p-2",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 rounded bg-blue-600 p-2 text-white",children:U?"Save":"Add"})]})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold",children:I?"Edit Location":"Add Location"}),e.jsxs("form",{onSubmit:Ye,children:[e.jsx("label",{htmlFor:"group-select",className:"mb-1 block text-xs font-medium text-gray-500",children:"Group"}),e.jsxs("select",{id:"group-select","data-testid":"group-select",className:"mb-4 w-full rounded border p-2",value:me,onChange:s=>ee(s.target.value),children:[e.jsx("option",{value:"",children:"Select Group"}),t.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("input",{className:"mb-4 w-full rounded border p-2",placeholder:"Location Name",value:Q,onChange:s=>j(s.target.value),"data-testid":"location-name-input",required:!0}),e.jsx("textarea",{className:"mb-4 w-full rounded border p-2 text-sm",placeholder:"Note (optional)",value:fe,onChange:s=>ae(s.target.value),rows:3}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("input",{className:"flex-1 rounded border p-2 text-sm",placeholder:"Google Maps URL (optional)",value:re,onChange:s=>oe(s.target.value),"data-testid":"location-url-input"}),e.jsx("button",{type:"button",onClick:Qe,"data-testid":"extract-url-button",className:"flex items-center justify-center rounded bg-gray-100 px-3 text-gray-600 hover:bg-gray-200",title:"Extract name and coordinates from URL",children:e.jsx(ot,{size:16})})]}),e.jsx("input",{className:"mb-4 w-full rounded border p-2 text-sm",placeholder:"Item URL (optional)",value:be,onChange:s=>ne(s.target.value),"data-testid":"item-url-input"}),e.jsx("input",{type:"text",className:"mb-4 w-full rounded border p-2",placeholder:"Coordinates (lat, lng)",value:ue,onChange:s=>q(s.target.value),"data-testid":"location-coordinates-input"}),e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"exclude-initial-map",checked:le,onChange:s=>ie(s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"exclude-initial-map",className:"text-sm text-gray-600 select-none",children:"Exclude from Initial Map View"})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"item-visited",checked:ce,onChange:s=>de(s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":"location-visited-checkbox"}),e.jsx("label",{htmlFor:"item-visited",className:"text-sm text-gray-600 select-none",children:"Visited"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{M(!1),ye()},className:"flex-1 rounded border p-2",children:"Cancel"}),e.jsx("button",{type:"submit","data-testid":"save-item-button",className:"flex-1 rounded bg-blue-600 p-2 text-white",children:I?"Save":"Add"})]})]})]})})]})},_e=13,Ct=[51.505,-.09],Lt=3,Me={duration:.5},_t=()=>{const t=Ee(),{items:r,setSelectedItem:o}=W();return React.useEffect(()=>{const c=new L.Control({position:"topleft"});return c.onAdd=()=>{const u=L.DomUtil.create("div","leaflet-bar leaflet-control"),d=L.DomUtil.create("a","leaflet-control-reset",u);return d.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="display: block;"><path d="m21 21-6-6m6 6v-4.8m0 4.8h-4.8M3 16.2V21m0 0h4.8M3 21l6-6M21 7.8V3m0 0h-4.8M21 3l-6 6M3 7.8V3m0 0h4.8M3 3l6 6"/></svg>',d.href="#",d.title="Reset View",d.style.backgroundColor="white",d.style.cursor="pointer",d.style.width="30px",d.style.height="30px",d.style.lineHeight="30px",L.DomEvent.on(d,"click",g=>{L.DomEvent.stop(g),o(null);const y=r.filter(i=>i.latitude!==null&&i.latitude!==void 0&&!i.exclude_initial_map);if(y.length>0){const i=L.latLngBounds(y.map(b=>[b.latitude,b.longitude]));t.flyToBounds(i,{padding:[50,50],maxZoom:_e})}else t.flyTo(Ct,Lt)}),u},t.addControl(c),()=>{t.removeControl(c)}},[t,r,o]),null},Et=()=>{const t=Ee(),{items:r,selectedItem:o,shouldFocusItem:c,currentList:u,mobileView:d}=W(),g=React.useRef(null),y=React.useRef(null),i=React.useRef(!1);return React.useEffect(()=>{const b=t.getContainer();if(b.clientWidth===0||b.clientHeight===0)return;d==="map"&&t.invalidateSize();const x=o?.id??null,_=u?.id??null;y.current!==_&&(i.current=!1,y.current=_);const R=g.current!==x,E=r.filter($=>$.latitude!==null&&$.latitude!==void 0).filter($=>!$.exclude_initial_map);if((E.length>0||o&&o.latitude!==null)&&(!i.current||R)){if(o&&o.latitude!==null&&o.latitude!==void 0&&(c||!i.current)){const $=i.current?t.getZoom():_e;t.flyTo([o.latitude,o.longitude],$,Me)}else if(E.length>0&&!o){const $=L.latLngBounds(E.map(M=>[M.latitude,M.longitude]));t.flyToBounds($,{padding:[50,50],maxZoom:_e,...Me})}g.current=x,i.current=!0}},[r,o,c,u,t,d]),null},$t=({children:t})=>e.jsxs(ge,{position:"topright",children:[e.jsx(ge.BaseLayer,{checked:!0,name:"Map",children:e.jsx(Se,{attribution:"Esri, HERE, Garmin, Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), (c) OpenStreetMap contributors, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",maxZoom:19})}),e.jsx(ge.BaseLayer,{name:"3D Terrain",children:e.jsx(Se,{attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",maxZoom:20})}),e.jsx(ge.BaseLayer,{name:"Satellite",children:e.jsx(Se,{attribution:"Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, GIS",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),t]}),Gt=()=>{const t=Ee();return React.useEffect(()=>{window.leafletMap=t},[t]),null},Rt=(t,r,o,c)=>{const u=Fe(r);let d=o?"bg-blue-600 text-white":"bg-white text-gray-900";!o&&c&&(d=`${Le} text-gray-700`);const g=o?"bg-blue-600":c?Le:"bg-white",y=c?"line-through":"",i=u;return new L.DivIcon({className:"custom-div-icon",html:`
      <div class="flex items-center justify-center transition-all duration-300 ${o?"scale-125 z-50":"hover:scale-110"}">
        <div class="px-2 py-1 rounded-lg font-black text-xs shadow-lg border-2 whitespace-nowrap ${d} ${y}" style="border-color: ${i}">
          ${t}
        </div>
        <div class="absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 rotate-45 border-r-2 border-b-2 ${g}" style="border-color: ${i}"></div>
      </div>
    `,iconSize:[100,30],iconAnchor:[50,30]})},Dt=()=>{const{groups:t,items:r,selectedItem:o,setSelectedItem:c,setShowAddItem:u,setEditingItem:d,isReadOnly:g,setMobileView:y,directionStartItem:i,setDirectionStartItem:b}=W();return e.jsx("div",{className:"h-full w-full",children:e.jsxs(dt,{center:[51.505,-.09],zoom:3,style:{height:"100%",width:"100%"},className:"z-0",zoomControl:!1,attributionControl:!1,zoomSnap:0,doubleClickZoom:!1,children:[e.jsxs($t,{children:[e.jsx(Gt,{}),t.map(x=>{const _=r.filter(l=>l.group_id===x.id&&l.latitude!==null&&l.latitude!==void 0&&l.longitude!==null&&l.longitude!==void 0);return console.log(`Group ${x.name} has ${_.length} items on map (total ${r.filter(l=>l.group_id===x.id).length})`),_.length===0?null:e.jsx(ge.Overlay,{checked:!0,name:x.name,children:e.jsx(vt,{children:_.map(l=>{const R=o?.id===l.id;return console.log(`Rendering marker for ${l.name}, visited: ${l.visited}`),e.jsx(ut,{position:[l.latitude,l.longitude],icon:Rt(l.name,l.group_color||"#3b82f6",R,l.visited),zIndexOffset:R?1e3:0,eventHandlers:{click:()=>c(l,!0)},children:e.jsx(mt,{children:e.jsxs("div",{className:"min-w-[150px] text-center",children:[e.jsx("div",{className:"mb-1 border-b pb-1 font-bold",children:l.name}),l.note&&e.jsx("div",{className:"mb-2 text-xs whitespace-pre-wrap text-gray-600 italic",children:l.note}),e.jsxs("div",{className:"flex items-center justify-center gap-4",onClick:p=>p.stopPropagation(),children:[l.url_item&&e.jsx("a",{href:l.url_item,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-blue-50 hover:text-blue-500",title:"Open Item URL",children:e.jsx(Pe,{className:"size-4"})}),e.jsx("button",{"data-testid":`map-directions-button-${l.id}`,onClick:()=>{if(i)if(i.id===l.id)b(null);else{const p=`https://www.google.com/maps/dir/${i.latitude},${i.longitude}/${l.latitude},${l.longitude}/`;window.open(p,"_blank"),b(null)}else b(l)},className:`rounded-lg p-1 transition-all hover:bg-blue-50 ${i?i.id===l.id?"animate-pulse bg-blue-100 text-blue-600":"text-green-500 hover:text-green-600":"text-gray-400 hover:text-blue-500"}`,title:i?i.id===l.id?"Cancel directions":`Directions from ${i.name} to here`:"Directions from here",children:e.jsx(Te,{className:"size-4"})}),e.jsx("a",{href:l.url_google||`https://www.google.com/maps/search/?api=1&query=${l.latitude},${l.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg p-1 text-gray-400 transition-all hover:bg-blue-50 hover:text-blue-500",title:"Open in Google Maps",children:e.jsx(ve,{className:"size-4"})}),!g&&e.jsx("button",{onClick:()=>{d(l),u(!0),y("list")},className:"flex items-center justify-center text-gray-600 transition-colors hover:text-indigo-600",title:"Edit Location",children:e.jsx(ke,{className:"size-4"})})]})]})})},l.id)})})},x.id)})]}),e.jsx(Nt,{position:"topleft"}),e.jsx(_t,{}),e.jsx(Et,{})]})})},Mt=({onClose:t})=>{const{lists:r,createList:o,deleteList:c,currentList:u,setCurrentList:d}=W(),{successToast:g}=pt(),[y,i]=React.useState(""),[b,x]=React.useState(null),_=async p=>{p.preventDefault(),y.trim()&&(await o(y),i(""))},l=async(p,E)=>{window.confirm(`Are you sure you want to delete "${E}" and all its groups/points?`)&&await c(p)},R=(p,E)=>{const D=`${window.location.origin}${window.location.pathname}?share_token=${p}`;navigator.clipboard.writeText(D),x(E),g("Share link copied to clipboard!"),setTimeout(()=>x(null),2e3)};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"flex max-h-full w-full max-w-md flex-col rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Manage Lists"}),e.jsx("button",{onClick:t,className:"rounded-lg p-1 hover:bg-gray-100",children:e.jsx(ht,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{"data-testid":"list-manager-content",className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("form",{onSubmit:_,className:"mb-6 flex gap-2",children:[e.jsx("input",{autoFocus:!0,className:"flex-1 rounded-xl border border-gray-200 bg-gray-50 px-4 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:outline-none",placeholder:"New list name...",value:y,onChange:p=>i(p.target.value),"data-testid":"new-list-input"}),e.jsx("button",{type:"submit",className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-600 text-white shadow-lg shadow-blue-200 transition-all hover:bg-blue-700",children:e.jsx(je,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-black tracking-tight text-gray-400 uppercase",children:"Your Lists"}),r.length===0&&e.jsx("p",{className:"py-4 text-center text-sm text-gray-500",children:"No lists created yet."}),r.map(p=>e.jsxs("div",{onClick:()=>{d(p),t()},className:`group flex cursor-pointer items-center justify-between rounded-xl border p-3 transition-all hover:border-gray-200 hover:bg-white hover:shadow-sm ${u?.id===p.id?"border-blue-200 bg-blue-50/50 shadow-sm":"border-gray-100 bg-gray-50"}`,children:[e.jsx("span",{className:"font-bold text-gray-700",children:p.name}),e.jsxs("div",{className:"flex gap-1",onClick:E=>E.stopPropagation(),children:[e.jsx("button",{onClick:()=>R(p.share_token,p.id),className:`rounded-lg p-1.5 transition-all ${b===p.id?"bg-green-100 text-green-600":"text-gray-400 hover:bg-blue-50 hover:text-blue-600"}`,title:"Copy Share Link",children:b===p.id?e.jsx(xt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>l(p.id,p.name),className:"rounded-lg p-1.5 text-gray-400 hover:bg-red-50 hover:text-red-500",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]},p.id))]})]}),e.jsx("div",{className:"border-t p-4",children:e.jsx("button",{onClick:t,className:"w-full rounded-xl bg-gray-100 py-2.5 text-sm font-bold text-gray-600 transition-all hover:bg-gray-200",children:"Done"})})]})})},Ot=()=>{const{user:t,lists:r,currentList:o,setCurrentList:c,logout:u,isReadOnly:d,mobileView:g,setMobileView:y}=W(),[i,b]=React.useState(!1);return e.jsxs("header",{className:"z-30 flex flex-col justify-between gap-4 border-b border-gray-200 bg-white px-4 py-3 shadow-sm md:flex-row md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-600 text-white shadow-lg",children:e.jsx(ve,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-extrabold tracking-tight text-gray-900",children:"Maps"}),e.jsx("p",{className:"text-xs font-medium tracking-wider text-gray-500 uppercase",children:o?.name||"No list selected"})]})]}),e.jsxs("div",{className:"flex flex-1 items-center justify-between gap-2",children:[d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"rounded-full bg-blue-50 px-3 py-1 text-xs font-bold text-blue-600 uppercase",children:"Shared List"}),e.jsx("button",{onClick:()=>{window.location.href=window.location.pathname},className:"text-sm font-bold text-gray-500 hover:text-blue-600 hover:underline",children:"Back to My Maps"})]}):e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"list-select",className:"ml-2 hidden text-xs font-black tracking-tight text-gray-400 uppercase md:block",children:"List"}),e.jsxs("div",{className:"group relative",children:[e.jsxs("select",{id:"list-select",value:o?.id||"",onChange:x=>{const _=r.find(l=>l.id===Number(x.target.value));_&&c(_)},className:"relative cursor-pointer appearance-none rounded-xl border border-gray-200 bg-gray-50 px-4 py-2 pr-10 text-sm font-bold text-blue-600 transition-all focus:ring-2 focus:ring-blue-500/20 focus:outline-none",children:[r.length===0&&e.jsx("option",{value:"",children:"No lists"}),r.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),e.jsx("div",{className:"pointer-events-none absolute top-1/2 right-3 -translate-y-1/2 text-blue-600",children:e.jsx(Ae,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>b(!0),className:"flex h-9 items-center justify-center gap-2 rounded-xl bg-gray-100 px-2 text-gray-600 transition-all hover:bg-gray-200 md:px-3",title:"Manage Lists",children:[e.jsx(bt,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden text-sm font-semibold md:block",children:"Settings"})]}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsx("span",{className:"hidden text-sm font-semibold text-gray-600 md:block",children:t?.first_name}),e.jsx("button",{onClick:u,className:"flex h-9 w-9 items-center justify-center rounded-xl text-gray-500 transition-colors hover:bg-red-50 hover:text-red-500",title:"Logout",children:e.jsx(wt,{className:"h-5 w-5"})})]})]}),e.jsx("button",{onClick:()=>y(g==="map"?"list":"map"),className:"flex h-9 items-center justify-center gap-2 rounded-xl bg-blue-600 px-3 text-white transition-all hover:bg-blue-700 md:hidden",title:g==="map"?"Show List":"Show Map",children:g==="map"?e.jsx(yt,{className:"h-5 w-5"}):e.jsx(ve,{className:"h-5 w-5"})})]}),i&&e.jsx(Mt,{onClose:()=>b(!1)})]})},At=()=>{const{user:t,isLoading:r,mobileView:o,handleAuthSuccess:c}=W();if(r)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:"Loading..."});if(!t)return e.jsx(tt,{appName:"Maps",loginEndpoint:"/maps/auth/login",registerEndpoint:"/maps/auth/register",onSuccess:(d,g)=>c(d.access_token,d.user,g)});const u=()=>{window.leafletMap?.closePopup()};return e.jsxs("div",{className:"flex h-screen w-full flex-col overflow-hidden bg-gray-50",children:[e.jsx("div",{onClick:u,children:e.jsx(Ot,{})}),e.jsxs("main",{className:"relative flex flex-1 flex-col overflow-hidden md:flex-row",children:[e.jsx("div",{onClick:u,className:`h-full border-r border-gray-200 bg-white md:w-1/3 ${o==="list"?"block":"hidden md:block"}`,children:e.jsx(kt,{})}),e.jsx("div",{className:`relative h-full overflow-hidden md:w-2/3 ${o==="map"?"block":"hidden md:block"}`,children:e.jsx(Dt,{})})]})]})};function Pt(){return e.jsx(gt,{children:e.jsx(It,{children:e.jsx(At,{})})})}ReactDOM.createRoot(document.getElementById("root")).render(e.jsx(React.StrictMode,{children:e.jsx(Pt,{})}));
