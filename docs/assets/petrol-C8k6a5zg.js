import"./index-CvrIQurp.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{B as F}from"./button-D9MSpuT3.js";const L=()=>e.jsxs("header",{className:"space-y-3 rounded-[32px] border border-slate-500/30 bg-slate-900/60 px-6 py-6 shadow-[0_30px_80px_rgba(2,6,23,0.65)] backdrop-blur-[16px] md:px-8 md:py-8",children:[e.jsx("h1",{className:"text-3xl font-semibold md:text-4xl",children:"Fuel calculator"}),e.jsx("p",{className:"max-w-3xl text-slate-300",children:"Estimate how much fuel you need for your trip and how much it will cost."})]});function I({fuelType:t,onToggle:a,getUrl:l,towns:n}){return e.jsxs("section",{className:"space-y-4 rounded-[26px] border border-slate-500/30 bg-slate-900/55 p-6 shadow-[0_15px_50px_rgba(3,7,18,0.55)] backdrop-blur-[14px] md:p-8",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Links"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 rounded-[18px] border border-slate-400/20 bg-slate-900/50 p-4",children:[e.jsx("p",{className:"m-0 font-semibold",children:"Fuel type"}),e.jsxs("label",{className:"switch-label relative inline-flex h-8 w-16 cursor-pointer items-center",children:[e.jsx("input",{id:"fuel-type",type:"checkbox",checked:t==="Diesel",onChange:a,"aria-label":"Toggle fuel type between Petrol and Diesel",className:"switch-input peer sr-only"}),e.jsx("span",{className:"absolute inset-0 rounded-full bg-slate-400/60 transition peer-checked:bg-indigo-500"}),e.jsx("span",{className:"relative left-1 h-6 w-6 rounded-full bg-white transition peer-checked:translate-x-6"})]}),e.jsx("span",{className:"text-sm font-semibold capitalize text-slate-100",children:t})]}),e.jsx("div",{className:"petrol-links grid gap-3","aria-label":"External price map links",children:n.map(r=>e.jsxs("a",{className:"petrol-link-card flex items-center justify-between rounded-[18px] border border-slate-400/35 bg-slate-900/35 px-4 py-3 text-slate-100 transition hover:-translate-y-0.5 hover:border-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-400",href:l(r),target:"_blank",rel:"noopener noreferrer",children:[e.jsxs("div",{children:["Prices for ",t," in ",r]}),e.jsx("span",{className:"text-sm text-indigo-300",children:"Open map"})]},r))})]})}function M({mpg:t,miles:a,costPerLitre:l,onMpgChange:n,onMilesChange:r,onCostChange:c,onSubmit:o}){return e.jsxs("form",{onSubmit:o,className:"flex flex-col gap-4",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-sm md:text-base",htmlFor:"mpg",children:[e.jsx("span",{className:"text-slate-300",children:"Consumption (mpg UK)"}),e.jsx("input",{id:"mpg",type:"number",min:"0",step:"1",value:t,onChange:n,required:!0,className:"rounded-2xl border border-slate-400/30 bg-slate-900/60 px-4 py-3 text-right text-white transition focus:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-400/40"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm md:text-base",htmlFor:"miles",children:[e.jsx("span",{className:"font-medium text-slate-300",children:"Distance (Miles)"}),e.jsx("input",{id:"miles",type:"number",min:"0",step:"1",value:a,onChange:r,required:!0,className:"rounded-2xl border border-slate-400/30 bg-slate-900/60 px-4 py-3 text-right text-white transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm md:text-base",htmlFor:"cost",children:[e.jsx("span",{className:"font-medium text-slate-300",children:"Fuel price (per litre)"}),e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-400/30 bg-slate-900/60 px-4 py-3 text-base text-white transition focus-within:border-indigo-400 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-400/40",children:[e.jsx("input",{id:"cost",type:"number",min:"0",step:"1",value:l,onChange:c,required:!0,className:"w-full border-0 bg-transparent p-0 text-right text-white placeholder:text-slate-400 focus:outline-none focus:ring-0"}),e.jsx("span",{className:"text-sm text-slate-200/80","aria-hidden":"true","data-testid":"cost-suffix",children:".9"})]})]}),e.jsx(F,{type:"submit",className:"w-full rounded-full bg-gradient-to-r from-indigo-500 to-violet-500 text-sm font-semibold uppercase tracking-[0.08em] shadow-[0_15px_35px_rgba(108,99,255,0.35)] transition hover:from-indigo-400 hover:to-violet-400",children:"Calculate cost"})]})}function h({label:t,value:a,testId:l}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-300",children:t}),e.jsx("p",{className:"mt-1 text-2xl font-semibold","data-testid":l,children:a})]})}function O({calculation:t}){return e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-4 md:grid-cols-[repeat(auto-fit,minmax(140px,1fr))]",children:[e.jsx(h,{label:"Cost",value:t?`£${t.cost.toFixed(2)}`:"—",testId:"petrol-cost"}),e.jsx(h,{label:"Quantity",value:t?`${t.litres.toFixed(1)} L`:"—",testId:"petrol-quantity"}),e.jsx(h,{label:"Cost per mile",value:t?`${t.costPerMilePence.toFixed(1)} p`:"—",testId:"petrol-cost-per-mile"})]})}function D({mpg:t,miles:a,costPerLitre:l,onMpgChange:n,onMilesChange:r,onCostChange:c,onSubmit:o,resultMessage:p,calculation:x}){return e.jsxs("section",{className:"space-y-4 rounded-[26px] border border-slate-500/30 bg-slate-900/55 p-6 shadow-[0_15px_50px_rgba(3,7,18,0.55)] backdrop-blur-[14px] md:p-8",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Trip details"}),e.jsx(M,{mpg:t,miles:a,costPerLitre:l,onMpgChange:n,onMilesChange:r,onCostChange:c,onSubmit:o}),p&&e.jsx("div",{className:"text-sm font-semibold text-amber-200","aria-live":"polite",children:p}),e.jsx(O,{calculation:x})]})}const N={Hitchin:{lat:51.9666095,lng:-.2395976},Chesterfield:{lat:53.2352134,lng:-1.4264097},Royston:{lat:52.0472741,lng:-.0246467}},y="petrol:fuelType",v="petrol:mpg",w="petrol:miles",_="petrol:costPerLitre",m=(t,a)=>{try{const l=localStorage.getItem(t);if(l!==null)return l}catch{}return a},G=()=>{const[t,a]=React.useState(()=>m(v,"57")),[l,n]=React.useState(()=>m(w,"127")),[r,c]=React.useState(()=>m(_,"137")),[o,p]=React.useState(()=>m(y,"Petrol")==="Diesel"?"Diesel":"Petrol"),[x,b]=React.useState(""),[R,f]=React.useState(null);React.useEffect(()=>{const s=["m-0"];return document.body.classList.add(...s),()=>{document.body.classList.remove(...s)}},[]),React.useEffect(()=>{try{localStorage.setItem(y,o),localStorage.setItem(v,t),localStorage.setItem(w,l),localStorage.setItem(_,r)}catch{}},[o,t,l,r]);const E=s=>{s.preventDefault();const i=parseFloat(t),d=parseFloat(l),u=parseFloat(r);if(i<=0||d<0||u<0||Number.isNaN(i)||Number.isNaN(d)||Number.isNaN(u)){b("Please enter positive values for MPG and non-negative values for miles and cost."),f(null);return}const j=u+.9,g=d/i*4.54609,T=g*j/100,k=g*j/d;b(""),f({cost:T,litres:g,costPerMilePence:k})},P=s=>{p(s.target.checked?"Diesel":"Petrol")},C=s=>{const i=N[s];if(!i)throw new Error(`Town ${s} is not configured in GPS_COORDS`);return`https://www.petrolprices.com/app/map?${new URLSearchParams([["fuelType",o==="Petrol"?"2":"5"],["brandType","0"],["resultLimit","0"],["offset","0"],["sortType","price"],["lat",i.lat.toString()],["lng",i.lng.toString()],["z","10"],["d","5"]]).toString()}`};return e.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_rgba(76,29,149,0.7),_transparent_54%),#030712] px-6 py-8 text-slate-50 md:py-12",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-[1100px] flex-col gap-8",children:[e.jsx(L,{}),e.jsxs("div",{className:"grid grid-cols-1 gap-7 md:grid-cols-[repeat(auto-fit,minmax(280px,1fr))]",children:[e.jsx(D,{mpg:t,miles:l,costPerLitre:r,onMpgChange:s=>a(s.target.value),onMilesChange:s=>n(s.target.value),onCostChange:s=>c(s.target.value),onSubmit:E,resultMessage:x,calculation:R}),e.jsx(I,{fuelType:o,onToggle:P,getUrl:C,towns:Object.keys(N)})]})]})})},S=document.getElementById("root");if(!S)throw new Error("Root element #root not found");document.body.classList.add("petrol-page");ReactDOM.createRoot(S).render(e.jsx(React.StrictMode,{children:e.jsx(G,{})}));
