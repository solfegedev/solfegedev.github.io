function O(t,n){const e=React.useRef(n);React.useEffect(function(){n!==e.current&&t.attributionControl!=null&&(e.current!=null&&t.attributionControl.removeAttribution(e.current),n!=null&&t.attributionControl.addAttribution(n)),e.current=n},[t,n])}const z=1;function T(t){return Object.freeze({__version:z,map:t})}function N(t,n){return Object.freeze({...t,...n})}const m=React.createContext(null);function d(){const t=React.use(m);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function b(t){function n(e,u){const{instance:c,context:r}=t(e).current;React.useImperativeHandle(u,()=>c);const{children:a}=e;return a==null?null:React.createElement(m,{value:r},a)}return React.forwardRef(n)}function S(t){function n(e,u){const[c,r]=React.useState(!1),{instance:a}=t(e,r).current;React.useImperativeHandle(u,()=>a),React.useEffect(function(){c&&a.update()},[a,c,e.children]);const o=a._contentNode;return o?ReactDOM.createPortal(e.children,o):null}return React.forwardRef(n)}function j(t){function n(e,u){const{instance:c}=t(e).current;return React.useImperativeHandle(u,()=>c),null}return React.forwardRef(n)}function p(t,n){const e=React.useRef(void 0);React.useEffect(function(){return n!=null&&t.instance.on(n),e.current=n,function(){e.current!=null&&t.instance.off(e.current),e.current=null}},[t,n])}function R(t,n){const e=t.pane??n.pane;return e?{...t,pane:e}:t}function k(t,n){return function(u,c){const r=d(),a=t(R(u,r),r);return O(r.map,u.attribution),p(a.current,u.eventHandlers),n(a.current,r,u,c),a}}function C(t,n,e){return Object.freeze({instance:t,context:n,container:e})}function y(t,n){return n==null?function(u,c){const r=React.useRef(void 0);return r.current||(r.current=t(u,c)),r}:function(u,c){const r=React.useRef(void 0);r.current||(r.current=t(u,c));const a=React.useRef(u),{instance:o}=r.current;return React.useEffect(function(){a.current!==u&&(n(o,u,a.current),a.current=u)},[o,u,n]),r}}function g(t,n){React.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){n.layerContainer?.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function I(t){return function(e){const u=d(),c=t(R(e,u),u);return O(u.map,e.attribution),p(c.current,e.eventHandlers),g(c.current,u),c}}function A(t,n){const e=React.useRef(void 0);React.useEffect(function(){if(n.pathOptions!==e.current){const c=n.pathOptions??{};t.instance.setStyle(c),e.current=c}},[t,n])}function D(t){return function(e){const u=d(),c=t(R(e,u),u);return p(c.current,e.eventHandlers),g(c.current,u),A(c.current,e),c}}function _(t,n){const e=y(t,n),u=I(e);return b(u)}function V(t,n){const e=y(t),u=k(e,n);return S(u)}function X(t,n){const e=y(t,n),u=D(e);return b(u)}function Z(t,n){const e=y(t,n),u=I(e);return j(u)}function B(t,n,e){const{opacity:u,zIndex:c}=n;u!=null&&u!==e.opacity&&t.setOpacity(u),c!=null&&c!==e.zIndex&&t.setZIndex(c)}function G(){return d().map}function q(t){const n=G();return React.useEffect(function(){return n.on(t),function(){n.off(t)}},[n,t]),n}function U({bounds:t,boundsOptions:n,center:e,children:u,className:c,id:r,placeholder:a,style:o,whenReady:i,zoom:f,...M},H){const[P]=React.useState({className:c,id:r,style:o}),[l,h]=React.useState(null),v=React.useRef(void 0);React.useImperativeHandle(H,()=>l?.map??null,[l]);const w=React.useCallback(E=>{if(E!==null&&!v.current){const s=new L.Map(E,M);v.current=s,e!=null&&f!=null?s.setView(e,f):t!=null&&s.fitBounds(t,n),i!=null&&s.whenReady(i),h(T(s))}},[]);React.useEffect(()=>()=>{l?.map.remove()},[l]);const x=l?React.createElement(m,{value:l},u):a??null;return React.createElement("div",{...P,ref:w},x)}const F=React.forwardRef(U),J=_(function({position:n,...e},u){const c=new L.Marker(n,e);return C(c,N(u,{overlayContainer:c}))},function(n,e,u){e.position!==u.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==u.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==u.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==u.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==u.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),K=V(function(n,e){const u=new L.Popup(n,e.overlayContainer);return C(u,e)},function(n,e,{position:u},c){React.useEffect(function(){const{instance:a}=n;function o(f){f.popup===a&&(a.update(),c(!0))}function i(f){f.popup===a&&c(!1)}return e.map.on({popupopen:o,popupclose:i}),e.overlayContainer==null?(u!=null&&a.setLatLng(u),a.openOn(e.map)):e.overlayContainer.bindPopup(a),function(){e.map.off({popupopen:o,popupclose:i}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(a)}},[n,e,c,u])}),Q=Z(function({url:n,...e},u){const c=new L.TileLayer(n,R(e,u));return C(c,u)},function(n,e,u){B(n,e,u);const{url:c}=e;c!=null&&c!==u.url&&n.setUrl(c)});export{m as L,F as M,K as P,Q as T,J as a,d as b,b as c,y as d,C as e,N as f,X as g,q as h,G as u};
