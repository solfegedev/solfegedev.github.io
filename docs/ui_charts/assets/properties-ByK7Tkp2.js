import{j as s,c as fs}from"./client-B8KsQLkO.js";import{a as ms,C as js}from"./CookieConsentWrapper-BX3Mx7Xo.js";import*as T from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import gs,{createContext as vs,useState as j,useRef as F,useEffect as A,useCallback as I,useImperativeHandle as _s,useMemo as ys,useContext as pe}from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import{g as ie,m as He}from"./store-ZXNLDa3M.js";import{c as ws}from"./clipboard-nCoCNLhi.js";import{A as $,I as X,D as Ss}from"./Comps-DLesJydu.js";import{D as de}from"./dates-ZEyg73w4.js";import{B as Z}from"./Badge-Be_eTuxu.js";import{a as Ns,b as Cs,u as Ee}from"./useMergedRefs-C5QQzXz6.js";import{u as Ds}from"./useTimeout-BIBEpgUV.js";import{A as ze,D as re}from"./Dropdown-BB7KTRUo.js";import{u as Q,c as M,b as Is,d as ks,e as bs}from"./Button-AoLKMrJK.js";import{f as As,m as Fe}from"./ElementChildren-AZvnq_HE.js";import{t as $s,T as Ps,b as Es}from"./TransitionWrapper-BXzvZz4x.js";import{g as Ve,a as zs}from"./googleMap-BK_wHpwx.js";import Fs from"https://cdn.jsdelivr.net/npm/proj4@2.12.1/+esm";import{C as Ts,B as ae}from"./Pagination-C8_J7ecc.js";import{C as Te,F as L}from"./Form-By6JqNI0.js";import{N as oe,a as Ms,b as Me}from"./NavDropdown-BxzNddh-.js";import{C as ce}from"./CloseButton-BMmjgt8k.js";import"https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm";import"https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3.0.1/+esm";import"./useWillUnmount-CzXZtEdY.js";import"./CardHeaderContext-Dz0GHBZ8.js";import"./divWithClassName-CAovPfu4.js";import"./Nav-B3t26J58.js";const Y=vs(null),Ls=({children:e})=>{const t=ie(),[n,r]=j(parseInt(t.get("page")??"1")),[c,a]=j((t.get("exclSTC")??"0")==="1"),[o,h]=j((t.get("exclFlats")??"0")==="1"),[i,p]=j((t.get("exclDistance")??"0")==="1"),[d,u]=j(parseFloat(t.get("distance")??"0.3")),[m,g]=j(t.get("address")??""),[_,b]=j(t.get("agency")??""),[N,y]=j(t.get("price")??""),[W,G]=j(t.get("id")??""),[P,se]=j([]),[U,q]=j([]),K={selectedPage:n,setSelectedPage:r,isStcHidden:c,setIsStcHidden:a,isFlatHidden:o,setIsFlatHidden:h,isDistanceApplied:i,setIsDistanceApplied:p,valueDistance:d,setValueDistance:u,valueAddress:m,setValueAddress:g,valueAgency:_,setValueAgency:b,valuePrice:N,setValuePrice:y,valueID:W,setValueID:G,itemsSelectable:P,setItemsSelectable:se,itemsDisplayed:U,setItemsDisplayed:q};return s.jsx(Y.Provider,{value:K,children:e})};function Bs(e,t){const n=F(!0);A(()=>{if(n.current){n.current=!1;return}return e()},t)}const Ze=T.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},c)=>(t=Q(t,"carousel-caption"),s.jsx(n,{ref:c,className:M(e,t),...r})));Ze.displayName="CarouselCaption";const We=T.forwardRef(({as:e="div",bsPrefix:t,className:n,...r},c)=>{const a=M(n,Q(t,"carousel-item"));return s.jsx(e,{ref:c,...r,className:a})});We.displayName="CarouselItem";const Os=40;function Rs(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&getComputedStyle(e.parentNode).display!=="none"}const Ge=T.forwardRef(({defaultActiveIndex:e=0,...t},n)=>{const{as:r="div",bsPrefix:c,slide:a=!0,fade:o=!1,controls:h=!0,indicators:i=!0,indicatorLabels:p=[],activeIndex:d,onSelect:u,onSlide:m,onSlid:g,interval:_=5e3,keyboard:b=!0,onKeyDown:N,pause:y="hover",onMouseOver:W,onMouseOut:G,wrap:P=!0,touch:se=!0,onTouchStart:U,onTouchMove:q,onTouchEnd:K,prevIcon:Qe=s.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:_e="Previous",nextIcon:Ye=s.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:ye="Next",variant:we,className:es,children:ue,...ss}=Ns({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),C=Q(c,"carousel"),R=Is(),H=F(null),[Se,Ne]=j("next"),[ts,te]=j(!1),[V,Ce]=j(!1),[v,ns]=j(d||0);A(()=>{!V&&d!==v&&(H.current?Ne(H.current):Ne((d||0)>v?"next":"prev"),a&&Ce(!0),ns(d||0))},[d,V,v,a]),A(()=>{H.current&&(H.current=null)});let E=0,De;As(ue,(l,x)=>{++E,x===d&&(De=l.props.interval)});const Ie=Cs(De),w=I(l=>{if(V)return;let x=v-1;if(x<0){if(!P)return;x=E-1}H.current="prev",u==null||u(x,l)},[V,v,u,P,E]),S=Ee(l=>{if(V)return;let x=v+1;if(x>=E){if(!P)return;x=0}H.current="next",u==null||u(x,l)}),xe=F();_s(n,()=>({element:xe.current,prev:w,next:S}));const ke=Ee(()=>{!document.hidden&&Rs(xe.current)&&(R?w():S())}),z=Se==="next"?"start":"end";Bs(()=>{a||(m==null||m(v,z),g==null||g(v,z))},[v]);const rs=`${C}-item-${Se}`,as=`${C}-item-${z}`,os=I(l=>{$s(l),m==null||m(v,z)},[m,v,z]),cs=I(()=>{Ce(!1),g==null||g(v,z)},[g,v,z]),ls=I(l=>{if(b&&!/input|textarea/i.test(l.target.tagName))switch(l.key){case"ArrowLeft":l.preventDefault(),R?S(l):w(l);return;case"ArrowRight":l.preventDefault(),R?w(l):S(l);return}N==null||N(l)},[b,N,w,S,R]),is=I(l=>{y==="hover"&&te(!0),W==null||W(l)},[y,W]),ds=I(l=>{te(!1),G==null||G(l)},[G]),be=F(0),ne=F(0),Ae=Ds(),ps=I(l=>{be.current=l.touches[0].clientX,ne.current=0,y==="hover"&&te(!0),U==null||U(l)},[y,U]),us=I(l=>{l.touches&&l.touches.length>1?ne.current=0:ne.current=l.touches[0].clientX-be.current,q==null||q(l)},[q]),xs=I(l=>{if(se){const x=ne.current;Math.abs(x)>Os&&(x>0?w(l):S(l))}y==="hover"&&Ae.set(()=>{te(!1)},_||void 0),K==null||K(l)},[se,y,w,S,Ae,_,K]),$e=_!=null&&!ts&&!V,he=F();A(()=>{var l,x;if(!$e)return;const D=R?w:S;return he.current=window.setInterval(document.visibilityState?ke:D,(l=(x=Ie.current)!=null?x:_)!=null?l:void 0),()=>{he.current!==null&&clearInterval(he.current)}},[$e,w,S,Ie,_,ke,R]);const Pe=ys(()=>i&&Array.from({length:E},(l,x)=>D=>{u==null||u(x,D)}),[i,E,u]);return s.jsxs(r,{ref:xe,...ss,onKeyDown:ls,onMouseOver:is,onMouseOut:ds,onTouchStart:ps,onTouchMove:us,onTouchEnd:xs,className:M(es,C,a&&"slide",o&&`${C}-fade`,we&&`${C}-${we}`),children:[i&&s.jsx("div",{className:`${C}-indicators`,children:Fe(ue,(l,x)=>s.jsx("button",{type:"button","data-bs-target":"","aria-label":p!=null&&p.length?p[x]:`Slide ${x+1}`,className:x===v?"active":void 0,onClick:Pe?Pe[x]:void 0,"aria-current":x===v},x))}),s.jsx("div",{className:`${C}-inner`,children:Fe(ue,(l,x)=>{const D=x===v;return a?s.jsx(Ps,{in:D,onEnter:D?os:void 0,onEntered:D?cs:void 0,addEndListener:Es,children:(J,hs)=>T.cloneElement(l,{...hs,className:M(l.props.className,D&&J!=="entered"&&rs,(J==="entered"||J==="exiting")&&"active",(J==="entering"||J==="exiting")&&as)})}):T.cloneElement(l,{className:M(l.props.className,D&&"active")})})}),h&&s.jsxs(s.Fragment,{children:[(P||d!==0)&&s.jsxs(ze,{className:`${C}-control-prev`,onClick:w,children:[Qe,_e&&s.jsx("span",{className:"visually-hidden",children:_e})]}),(P||d!==E-1)&&s.jsxs(ze,{className:`${C}-control-next`,onClick:S,children:[Ye,ye&&s.jsx("span",{className:"visually-hidden",children:ye})]})]})]})});Ge.displayName="Carousel";const fe=Object.assign(Ge,{Caption:Ze,Item:We});let ge=new Date;const le=e=>{const t=new Date(e),n={day:"numeric",month:"short",year:"numeric"},r=ge.valueOf()-t.valueOf();return r<14*de&&(n.weekday="long"),r<2*de&&(n.hour="numeric",n.minute="numeric"),t.toLocaleDateString("en-GB",n)},Hs=e=>{const t=new Date(e),n={day:"numeric",month:"short",year:"numeric"};return t.toLocaleDateString("en-GB",n)},Ue=e=>{const t=new Date(e),n={month:"short",year:"numeric"};return t.toLocaleDateString("en-GB",n)},me=e=>{const t=new Date(e);return((ge.valueOf()-t.valueOf())/de).toLocaleString("en-GB",{maximumFractionDigits:1})},Le=(e,t=!1)=>{if(e===void 0)return"";const n=new Date(e),r=ge.valueOf()-n.valueOf();let c=(t?-r:r)/6e4;const a=c<0?"-":"";c=Math.abs(c);const o=Math.floor(c/60),i=Math.floor(c%60).toLocaleString("en-GB",{minimumIntegerDigits:2});return`${a}${o}h${i}m`},B=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(e),Vs=(e,t)=>s.jsxs(s.Fragment,{children:[e,", ",t]}),k=(e,t)=>s.jsxs(s.Fragment,{children:[e," ◆ ",t]}),f=({icon:e,text:t,url:n=""})=>{const r=n?s.jsx($,{href:n,children:t}):t;return s.jsxs("span",{className:"x-nowrap",children:[e," ",r]})},ee=({isLink:e=!1,style:t={}})=>s.jsx(ve,{src:"img/properties/r.ico",isLink:e,style:t}),O=({isLink:e=!1,style:t={}})=>s.jsx(ve,{src:"img/properties/z.ico",isLink:e,style:t}),qe=({isLink:e=!1,style:t={}})=>s.jsx(ve,{src:"img/properties/o.ico",isLink:e,style:t}),ve=({isLink:e=!1,style:t={},src:n})=>(t.width=e?"1.4rem":"1rem",s.jsx(X,{loading:"lazy",referrerPolicy:"no-referrer",crossOrigin:"anonymous",src:n,style:t,alt:"z Property"})),Zs=({item:e})=>{const t=[s.jsx(Ws,{item:e},"1")];return e.zoopla_advert_id&&t.push(s.jsx(Ke,{item:e},"2")),e.zoopla_uprn&&t.push(s.jsx(Gs,{item:e},"3")),e.epcs&&t.push(s.jsx(Us,{item:e},"4")),s.jsxs("p",{children:[s.jsx("strong",{children:"Links:"})," ",t.reduce(k)]})},Ke=({item:e})=>{const n=`https://www.zoopla.co.uk/${e.channel==="rent"?"to-rent":"for-sale"}/details/${e.zoopla_advert_id}/`;return s.jsx(f,{icon:s.jsx(O,{}),url:n,text:"Advert"})},Ws=({item:e})=>{const t=`https://www.rightmove.co.uk/properties/${e.id}#/?channel=${e.channel}`;return s.jsx(f,{icon:s.jsx(ee,{}),url:t,text:"Advert"})},Gs=({item:e})=>{const t=`https://www.zoopla.co.uk/property/uprn/${e.zoopla_uprn}/`;return s.jsx(f,{icon:s.jsx(O,{}),url:t,text:"Estimate"})},Us=({item:e})=>s.jsxs(s.Fragment,{children:[s.jsx(ee,{})," ",e.epcs.map((t,n)=>s.jsx($,{href:t.url,children:t.caption},n)).reduce(Vs)]}),qs=({item:e})=>{const t=(e.floorplans??[]).map(r=>({url:r.url})).reverse(),n=(e.images??[]).concat(t);return s.jsxs(s.Fragment,{children:[n.length===0?s.jsx("p",{className:"x-noImageProvided",children:"No images provided"}):s.jsx(Ks,{imagesAndFloorplans:n}),s.jsx(Xs,{item:e}),s.jsx(Js,{item:e})]})},Ks=({imagesAndFloorplans:e})=>s.jsxs(fe,{interval:de,defaultActiveIndex:0,children:[e.map((t,n)=>s.jsxs(fe.Item,{children:[s.jsx(X,{className:"d-block",src:t.url,alt:t.caption?"caption: "+t.caption:void 0}),s.jsx(fe.Caption,{style:{display:"flex",justifyContent:"center"},children:s.jsxs("p",{children:[s.jsx("strong",{children:`${n+1}/${e.length} `}),t.caption||""]})})]},n)),e.length===0&&s.jsx(X,{className:"d-block",alt:"No images provided"})]}),Js=({item:e})=>e.zoopla_est||e.zoopla_peak||e.zoopla_rent_estimate?s.jsxs(s.Fragment,{children:[e.zoopla_est&&s.jsx(Qs,{item:e}),e.zoopla_peak&&s.jsx(Ys,{item:e}),e.zoopla_rent_estimate&&s.jsx(et,{item:e})]}):e.zoopla_advert_id?s.jsx("p",{className:"x-caption-2",children:s.jsx(Ke,{item:e})}):null,Xs=({item:e})=>{const t=`https://www.rightmove.co.uk/properties/${e.id}#/media?channel=${e.channel}`,n=r=>{const c=["",`  "${e.id}": {`,'    "zoopla_advert_id": null, "zoopla_uprn": null,',`    "__address_r": "${e.address}",`,'    "notes": null, "size_sqm": null, "coordinates": null},',""];ws(c.join(`
`))};return s.jsxs("p",{className:"x-caption-1",children:[s.jsx("span",{className:"x-loop-index",onClick:n,children:e.loopIndex}),e.sold_let&&s.jsx(Z,{text:"dark",bg:"warning",className:"x-badge",children:e.sold_let}),e.is_new&&s.jsx(Z,{text:"light",bg:"success",className:"x-badge",children:"NEW"}),s.jsx($,{href:t,style:{textDecoration:"none"},children:B(e.price)})]})},Qs=({item:e})=>{const t=`https://www.zoopla.co.uk/property/uprn/${e.zoopla_uprn}/`;return e.channel==="rent"?s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:je(e.price,e.zoopla_rent_estimate)})," on"," ",s.jsxs($,{href:t,className:"x-manual-all-link",children:[B(e.zoopla_rent_estimate),"pm ",s.jsx(O,{style:{verticalAlign:"unset"}})]})]}):s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:je(e.price,e.zoopla_est*1e3)})," on"," ",s.jsxs($,{href:t,className:"x-manual-all-link",children:[B(e.zoopla_est*1e3)," ",s.jsx(O,{style:{verticalAlign:"unset"}})]}),e.zoopla_estimate_date&&s.jsxs("span",{children:[" in ",Ue(e.zoopla_estimate_date)]})]})},Ys=({item:e})=>e.channel==="rent"?s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:B(e.zoopla_est*1e3)}),e.zoopla_estimate_date&&s.jsxs("span",{children:[" in ",Ue(e.zoopla_estimate_date)]})]}):s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:je(e.price,e.zoopla_peak*1e3)})," on"," ",s.jsx("span",{className:"x-manual-all",children:B(e.zoopla_peak*1e3)})," peak of"," ",s.jsx("span",{className:"x-manual-all",children:e.zoopla_peak_date})]}),et=({item:e})=>e.channel==="rent"?s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:Be(e.price/e.zoopla_est/1e3)})," rental yield"]}):s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:Be(e.zoopla_rent_estimate/e.price)})," ","rental yield at ",B(e.zoopla_rent_estimate),"pm"]}),je=(e,t)=>new Intl.NumberFormat("en-GB",{style:"percent",signDisplay:"exceptZero",minimumFractionDigits:1,maximumFractionDigits:1}).format((e-t)/t),Be=e=>new Intl.NumberFormat("en-GB",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format((1+e)**12-1),st=({item:e})=>{const t=e.coordinates.join(","),n=e.closest&&e.closest.coords?e.closest.coords.join(","):"",r=[s.jsx(tt,{coordsCsv:t,closeCoordsCsv:n},"1"),s.jsx(nt,{coordsCsv:t,closeCoordsCsv:n},"2"),s.jsx(rt,{coordsCsv:t},"3"),s.jsx(at,{coordsCsv:t},"4"),s.jsx(ot,{coords:e.coordinates},"5"),s.jsx(ct,{coords:e.coordinates},"6"),s.jsx(lt,{coords:e.coordinates},"7"),s.jsx(it,{coords:e.coordinates},"8"),s.jsx(dt,{coords:e.coordinates},"9")];return s.jsxs("p",{children:[s.jsx("strong",{children:"Maps:"})," ",r.reduce(k)]})},tt=({coordsCsv:e,closeCoordsCsv:t})=>{const r=Ve({...t?{origin:t,destination:e,isByFoot:!0}:{origin:e},centreZoom:"15z"}),c=s.jsx("i",{className:"fa-solid fa-map-location",style:{color:"#b01010"}});return s.jsx(f,{icon:c,url:r,text:"Map"})},nt=({coordsCsv:e,closeCoordsCsv:t})=>{const r=Ve({...t?{origin:t,destination:e,isByFoot:!0}:{origin:e},centreZoom:"2696m",isSatellite:!0});return s.jsx(f,{icon:"🛰",url:r,text:"Satellite"})},rt=({coordsCsv:e})=>{const t=`https://earth.google.com/web/@${e},132a,25d,35y,0h,0t,0r`;return s.jsx(f,{icon:"🌍",url:t,text:"Earth"})},at=({coordsCsv:e})=>{const t=zs({originCsv:e}),n=s.jsx("i",{className:"fa-solid fa-street-view",style:{color:"#b08800"}});return s.jsx(f,{icon:n,url:t,text:"StreetView"})},ot=({coords:e})=>{const n=`https://open.xploria.co.uk/app/know-your-place?map=${e.slice(0).reverse().join("*")}*18&view=elcAu7IT4`;return s.jsx(f,{icon:"💰",url:n,text:"Standards"})},ct=({coords:e})=>{const n=`https://open.xploria.co.uk/app/know-your-place?map=${e.slice(0).reverse().join("*")}*18&view=elcAu7IT4&theme=w0fDyvnN_`,r=s.jsx("i",{className:"fa-solid fa-handcuffs",style:{color:"#808080"}});return s.jsx(f,{icon:r,url:n,text:"Crime"})},lt=({coords:e})=>{const t="EPSG:4326",n="+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs",[r,c]=Fs(t,n,[e[1],e[0]]).map(Math.round),a=`https://check-long-term-flood-risk.service.gov.uk/map?easting=${r}&northing=${c}`;return s.jsx(f,{icon:"🌊",url:a,text:"Flood"})},it=({coords:e})=>{const t=e.join("%2C"),n=`https://en-gb.topographic-map.com/map/?center=${t}&zoom=16&popup=${t}`,r=s.jsx("i",{className:"fa-solid fa-mountain-sun",style:{color:"#6fcdf9"}});return s.jsx(f,{icon:r,url:n,text:"Elevation"})},dt=({coords:e})=>{const n=`https://www.cyclosm.org/#map=17/${e.join("/")}/cyclosm`,r=s.jsx("i",{className:"fa-solid fa-person-biking",style:{color:"#b01010"}});return s.jsx(f,{icon:r,url:n,text:"Cycling"})},pt=({item:e})=>{const t=[s.jsx(ft,{item:e},"1"),s.jsx(mt,{item:e},"2"),s.jsx(ut,{item:e},"3"),s.jsx(xt,{item:e},"4"),s.jsx(jt,{item:e},"5"),s.jsx(ht,{item:e},"6")];return s.jsxs("p",{children:[s.jsx("strong",{children:"In Street:"})," ",t.reduce(k)]})},ut=({item:e})=>{const t=e.address_postcode.toLowerCase().replace(" ","-"),n=e.address_postcode.toUpperCase().replace(" ","%20"),r=`https://www.zoopla.co.uk/house-prices/${t}/?q=${n}&sortOrder=address&sortDirection=asc`;return s.jsx(f,{icon:s.jsx(O,{}),url:r,text:"Estimate / Sold Prices"})},xt=({item:e})=>{const n=`https://www.rightmove.co.uk/house-prices/${e.address_postcode.toLowerCase().replace(" ","-")}.html`;return s.jsx(f,{icon:s.jsx(ee,{}),url:n,text:"Sold Prices"})},ht=({item:e})=>{const n=`https://www.crime-statistics.co.uk/postcode/${e.address_postcode.toUpperCase().replace(" ","%20")}`,r=s.jsx("i",{className:"fa-solid fa-handcuffs",style:{color:"#808080"}});return s.jsx(f,{icon:r,url:n,text:"Crimes"})},ft=({item:e})=>{const t=e.address_postcode.toLowerCase().replace(" ","-"),n=e.address_postcode.replace(" ","+"),r=e.channel==="rent"?`https://www.zoopla.co.uk/to-rent/property/${t}/?radius=0&q=${n}&search_source=to-rent&results_sort=newest_listings&include_rented=true`:`https://www.zoopla.co.uk/for-sale/property/${t}/?radius=0&q=${n}&search_source=for-sale&results_sort=newest_listings&is_auction=false&is_retirement_home=false&is_shared_ownership=false&include_sold=true`;return s.jsx(f,{icon:s.jsx(O,{}),url:r,text:"Adverts"})},mt=({item:e})=>{const t=e.address_postcode.toLowerCase().replace(" ","-"),n=e.channel==="rent"?`https://www.onthemarket.com/to-rent/property/${t}/?let-agreed=true&radius=0.25&shared=false&student=false&view=grid`:`https://www.onthemarket.com/for-sale/property/${t}/?auction=false&radius=0.25&retirement=false&shared-ownership=false&under-offer=true&view=grid`;return s.jsx(f,{icon:s.jsx(qe,{}),url:n,text:"Adverts"})},jt=({item:e})=>{const t=s.jsx("i",{className:"fa-solid fa-leaf",style:{color:"#659748"}}),r=`https://find-energy-certificate.service.gov.uk/find-a-certificate/search-by-postcode?postcode=${e.address_postcode.replace(" ","+")}`;return s.jsx(f,{icon:t,url:r,text:"EPCs"})},gt=({item:e})=>s.jsxs("div",{className:"x-card-right",children:[e.notes&&s.jsxs("p",{className:"x-manual-all",children:["Extra Notes: ",e.notes]}),s.jsx(vt,{item:e}),e.let_info&&s.jsx(kt,{let_info:e.let_info}),e.previous_prices&&s.jsx(_t,{prices:e.previous_prices}),s.jsx(yt,{item:e}),s.jsx(wt,{item:e}),s.jsx(St,{item:e}),s.jsx(st,{item:e}),s.jsx(Zs,{item:e}),e.brochures&&s.jsx(Nt,{brochures:e.brochures}),e.key_features&&s.jsx(Dt,{features:e.key_features}),s.jsx(pt,{item:e}),s.jsx("p",{children:e.summary}),e.agency&&s.jsx(It,{agency:e.agency,id:e.id})]}),vt=({item:e})=>e.date_updated?s.jsxs("p",{children:[s.jsx("span",{className:"x-update-reason-updated",children:"Reduced"})," ",s.jsx("span",{className:"x-update-reason-updated x-date-relative","data-convert":"days","data-date":e.date_updated,children:me(e.date_updated)})," ","days ago (on ",s.jsx("strong",{children:le(e.date_updated)}),"). First added"," ",s.jsx("span",{className:"x-first-added x-date-relative","data-convert":"days","data-date":e.date_added,children:me(e.date_added)})," ","days ago (on ",s.jsx("strong",{children:le(e.date_added)}),")."]}):s.jsxs("p",{children:[s.jsx("span",{className:"x-update-reason-new",children:"New"})," ",s.jsx("span",{className:"x-update-reason-new x-date-relative","data-convert":"days","data-date":e.date_added,children:me(e.date_added)})," ","days ago (on ",s.jsx("strong",{children:le(e.date_added)}),")."]}),_t=({prices:e})=>s.jsxs("p",{children:[s.jsx("strong",{children:"Previous prices:"})," ",e.map((t,n)=>s.jsxs("span",{children:[B(t.price)," on ",Hs(t.date)]},n)).reduce(k)]}),yt=({item:e})=>{const t=s.jsx("span",{className:"x-size-sqm",children:e.size_sqm}),n=[];return e.size_sqm&&n.push(s.jsx(f,{icon:t,text:"m²"},"1")),n.push(s.jsx(f,{icon:"🛏",text:`${e.bedrooms}`},"2")),e.bathrooms!==void 0&&n.push(s.jsx(f,{icon:"🛀",text:`${e.bathrooms}`},"3")),n.push(s.jsx(f,{icon:e.property_group_icon,text:e.property_group},"4")),s.jsx("p",{children:n.reduce(k)})},wt=({item:e})=>{let t="";return e.address_street_num&&(t=/\d\w?$/i.test(e.address_street_num)?" ":", "),s.jsxs("p",{children:[e.address_street_num&&s.jsx("span",{className:"x-manual-all",children:e.address_street_num}),s.jsx("strong",{children:t+e.address+", "}),s.jsx("strong",{className:"x-postcode",children:e.address_postcode})]})},St=({item:e})=>s.jsxs("p",{children:[s.jsx("span",{className:"x-distance-miles",children:e.closest.miles.toFixed(2)})," miles to"," ",s.jsx("span",{className:"x-known-place",children:e.closest.place})]}),Nt=({brochures:e})=>s.jsxs("p",{children:[s.jsx("strong",{children:"Brochures:"})," ",e.map((t,n)=>s.jsx(Ct,{brochure:t},n)).reduce(k)]}),Ct=({brochure:e})=>{const n=e.url.replace(/\?.*/,"").replace(/\/+$/,"").toLowerCase().endsWith(".pdf")?s.jsx("i",{className:"fa-solid fa-file-lines",style:{color:"#dc3545"}}):s.jsx("i",{className:"fa-solid fa-link",style:{color:"#808080"}});return s.jsx(f,{icon:n,url:e.url,text:e.caption})},Dt=({features:e})=>s.jsxs("p",{children:[s.jsx("strong",{children:"Other:"})," ",e.map((t,n)=>s.jsx("span",{children:t},n)).reduce(k)]}),It=({agency:e,id:t})=>s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"end"},children:[s.jsx(X,{src:e.url,title:e.caption,alt:e.caption,style:{maxHeight:"3rem",maxWidth:"6rem"}}),s.jsx("span",{style:{fontSize:"0.6rem",marginLeft:"1rem"},children:t})]}),kt=({let_info:e})=>{const t=[];return e.date_available&&t.push(`Available ${e.date_available}`),e.furnish&&t.push(e.furnish),e.min_duration&&t.push(`${e.min_duration} months`),t.length===0?s.jsx(s.Fragment,{}):s.jsxs("p",{children:[s.jsx("strong",{children:"Let:"})," ",t.map((n,r)=>s.jsx("span",{children:n},r)).reduce(k)]})},Je=T.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...c},a)=>{const o=Q(e,"container"),h=typeof t=="string"?`-${t}`:"-fluid";return s.jsx(n,{ref:a,...c,className:M(r,t?`${o}${h}`:o)})});Je.displayName="Container";const Xe=T.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},c)=>{const a=Q(e,"row"),o=ks(),h=bs(),i=`${a}-cols`,p=[];return o.forEach(d=>{const u=r[d];delete r[d];let m;u!=null&&typeof u=="object"?{cols:m}=u:m=u;const g=d!==h?`-${d}`:"";m!=null&&p.push(`${i}${g}-${m}`)}),s.jsx(n,{ref:c,...r,className:M(t,a,...p)})});Xe.displayName="Row";const bt=({item:e})=>s.jsx(Ts,{className:"x-card","data-miles":e.closest.miles,"data-isflat":e.property_group_icon==="🏢",children:s.jsx(Je,{fluid:!0,children:s.jsxs(Xe,{children:[s.jsx(Te,{sm:"5",style:{padding:0},children:s.jsx(qs,{item:e})}),s.jsx(Te,{sm:"7",style:{padding:"1rem",margin:"0"},children:s.jsx(gt,{item:e})})]})})}),Oe={chesterfield:"Chesterfield",chesterfield_ashgate:"Chesterfield Ashgate",chesterfield_rent:"Chesterfield rent",herts:"Herts",herts_s:"Herts_s",hitchin_johnsonpl:"Hitchin Johnson Place",hitchin_rent:"Hitchin rent",basingstoke:"Basingstoke",london:"London"},At=()=>{var h;const[e,t]=j(!0),n=ie(),r=((h=n.get("data"))==null?void 0:h.replace("properties_",""))??"chesterfield_ashgate",c=n.get("nav")==="all"?["chesterfield","chesterfield_ashgate","chesterfield_rent","herts","herts_s","hitchin_johnsonpl","hitchin_rent","basingstoke","london"]:["chesterfield","chesterfield_ashgate","chesterfield_rent","herts","hitchin_johnsonpl","hitchin_rent","basingstoke"],a=i=>{t(i)},o=i=>{const p=new URLSearchParams;p.set("data",`properties_${i}`);const d=ie().get("nav");return d&&p.set("nav",d),"?"+p.toString()};return s.jsxs(oe,{id:"x-navbar",expand:"sm",variant:"dark",onToggle:a,expanded:e,children:[s.jsx(oe.Brand,{children:s.jsx(X,{src:"img/favicon_properties.png",height:"32"})}),s.jsx(oe.Toggle,{"aria-controls":"basic-navbar-nav"}),s.jsx(oe.Collapse,{id:"basic-navbar-nav",children:s.jsx(Ms,{className:"ms-auto me-auto",children:s.jsx(Me,{title:Oe[r],active:!0,children:c.map((i,p)=>s.jsx(Me.Item,{href:o(i),active:i===r,children:Oe[i]},p))})})})]})},$t=({PAGE_LENGTH:e})=>{const t=pe(Y),n=Math.ceil(t.itemsSelectable.length/e),r=c=>{const a=c.target.closest("a.page-link");if(!a)return;let o;a.innerText.includes("First")?o=1:a.innerText.includes("Previous")?o=Math.max(1,t.selectedPage-1):a.innerText.includes("Next")?o=Math.min(n,t.selectedPage+1):a.innerText.includes("Last")?o=n:o=parseInt(a.innerText),console.log(`Page change from: ${t.selectedPage} to: ${o}`),t.setSelectedPage(o),He({page:[o.toString(),"1"]}),document.querySelector("#x-scroll-anchor").scrollIntoView()};return A(()=>{const c=[];for(let a=0;a<t.itemsSelectable.length;++a)if(Math.floor(a/e)+1===t.selectedPage){const o=t.itemsSelectable[a];if(o.loopIndex=`${a+1} / ${t.itemsSelectable.length}`,c.push(o),c.length===e)break}t.setItemsDisplayed(c),console.log("itemsDisplayed",c.length)},[t.selectedPage,t.itemsSelectable,t.setItemsDisplayed,e]),s.jsxs(ae,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",marginTop:"1rem"},onClick:r,children:[n>0&&s.jsx(ae.Prev,{disabled:t.selectedPage===1,style:{width:"4rem"}}),[...Array(n).keys()].map(c=>s.jsx(ae.Item,{active:c+1===t.selectedPage,children:c+1},c)),n>0&&s.jsx(ae.Next,{disabled:t.selectedPage===n,style:{width:"4rem"}})]})},Pt=e=>s.jsx("i",{className:"fa-solid fa-spinner fa-spin",...e}),Re=({checkState:e,label:t})=>{const[n,r]=e;return s.jsxs(L,{children:[s.jsx(L.Check,{type:"switch",onChange:c=>r(c.target.checked),checked:n}),s.jsx("p",{children:t})]})},Et=({checkState:e,labelBefore:t,labelAfter:n,maxWidth:r="3rem",valueState:c})=>{const[a,o]=e,[h,i]=c,p=u=>{i(parseFloat(u.target.value)),o(!1)},d=u=>{u.key==="Enter"?(o(!0),u.preventDefault()):o(!1)};return s.jsxs(L,{children:[s.jsx(L.Check,{type:"switch",onChange:u=>o(u.target.checked),checked:a}),s.jsx("p",{children:t}),s.jsx(L.Control,{value:h,onChange:p,style:{maxWidth:r},onKeyDown:d}),n&&s.jsx("p",{children:n})]})},zt=({label:e,maxWidth:t})=>{const n=pe(Y),[r,c]=j(""),a=(i,p="")=>{p=p.trim(),i==="address"?n.setValueAddress(p):i==="price"?n.setValuePrice(p):i==="agency"?n.setValueAgency(p):i==="id"&&n.setValueID(p)},o=i=>{c(i.target.value)},h=i=>{i.key==="Enter"&&(i.preventDefault(),a("address",r))};return s.jsxs(s.Fragment,{children:[s.jsxs(L,{children:[e&&s.jsx("p",{children:e}),s.jsx(L.Control,{value:r,onChange:o,style:{maxWidth:t},onKeyDown:h}),s.jsxs(Ss,{title:"Search",variant:"success",id:"x-btn-search",onSelect:i=>a(i,r),children:[s.jsx(re.Item,{eventKey:"address",children:"in Address"}),s.jsx(re.Item,{eventKey:"price",children:"in Price"}),s.jsx(re.Item,{eventKey:"agency",children:"in Agency"}),s.jsx(re.Item,{eventKey:"id",children:"in ID"})]})]}),n.valueAddress&&s.jsxs(Z,{pill:!0,bg:"primary",children:[s.jsx(ce,{onClick:()=>a("address"),variant:"white"}),s.jsx("span",{children:n.valueAddress})]}),n.valuePrice&&s.jsxs(Z,{pill:!0,bg:"info",text:"dark",children:[s.jsx(ce,{onClick:()=>a("price")}),s.jsx("span",{children:n.valuePrice})]}),n.valueAgency&&s.jsxs(Z,{pill:!0,bg:"light",text:"dark",children:[s.jsx(ce,{onClick:()=>a("agency")}),s.jsx("span",{children:n.valueAgency})]}),n.valueID&&s.jsxs(Z,{pill:!0,bg:"dark",children:[s.jsx(ce,{onClick:()=>a("id"),variant:"white"}),s.jsx("span",{children:n.valueID})]})]})},Ft=({data:e,PAGE_LENGTH:t})=>{const n=pe(Y),r=o=>o.toLowerCase().replaceAll(" ","");A(()=>{const o=r(n.valueAddress);let h,i;n.valueAgency==="z"?(h="",i=!0):(h=r(n.valueAgency),i=!1);const p=[];e.items.forEach(d=>{n.isStcHidden&&d.sold_let||n.isFlatHidden&&d.property_group_icon==="🏢"||n.isDistanceApplied&&d.closest&&n.valueDistance&&d.closest.miles>n.valueDistance||o&&!r((d.address_street_num||"")+d.address+d.address_postcode).includes(o)||n.valuePrice&&!d.price.toString().includes(n.valuePrice)||i&&(d.zoopla_advert_id||d.zoopla_uprn)||n.valueID&&!d.id.toString().includes(n.valueID)||h&&!r(d.agency.caption).includes(h)||p.push(d)}),n.setItemsSelectable(p),console.log("itemsSelectable",p.length),n.selectedPage>Math.ceil(p.length/t)&&n.setSelectedPage(1)},[n.isStcHidden,n.isFlatHidden,n.isDistanceApplied,n.valueDistance,n.valueAddress,n.valueAgency,n.valuePrice,n.valueID]),A(()=>{He({exclSTC:[n.isStcHidden?"1":"0","0"],exclFlats:[n.isFlatHidden?"1":"0","0"],exclDistance:[n.isDistanceApplied?"1":"0","0"],distance:[n.valueDistance.toFixed(1),"0.3"],address:[n.valueAddress,""],agency:[n.valueAgency,""],price:[n.valuePrice,""],id:[n.valueID,""],page:[n.selectedPage.toString(),"1"]})},[n.isStcHidden,n.isFlatHidden,n.isDistanceApplied,n.valueDistance,n.valueAddress,n.valueAgency,n.valuePrice,n.valueID,n.selectedPage]);const c=e.items.filter(o=>o.sold_let).length,a=e.items.filter(o=>o.property_group_icon==="🏢").length;return s.jsxs(s.Fragment,{children:[s.jsx(Tt,{data:e}),s.jsx(Mt,{searches:e.searches,title:e.title}),s.jsx(Re,{checkState:[n.isStcHidden,n.setIsStcHidden],label:`Exclude the ${c} STCs`}),s.jsx(Re,{checkState:[n.isFlatHidden,n.setIsFlatHidden],label:`Exclude the ${a} flats`}),s.jsx(Et,{checkState:[n.isDistanceApplied,n.setIsDistanceApplied],labelBefore:"Exclude further than",labelAfter:"miles",maxWidth:"3rem",valueState:[n.valueDistance,n.setValueDistance]}),s.jsx(zt,{maxWidth:"8rem"})]})},Tt=({data:e})=>s.jsxs("p",{children:[s.jsxs("span",{className:"x-nowrap",children:["Updated"," ",s.jsx("span",{id:"x-updated-relative",className:"x-date-relative","data-convert":"hours","data-date":e.updated_on,children:Le(e.updated_on)})," ","ago"]})," ",s.jsxs("span",{className:"x-nowrap",children:["(on ",s.jsx("span",{children:le(e.updated_on)}),")"]})," ",s.jsx("br",{}),"Next check starts in:"," ",s.jsx("span",{id:"x-nexton-relative",className:"x-date-relative","data-convert":"hours-negative","data-date":e.next_on,children:Le(e.next_on,!0)})]}),Mt=({searches:e,title:t})=>s.jsxs("p",{children:[t,". Based on ",s.jsx(ee,{style:{verticalAlign:"baseline"}})," searches only:",s.jsx("br",{}),e&&e.map((n,r)=>s.jsx(Lt,{search:n},r)).reduce(k)]}),Lt=({search:e})=>s.jsxs("span",{className:"x-nowrap",children:[s.jsx($,{href:e.url_r,children:s.jsx(ee,{isLink:!0,style:{verticalAlign:"sub"}})})," ",s.jsx($,{href:e.url_z,children:s.jsx(O,{isLink:!0,style:{verticalAlign:"sub"}})})," ",s.jsx($,{href:e.url_o,children:s.jsx(qe,{isLink:!0,style:{verticalAlign:"sub"}})})," ",s.jsx("strong",{children:e.name})]}),Bt=()=>{const e=pe(Y),t=ie().get("data")??"properties_chesterfield_ashgate",n=F(null),[r,c]=j({__loading:!0}),a=10;if(A(()=>{let o=!0;return(async()=>{try{const i=localStorage.getItem("location"),p=i===t?localStorage.getItem("next_on"):null,d=i===t?localStorage.getItem("last_attempt"):null,u=new Date().valueOf();let m,g;d&&u-new Date(d).valueOf()<4e3?(g="FORCE RELOAD due to 2 attempts within 4s",m="reload"):p?new Date(p).valueOf()>u?(g="Keep CACHED data",m="force-cache"):(g="RELOADING as cache data expired",m="reload"):(g="LOAD first time",m="reload"),console.log(`Cache Loading info = ${g}`),n.current&&(n.current.innerText=g);const _=`https://raw.githubusercontent.com/solfegedev/solfegedev.github.io/main/data/${t}.json`;console.log(`Fetch data from server: ${_}`);const b=await fetch(_,{cache:m});if(!b.ok){const y=b.status===404?"This link seems wrong, check you have the correct one":`Failed to get data for: ${t}`;throw new Error(y)}const N=await b.json();localStorage.setItem("location",t),localStorage.setItem("next_on",new Date(N.next_on).toISOString()),localStorage.setItem("last_attempt",new Date().toISOString()),console.log(N),o&&c(N)}catch(i){o&&c({__error:`${i}`})}})().catch(console.error),()=>{o=!1}},[t]),r.favicon){const o=document.querySelector("link[rel='icon']");o.href=`img/properties/${r.favicon}`}if(document.title=r.region,r.__loading)return s.jsxs("main",{children:[s.jsx(Pt,{id:"x-spinner"}),s.jsx("p",{id:"x-spinner-info",ref:n})]});if(r.__error)return s.jsx("main",{style:{color:"red"},children:r.__error});{const o=(e.selectedPage-1)*a+1,h=e.itemsSelectable.length,i=Math.min(h,o+a-1),p=s.jsx($t,{PAGE_LENGTH:a});return s.jsxs(s.Fragment,{children:[s.jsx(At,{}),s.jsxs("main",{children:[s.jsx(Ft,{data:r,PAGE_LENGTH:a}),s.jsxs("div",{id:"x-scroll-anchor",children:[p,h===0?s.jsx("p",{children:s.jsx("strong",{children:"No matching results"})}):s.jsxs("p",{children:["Page ",s.jsx("strong",{children:e.selectedPage}),": properties"," ",s.jsx("strong",{children:o})," -",s.jsx("strong",{children:i})," out of"," ",s.jsx("strong",{children:h})]}),e.itemsDisplayed&&e.itemsDisplayed.map((d,u)=>s.jsx(bt,{item:d},u))]}),p]})]})}};fs.createRoot(document.getElementById("root")).render(s.jsx(gs.StrictMode,{children:s.jsx(js,{children:s.jsx(Ls,{children:s.jsx(Bt,{})})})}));
