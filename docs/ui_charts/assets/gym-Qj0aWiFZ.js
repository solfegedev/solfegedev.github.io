import{j as e,c as f}from"./client-B8KsQLkO.js";import{C as h}from"./CookieConsentWrapper-DBLm3LwE.js";import x,{useState as g,useEffect as u}from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import{i as p}from"./all-BSES4dDh.js";import"https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm";import"https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3.0.1/+esm";const y=()=>{const[t,r]=g(),[s,a]=g(new Date);if(u(()=>{(async function(){const i=await w(7);r(i)})();const o=()=>{if(document.visibilityState==="visible"){const i=new Date;console.log("Update time NOW: ",i),a(i)}};return document.addEventListener("visibilitychange",o),()=>{document.removeEventListener("visibilitychange",o)}},[]),!t)return e.jsx("main",{children:"Loading..."});const l=t.data.sort((o,i)=>o.events.dateStart>i.events.dateStart?1:-1),n=[];let c="";l.forEach((o,i)=>{const d=o.events.dateStart.substring(0,10);d!==c&&n.push(e.jsx(j,{dateStr:d},`${i}-delimiter`)),c=d,n.push(e.jsx(b,{evt:o,now:s},i))});const m=s.toLocaleDateString("en-GB",{hour:"2-digit",minute:"2-digit",weekday:"long",day:"numeric",month:"short",year:"numeric"});return e.jsxs("main",{children:[e.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold"},children:"JD Gyms Chesterfield"}),e.jsx("p",{style:{margin:"1rem"},children:e.jsx("a",{href:"https://www.jdgyms.co.uk/gym/chesterfield/#:~:text=TIMETABLE%20SUBJECT%20TO%20CHANGE",target:"_blank",children:"Official Calendar"})}),e.jsx("p",{style:{fontFamily:"monospace",color:"#0c4a6e"},children:m}),e.jsx("div",{style:{backgroundColor:"#fff",width:p?"45rem":"100vw",margin:"auto"},children:n})]})},j=({dateStr:t})=>{const r=new Date(t).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short",year:"numeric"});return e.jsx("div",{className:"x-delimiter",children:r})},b=({evt:t,now:r})=>{const s=new Date(t.events.dateStart).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),a={backgroundColor:"#ffa8a8"},l=t.events.name==="Spin"?e.jsx("i",{className:"fa-solid fa-person-biking",style:{marginRight:"0.5rem",color:"#0284c7"}}):t.events.name==="HIIT"?e.jsx("i",{className:"fa-solid fa-temperature-arrow-up",style:{marginRight:"0.5rem",color:"#dc2626"}}):t.events.name==="JD Burn"?e.jsx("i",{className:"fa-solid fa-fire",style:{marginRight:"0.5rem",color:"#f97316"}}):t.events.name==="Yoga"?e.jsx("i",{className:"fa-brands fa-y-combinator",style:{marginRight:"0.5rem",color:"#e879f9"}}):t.events.name==="Les Mills Body Balance"?e.jsx("i",{className:"fa-solid fa-scale-balanced",style:{marginRight:"0.5rem",color:"#047857"}}):t.events.name==="Les Mills Body Pump"?e.jsx("i",{className:"fa-solid fa-pump-soap",style:{marginRight:"0.5rem",color:"#1e3a8a"}}):t.events.name==="Body Conditioning"?e.jsx("i",{className:"fa-solid fa-dumbbell",style:{marginRight:"0.5rem",color:"#a8a29e"}}):t.events.name==="Abs"?e.jsx("i",{className:"fa-brands fa-angular",style:{marginRight:"0.5rem",color:"#fde047"}}):null,n=new Date(t.events.dateStart),m=new Date(n.getTime()+t.events.eventTime*6e4)<r?{backgroundImage:"repeating-linear-gradient(-45deg, #bbb 0 1px, #eee 1px 0.8rem)"}:n<r?{backgroundColor:"#ff7"}:{};return e.jsxs("div",{style:{...m,marginTop:"0.5rem"},children:[e.jsxs("div",{className:"x-flex-container",style:{fontWeight:"bold",color:"#1e293b"},children:[e.jsx("div",{className:"x-flex-left",children:s}),e.jsxs("div",{className:"x-flex-right",children:[e.jsxs("span",{style:{fontSize:"1.2rem"},children:[l,t.events.name]})," ","(",t.events.eventTime," min)"]})]}),e.jsxs("div",{className:"x-flex-container",children:[e.jsx("div",{className:"x-flex-left",children:status}),e.jsxs("div",{className:"x-flex-right x-caption",children:[e.jsx("b",{children:t.remainingPlaces})," places",t.remainingPlaces!==t.places&&` left (out of ${t.places} total)`," with"," ",e.jsx("em",{children:e.jsx("b",{children:t.staff.user.fullName})})," ","(",e.jsx("em",{children:t.location.name}),")"]})]}),t.costInc>0&&e.jsxs("p",{style:a,children:["price incl: £",t.costInc]}),t.costExc>0&&e.jsxs("p",{style:a,children:["price excl: £",t.costExc]}),!t.public&&e.jsx("p",{style:a,children:"private class"})]})},S=24*36e5,w=async t=>{const r="https://api.eu.membr.com/api/public/gyms/1548/bookings",s=new Date;s.setHours(5),s.setMinutes(0),s.setSeconds(0);const a=new Date(s.getTime()+t*S);a.setHours(23),console.log(`Get slots from ${s} to ${a}`);const l={page:"1",page_size:"100",from_date:s.toISOString(),to_date:a.toISOString(),locale:"en_GB"};return fetch(r+"?"+new URLSearchParams(l).toString()).then(n=>n.json()).then(n=>(console.log(n),n))};f.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(h,{children:e.jsx(y,{})})}));
