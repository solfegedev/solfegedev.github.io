import{j as s,c as gs}from"./client-B8KsQLkO.js";import{a as vs,C as _s}from"./CookieConsentWrapper-BX3Mx7Xo.js";import*as L from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import ys,{createContext as ws,useState as _,useRef as E,useEffect as F,useMemo as He,useCallback as $,useImperativeHandle as Ss,useContext as ge}from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import{g as ae,m as We}from"./store-ZXNLDa3M.js";import{c as Ns}from"./clipboard-nCoCNLhi.js";import{A as z,I as q,D as Cs}from"./Comps-Dnc7BUTO.js";import{D as oe}from"./dates-ZEyg73w4.js";import{B as G}from"./Badge-Be_eTuxu.js";import{u as Ds,b as Is,a as Fe}from"./useMergedRefs-BEcJmFAT.js";import{u as ks,A as ze,D as ee}from"./Dropdown-Ccmojf5N.js";import{u as bs,N as se,a as As,b as Te}from"./NavDropdown-CvA8nHaq.js";import{u as K,c as B,b as $s,d as Ps,e as Es}from"./Button-AoLKMrJK.js";import{f as Fs,m as Me}from"./ElementChildren-AZvnq_HE.js";import{t as zs,T as Ts,a as Ms}from"./TransitionWrapper-BMbdxB92.js";import{g as Ze,a as Ls}from"./googleMap-BK_wHpwx.js";import Bs from"https://cdn.jsdelivr.net/npm/proj4@2.12.1/+esm";import{C as Os,B as te}from"./Pagination-BOoHJ7U-.js";import{C as Le,F as O}from"./Form-D9HkiQhX.js";import{C as ne}from"./CloseButton-Dzo1iBth.js";import"https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm";import"https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3.0.1/+esm";import"./Nav-CstR1CC2.js";import"./CardHeaderContext-Dz0GHBZ8.js";const ce=ws(null),Rs=({children:e})=>{const t=ae(),[r,n]=_(parseInt(t.get("page")??"1")),[a,p]=_((t.get("exclSTC")??"0")==="1"),[u,i]=_((t.get("exclFlats")??"0")==="1"),[l,x]=_((t.get("exclDistance")??"0")==="1"),[d,o]=_(parseFloat(t.get("distance")??"0.3")),[m,y]=_(t.get("address")??""),[N,C]=_(t.get("agency")??""),[g,w]=_(t.get("price")??""),[D,j]=_(t.get("id")??""),v={selectedPage:r,setSelectedPage:n,isStcHidden:a,setIsStcHidden:p,isFlatHidden:u,setIsFlatHidden:i,isDistanceApplied:l,setIsDistanceApplied:x,valueDistance:d,setValueDistance:o,valueAddress:m,setValueAddress:y,valueAgency:N,setValueAgency:C,valuePrice:g,setValuePrice:w,valueID:D,setValueID:j};return s.jsx(ce.Provider,{value:v,children:e})};function Vs(e,t){const r=E(!0);F(()=>{if(r.current){r.current=!1;return}return e()},t)}const me=2**31-1;function Ge(e,t,r){const n=r-Date.now();e.current=n<=me?setTimeout(t,n):setTimeout(()=>Ge(e,t,r),me)}function Hs(){const e=ks(),t=E();return bs(()=>clearTimeout(t.current)),He(()=>{const r=()=>clearTimeout(t.current);function n(a,p=0){e()&&(r(),p<=me?t.current=setTimeout(a,p):Ge(t,a,Date.now()+p))}return{set:n,clear:r,handleRef:t}},[])}const Ue=L.forwardRef(({className:e,bsPrefix:t,as:r="div",...n},a)=>(t=K(t,"carousel-caption"),s.jsx(r,{ref:a,className:B(e,t),...n})));Ue.displayName="CarouselCaption";const qe=L.forwardRef(({as:e="div",bsPrefix:t,className:r,...n},a)=>{const p=B(r,K(t,"carousel-item"));return s.jsx(e,{ref:a,...n,className:p})});qe.displayName="CarouselItem";const Ws=40;function Zs(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&getComputedStyle(e.parentNode).display!=="none"}const Ke=L.forwardRef(({defaultActiveIndex:e=0,...t},r)=>{const{as:n="div",bsPrefix:a,slide:p=!0,fade:u=!1,controls:i=!0,indicators:l=!0,indicatorLabels:x=[],activeIndex:d,onSelect:o,onSlide:m,onSlid:y,interval:N=5e3,keyboard:C=!0,onKeyDown:g,pause:w="hover",onMouseOver:D,onMouseOut:j,wrap:v=!0,touch:X=!0,onTouchStart:le,onTouchMove:ie,onTouchEnd:de,prevIcon:ss=s.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:ye="Previous",nextIcon:ts=s.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:we="Next",variant:Se,className:ns,children:ue,...rs}=Ds({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),b=K(a,"carousel"),H=$s(),W=E(null),[Ne,Ce]=_("next"),[as,Y]=_(!1),[Z,De]=_(!1),[S,os]=_(d||0);F(()=>{!Z&&d!==S&&(W.current?Ce(W.current):Ce((d||0)>S?"next":"prev"),p&&De(!0),os(d||0))},[d,Z,S,p]),F(()=>{W.current&&(W.current=null)});let T=0,Ie;Fs(ue,(c,h)=>{++T,h===d&&(Ie=c.props.interval)});const ke=Is(Ie),I=$(c=>{if(Z)return;let h=S-1;if(h<0){if(!v)return;h=T-1}W.current="prev",o==null||o(h,c)},[Z,S,o,v,T]),k=Fe(c=>{if(Z)return;let h=S+1;if(h>=T){if(!v)return;h=0}W.current="next",o==null||o(h,c)}),pe=E();Ss(r,()=>({element:pe.current,prev:I,next:k}));const be=Fe(()=>{!document.hidden&&Zs(pe.current)&&(H?I():k())}),M=Ne==="next"?"start":"end";Vs(()=>{p||(m==null||m(S,M),y==null||y(S,M))},[S]);const cs=`${b}-item-${Ne}`,ls=`${b}-item-${M}`,is=$(c=>{zs(c),m==null||m(S,M)},[m,S,M]),ds=$(()=>{De(!1),y==null||y(S,M)},[y,S,M]),us=$(c=>{if(C&&!/input|textarea/i.test(c.target.tagName))switch(c.key){case"ArrowLeft":c.preventDefault(),H?k(c):I(c);return;case"ArrowRight":c.preventDefault(),H?I(c):k(c);return}g==null||g(c)},[C,g,I,k,H]),ps=$(c=>{w==="hover"&&Y(!0),D==null||D(c)},[w,D]),xs=$(c=>{Y(!1),j==null||j(c)},[j]),Ae=E(0),Q=E(0),$e=Hs(),hs=$(c=>{Ae.current=c.touches[0].clientX,Q.current=0,w==="hover"&&Y(!0),le==null||le(c)},[w,le]),fs=$(c=>{c.touches&&c.touches.length>1?Q.current=0:Q.current=c.touches[0].clientX-Ae.current,ie==null||ie(c)},[ie]),ms=$(c=>{if(X){const h=Q.current;Math.abs(h)>Ws&&(h>0?I(c):k(c))}w==="hover"&&$e.set(()=>{Y(!1)},N||void 0),de==null||de(c)},[X,w,I,k,$e,N,de]),Pe=N!=null&&!as&&!Z,xe=E();F(()=>{var c,h;if(!Pe)return;const A=H?I:k;return xe.current=window.setInterval(document.visibilityState?be:A,(c=(h=ke.current)!=null?h:N)!=null?c:void 0),()=>{xe.current!==null&&clearInterval(xe.current)}},[Pe,I,k,ke,N,be,H]);const Ee=He(()=>l&&Array.from({length:T},(c,h)=>A=>{o==null||o(h,A)}),[l,T,o]);return s.jsxs(n,{ref:pe,...rs,onKeyDown:us,onMouseOver:ps,onMouseOut:xs,onTouchStart:hs,onTouchMove:fs,onTouchEnd:ms,className:B(ns,b,p&&"slide",u&&`${b}-fade`,Se&&`${b}-${Se}`),children:[l&&s.jsx("div",{className:`${b}-indicators`,children:Me(ue,(c,h)=>s.jsx("button",{type:"button","data-bs-target":"","aria-label":x!=null&&x.length?x[h]:`Slide ${h+1}`,className:h===S?"active":void 0,onClick:Ee?Ee[h]:void 0,"aria-current":h===S},h))}),s.jsx("div",{className:`${b}-inner`,children:Me(ue,(c,h)=>{const A=h===S;return p?s.jsx(Ts,{in:A,onEnter:A?is:void 0,onEntered:A?ds:void 0,addEndListener:Ms,children:(U,js)=>L.cloneElement(c,{...js,className:B(c.props.className,A&&U!=="entered"&&cs,(U==="entered"||U==="exiting")&&"active",(U==="entering"||U==="exiting")&&ls)})}):L.cloneElement(c,{className:B(c.props.className,A&&"active")})})}),i&&s.jsxs(s.Fragment,{children:[(v||d!==0)&&s.jsxs(ze,{className:`${b}-control-prev`,onClick:I,children:[ss,ye&&s.jsx("span",{className:"visually-hidden",children:ye})]}),(v||d!==T-1)&&s.jsxs(ze,{className:`${b}-control-next`,onClick:k,children:[ts,we&&s.jsx("span",{className:"visually-hidden",children:we})]})]})]})});Ke.displayName="Carousel";const he=Object.assign(Ke,{Caption:Ue,Item:qe});let ve=new Date;const re=e=>{const t=new Date(e),r={day:"numeric",month:"short",year:"numeric"},n=ve.valueOf()-t.valueOf();return n<14*oe&&(r.weekday="long"),n<2*oe&&(r.hour="numeric",r.minute="numeric"),t.toLocaleDateString("en-GB",r)},Gs=e=>{const t=new Date(e),r={day:"numeric",month:"short",year:"numeric"};return t.toLocaleDateString("en-GB",r)},Je=e=>{const t=new Date(e),r={month:"short",year:"numeric"};return t.toLocaleDateString("en-GB",r)},fe=e=>{const t=new Date(e);return((ve.valueOf()-t.valueOf())/oe).toLocaleString("en-GB",{maximumFractionDigits:1})},Be=(e,t=!1)=>{if(e===void 0)return"";const r=new Date(e),n=ve.valueOf()-r.valueOf();let a=(t?-n:n)/6e4;const p=a<0?"-":"";a=Math.abs(a);const u=Math.floor(a/60),l=Math.floor(a%60).toLocaleString("en-GB",{minimumIntegerDigits:2});return`${p}${u}h${l}m`},R=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(e),Us=(e,t)=>s.jsxs(s.Fragment,{children:[e,", ",t]}),P=(e,t)=>s.jsxs(s.Fragment,{children:[e," ◆ ",t]}),f=({icon:e,text:t,url:r=""})=>{const n=r?s.jsx(z,{href:r,children:t}):t;return s.jsxs("span",{className:"x-nowrap",children:[e," ",n]})},J=({isLink:e=!1,style:t={}})=>s.jsx(_e,{src:"img/properties/r.ico",isLink:e,style:t}),V=({isLink:e=!1,style:t={}})=>s.jsx(_e,{src:"img/properties/z.ico",isLink:e,style:t}),Xe=({isLink:e=!1,style:t={}})=>s.jsx(_e,{src:"img/properties/o.ico",isLink:e,style:t}),_e=({isLink:e=!1,style:t={},src:r})=>(t.width=e?"1.4rem":"1rem",s.jsx(q,{loading:"lazy",referrerPolicy:"no-referrer",crossOrigin:"anonymous",src:r,style:t,alt:"z Property"})),qs=({item:e})=>{const t=[s.jsx(Ks,{item:e},"1")];return e.zoopla_advert_id&&t.push(s.jsx(Ye,{item:e},"2")),e.zoopla_uprn&&t.push(s.jsx(Js,{item:e},"3")),e.epcs&&t.push(s.jsx(Xs,{item:e},"4")),s.jsxs("p",{children:[s.jsx("strong",{children:"Links:"})," ",t.reduce(P)]})},Ye=({item:e})=>{const r=`https://www.zoopla.co.uk/${e.channel==="rent"?"to-rent":"for-sale"}/details/${e.zoopla_advert_id}/`;return s.jsx(f,{icon:s.jsx(V,{}),url:r,text:"Advert"})},Ks=({item:e})=>{const t=`https://www.rightmove.co.uk/properties/${e.id}#/?channel=${e.channel}`;return s.jsx(f,{icon:s.jsx(J,{}),url:t,text:"Advert"})},Js=({item:e})=>{const t=`https://www.zoopla.co.uk/property/uprn/${e.zoopla_uprn}/`;return s.jsx(f,{icon:s.jsx(V,{}),url:t,text:"Estimate"})},Xs=({item:e})=>s.jsxs(s.Fragment,{children:[s.jsx(J,{})," ",e.epcs.map((t,r)=>s.jsx(z,{href:t.url,children:t.caption},r)).reduce(Us)]}),Ys=({item:e})=>{const t=(e.floorplans??[]).map(n=>({url:n.url})).reverse(),r=(e.images??[]).concat(t);return s.jsxs(s.Fragment,{children:[r.length===0?s.jsx("p",{className:"x-noImageProvided",children:"No images provided"}):s.jsx(Qs,{imagesAndFloorplans:r}),s.jsx(st,{item:e}),s.jsx(et,{item:e})]})},Qs=({imagesAndFloorplans:e})=>s.jsxs(he,{interval:oe,defaultActiveIndex:0,children:[e.map((t,r)=>s.jsxs(he.Item,{children:[s.jsx(q,{className:"d-block",src:t.url,alt:t.caption?"caption: "+t.caption:void 0}),s.jsx(he.Caption,{style:{display:"flex",justifyContent:"center"},children:s.jsxs("p",{children:[s.jsx("strong",{children:`${r+1}/${e.length} `}),t.caption||""]})})]},r)),e.length===0&&s.jsx(q,{className:"d-block",alt:"No images provided"})]}),et=({item:e})=>e.zoopla_est||e.zoopla_peak||e.zoopla_rent_estimate?s.jsxs(s.Fragment,{children:[e.zoopla_est&&s.jsx(tt,{item:e}),e.zoopla_peak&&s.jsx(nt,{item:e}),e.zoopla_rent_estimate&&s.jsx(rt,{item:e})]}):e.zoopla_advert_id?s.jsx("p",{className:"x-caption-2",children:s.jsx(Ye,{item:e})}):null,st=({item:e})=>{const t=`https://www.rightmove.co.uk/properties/${e.id}#/media?channel=${e.channel}`,r=n=>{const a=["",`  "${e.id}": {`,'    "zoopla_advert_id": null, "zoopla_uprn": null,',`    "__address_r": "${e.address}",`,'    "notes": null, "size_sqm": null, "coordinates": null},',""];Ns(a.join(`
`))};return s.jsxs("p",{className:"x-caption-1",children:[s.jsx("span",{className:"x-loop-index",onClick:r,children:e.loopIndex}),e.sold_let&&s.jsx(G,{text:"dark",bg:"warning",className:"x-badge",children:e.sold_let}),e.is_new&&s.jsx(G,{text:"light",bg:"success",className:"x-badge",children:"NEW"}),s.jsx(z,{href:t,style:{textDecoration:"none"},children:R(e.price)})]})},tt=({item:e})=>{const t=`https://www.zoopla.co.uk/property/uprn/${e.zoopla_uprn}/`;return e.channel==="rent"?s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:je(e.price,e.zoopla_rent_estimate)})," on"," ",s.jsxs(z,{href:t,className:"x-manual-all-link",children:[R(e.zoopla_rent_estimate),"pm ",s.jsx(V,{style:{verticalAlign:"unset"}})]})]}):s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:je(e.price,e.zoopla_est*1e3)})," on"," ",s.jsxs(z,{href:t,className:"x-manual-all-link",children:[R(e.zoopla_est*1e3)," ",s.jsx(V,{style:{verticalAlign:"unset"}})]}),e.zoopla_estimate_date&&s.jsxs("span",{children:[" in ",Je(e.zoopla_estimate_date)]})]})},nt=({item:e})=>e.channel==="rent"?s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:R(e.zoopla_est*1e3)}),e.zoopla_estimate_date&&s.jsxs("span",{children:[" in ",Je(e.zoopla_estimate_date)]})]}):s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:je(e.price,e.zoopla_peak*1e3)})," on"," ",s.jsx("span",{className:"x-manual-all",children:R(e.zoopla_peak*1e3)})," peak of"," ",s.jsx("span",{className:"x-manual-all",children:e.zoopla_peak_date})]}),rt=({item:e})=>e.channel==="rent"?s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:Oe(e.price/e.zoopla_est/1e3)})," rental yield"]}):s.jsxs("p",{className:"x-caption-2",children:[s.jsx("span",{className:"x-manual-all",children:Oe(e.zoopla_rent_estimate/e.price)})," ","rental yield at ",R(e.zoopla_rent_estimate),"pm"]}),je=(e,t)=>new Intl.NumberFormat("en-GB",{style:"percent",signDisplay:"exceptZero",minimumFractionDigits:1,maximumFractionDigits:1}).format((e-t)/t),Oe=e=>new Intl.NumberFormat("en-GB",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format((1+e)**12-1),at=({item:e})=>{const t=e.coordinates.join(","),r=e.closest&&e.closest.coords?e.closest.coords.join(","):"",n=[s.jsx(ot,{coordsCsv:t,closeCoordsCsv:r},"1"),s.jsx(ct,{coordsCsv:t,closeCoordsCsv:r},"2"),s.jsx(lt,{coordsCsv:t},"3"),s.jsx(it,{coordsCsv:t},"4"),s.jsx(dt,{coords:e.coordinates},"5"),s.jsx(ut,{coords:e.coordinates},"6"),s.jsx(pt,{coords:e.coordinates},"7"),s.jsx(xt,{coords:e.coordinates},"8"),s.jsx(ht,{coords:e.coordinates},"9")];return s.jsxs("p",{children:[s.jsx("strong",{children:"Maps:"})," ",n.reduce(P)]})},ot=({coordsCsv:e,closeCoordsCsv:t})=>{const n=Ze({...t?{origin:t,destination:e,isByFoot:!0}:{origin:e},centreZoom:"15z"}),a=s.jsx("i",{className:"fa-solid fa-map-location",style:{color:"#b01010"}});return s.jsx(f,{icon:a,url:n,text:"Map"})},ct=({coordsCsv:e,closeCoordsCsv:t})=>{const n=Ze({...t?{origin:t,destination:e,isByFoot:!0}:{origin:e},centreZoom:"2696m",isSatellite:!0});return s.jsx(f,{icon:"🛰",url:n,text:"Satellite"})},lt=({coordsCsv:e})=>{const t=`https://earth.google.com/web/@${e},132a,25d,35y,0h,0t,0r`;return s.jsx(f,{icon:"🌍",url:t,text:"Earth"})},it=({coordsCsv:e})=>{const t=Ls({originCsv:e}),r=s.jsx("i",{className:"fa-solid fa-street-view",style:{color:"#b08800"}});return s.jsx(f,{icon:r,url:t,text:"StreetView"})},dt=({coords:e})=>{const r=`https://open.xploria.co.uk/app/know-your-place?map=${e.slice(0).reverse().join("*")}*18&view=elcAu7IT4`;return s.jsx(f,{icon:"💰",url:r,text:"Standards"})},ut=({coords:e})=>{const r=`https://open.xploria.co.uk/app/know-your-place?map=${e.slice(0).reverse().join("*")}*18&view=elcAu7IT4&theme=w0fDyvnN_`,n=s.jsx("i",{className:"fa-solid fa-handcuffs",style:{color:"#808080"}});return s.jsx(f,{icon:n,url:r,text:"Crime"})},pt=({coords:e})=>{const t="EPSG:4326",r="+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs",[n,a]=Bs(t,r,[e[1],e[0]]).map(Math.round),p=`https://check-long-term-flood-risk.service.gov.uk/map?easting=${n}&northing=${a}`;return s.jsx(f,{icon:"🌊",url:p,text:"Flood"})},xt=({coords:e})=>{const t=e.join("%2C"),r=`https://en-gb.topographic-map.com/map/?center=${t}&zoom=16&popup=${t}`,n=s.jsx("i",{className:"fa-solid fa-mountain-sun",style:{color:"#6fcdf9"}});return s.jsx(f,{icon:n,url:r,text:"Elevation"})},ht=({coords:e})=>{const r=`https://www.cyclosm.org/#map=17/${e.join("/")}/cyclosm`,n=s.jsx("i",{className:"fa-solid fa-person-biking",style:{color:"#b01010"}});return s.jsx(f,{icon:n,url:r,text:"Cycling"})},ft=({item:e})=>{const t=[s.jsx(vt,{item:e},"1"),s.jsx(_t,{item:e},"2"),s.jsx(mt,{item:e},"3"),s.jsx(jt,{item:e},"4"),s.jsx(yt,{item:e},"5"),s.jsx(gt,{item:e},"6")];return s.jsxs("p",{children:[s.jsx("strong",{children:"In Street:"})," ",t.reduce(P)]})},mt=({item:e})=>{const t=e.address_postcode.toLowerCase().replace(" ","-"),r=e.address_postcode.toUpperCase().replace(" ","%20"),n=`https://www.zoopla.co.uk/house-prices/${t}/?q=${r}&sortOrder=address&sortDirection=asc`;return s.jsx(f,{icon:s.jsx(V,{}),url:n,text:"Estimate / Sold Prices"})},jt=({item:e})=>{const r=`https://www.rightmove.co.uk/house-prices/${e.address_postcode.toLowerCase().replace(" ","-")}.html`;return s.jsx(f,{icon:s.jsx(J,{}),url:r,text:"Sold Prices"})},gt=({item:e})=>{const r=`https://www.crime-statistics.co.uk/postcode/${e.address_postcode.toUpperCase().replace(" ","%20")}`,n=s.jsx("i",{className:"fa-solid fa-handcuffs",style:{color:"#808080"}});return s.jsx(f,{icon:n,url:r,text:"Crimes"})},vt=({item:e})=>{const t=e.address_postcode.toLowerCase().replace(" ","-"),r=e.address_postcode.replace(" ","+"),n=e.channel==="rent"?`https://www.zoopla.co.uk/to-rent/property/${t}/?radius=0&q=${r}&search_source=to-rent&results_sort=newest_listings&include_rented=true`:`https://www.zoopla.co.uk/for-sale/property/${t}/?radius=0&q=${r}&search_source=for-sale&results_sort=newest_listings&is_auction=false&is_retirement_home=false&is_shared_ownership=false&include_sold=true`;return s.jsx(f,{icon:s.jsx(V,{}),url:n,text:"Adverts"})},_t=({item:e})=>{const t=e.address_postcode.toLowerCase().replace(" ","-"),r=e.channel==="rent"?`https://www.onthemarket.com/to-rent/property/${t}/?let-agreed=true&radius=0.25&shared=false&student=false&view=grid`:`https://www.onthemarket.com/for-sale/property/${t}/?auction=false&radius=0.25&retirement=false&shared-ownership=false&under-offer=true&view=grid`;return s.jsx(f,{icon:s.jsx(Xe,{}),url:r,text:"Adverts"})},yt=({item:e})=>{const t=s.jsx("i",{className:"fa-solid fa-leaf",style:{color:"#659748"}}),n=`https://find-energy-certificate.service.gov.uk/find-a-certificate/search-by-postcode?postcode=${e.address_postcode.replace(" ","+")}`;return s.jsx(f,{icon:t,url:n,text:"EPCs"})},wt=({item:e})=>s.jsxs("div",{className:"x-card-right",children:[e.notes&&s.jsxs("p",{className:"x-manual-all",children:["Extra Notes: ",e.notes]}),s.jsx(St,{item:e}),e.let_info&&s.jsx(Pt,{let_info:e.let_info}),e.previous_prices&&s.jsx(Nt,{prices:e.previous_prices}),s.jsx(Ct,{item:e}),s.jsx(Dt,{item:e}),s.jsx(It,{item:e}),s.jsx(at,{item:e}),s.jsx(qs,{item:e}),e.brochures&&s.jsx(kt,{brochures:e.brochures}),e.key_features&&s.jsx(At,{features:e.key_features}),s.jsx(ft,{item:e}),s.jsx("p",{children:e.summary}),e.agency&&s.jsx($t,{agency:e.agency,id:e.id})]}),St=({item:e})=>e.date_updated?s.jsxs("p",{children:[s.jsx("span",{className:"x-update-reason-updated",children:"Reduced"})," ",s.jsx("span",{className:"x-update-reason-updated x-date-relative","data-convert":"days","data-date":e.date_updated,children:fe(e.date_updated)})," ","days ago (on ",s.jsx("strong",{children:re(e.date_updated)}),"). First added"," ",s.jsx("span",{className:"x-first-added x-date-relative","data-convert":"days","data-date":e.date_added,children:fe(e.date_added)})," ","days ago (on ",s.jsx("strong",{children:re(e.date_added)}),")."]}):s.jsxs("p",{children:[s.jsx("span",{className:"x-update-reason-new",children:"New"})," ",s.jsx("span",{className:"x-update-reason-new x-date-relative","data-convert":"days","data-date":e.date_added,children:fe(e.date_added)})," ","days ago (on ",s.jsx("strong",{children:re(e.date_added)}),")."]}),Nt=({prices:e})=>s.jsxs("p",{children:[s.jsx("strong",{children:"Previous prices:"})," ",e.map((t,r)=>s.jsxs("span",{children:[R(t.price)," on ",Gs(t.date)]},r)).reduce(P)]}),Ct=({item:e})=>{const t=s.jsx("span",{className:"x-size-sqm",children:e.size_sqm}),r=[];return e.size_sqm&&r.push(s.jsx(f,{icon:t,text:"m²"},"1")),r.push(s.jsx(f,{icon:"🛏",text:`${e.bedrooms}`},"2")),e.bathrooms!==void 0&&r.push(s.jsx(f,{icon:"🛀",text:`${e.bathrooms}`},"3")),r.push(s.jsx(f,{icon:e.property_group_icon,text:e.property_group},"4")),s.jsx("p",{children:r.reduce(P)})},Dt=({item:e})=>{let t="";return e.address_street_num&&(t=/\d\w?$/i.test(e.address_street_num)?" ":", "),s.jsxs("p",{children:[e.address_street_num&&s.jsx("span",{className:"x-manual-all",children:e.address_street_num}),s.jsx("strong",{children:t+e.address+", "}),s.jsx("strong",{className:"x-postcode",children:e.address_postcode})]})},It=({item:e})=>s.jsxs("p",{children:[s.jsx("span",{className:"x-distance-miles",children:e.closest.miles.toFixed(2)})," miles to"," ",s.jsx("span",{className:"x-known-place",children:e.closest.place})]}),kt=({brochures:e})=>s.jsxs("p",{children:[s.jsx("strong",{children:"Brochures:"})," ",e.map((t,r)=>s.jsx(bt,{brochure:t},r)).reduce(P)]}),bt=({brochure:e})=>{const r=e.url.replace(/\?.*/,"").replace(/\/+$/,"").toLowerCase().endsWith(".pdf")?s.jsx("i",{className:"fa-solid fa-file-lines",style:{color:"#dc3545"}}):s.jsx("i",{className:"fa-solid fa-link",style:{color:"#808080"}});return s.jsx(f,{icon:r,url:e.url,text:e.caption})},At=({features:e})=>s.jsxs("p",{children:[s.jsx("strong",{children:"Other:"})," ",e.map((t,r)=>s.jsx("span",{children:t},r)).reduce(P)]}),$t=({agency:e,id:t})=>s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"end"},children:[s.jsx(q,{src:e.url,title:e.caption,alt:e.caption,style:{maxHeight:"3rem",maxWidth:"6rem"}}),s.jsx("span",{style:{fontSize:"0.6rem",marginLeft:"1rem"},children:t})]}),Pt=({let_info:e})=>{const t=[];return e.date_available&&t.push(`Available ${e.date_available}`),e.furnish&&t.push(e.furnish),e.min_duration&&t.push(`${e.min_duration} months`),t.length===0?s.jsx(s.Fragment,{}):s.jsxs("p",{children:[s.jsx("strong",{children:"Let:"})," ",t.map((r,n)=>s.jsx("span",{children:r},n)).reduce(P)]})},Qe=L.forwardRef(({bsPrefix:e,fluid:t=!1,as:r="div",className:n,...a},p)=>{const u=K(e,"container"),i=typeof t=="string"?`-${t}`:"-fluid";return s.jsx(r,{ref:p,...a,className:B(n,t?`${u}${i}`:u)})});Qe.displayName="Container";const es=L.forwardRef(({bsPrefix:e,className:t,as:r="div",...n},a)=>{const p=K(e,"row"),u=Ps(),i=Es(),l=`${p}-cols`,x=[];return u.forEach(d=>{const o=n[d];delete n[d];let m;o!=null&&typeof o=="object"?{cols:m}=o:m=o;const y=d!==i?`-${d}`:"";m!=null&&x.push(`${l}${y}-${m}`)}),s.jsx(r,{ref:a,...n,className:B(t,p,...x)})});es.displayName="Row";const Et=({item:e})=>s.jsx(Os,{className:"x-card","data-miles":e.closest.miles,"data-isflat":e.property_group_icon==="🏢",children:s.jsx(Qe,{fluid:!0,children:s.jsxs(es,{children:[s.jsx(Le,{sm:"5",style:{padding:0},children:s.jsx(Ys,{item:e})}),s.jsx(Le,{sm:"7",style:{padding:"1rem",margin:"0"},children:s.jsx(wt,{item:e})})]})})}),Re={chesterfield:"Chesterfield",chesterfield_ashgate:"Chesterfield Ashgate",chesterfield_rent:"Chesterfield rent",herts:"Herts",herts_s:"Herts_s",hitchin_johnsonpl:"Hitchin Johnson Place",hitchin_rent:"Hitchin rent",basingstoke:"Basingstoke",london:"London"},Ft=()=>{var i;const[e,t]=_(!0),r=ae(),n=((i=r.get("data"))==null?void 0:i.replace("properties_",""))??"chesterfield_ashgate",a=r.get("nav")==="all"?["chesterfield","chesterfield_ashgate","chesterfield_rent","herts","herts_s","hitchin_johnsonpl","hitchin_rent","basingstoke","london"]:["chesterfield","chesterfield_ashgate","chesterfield_rent","herts","hitchin_johnsonpl","hitchin_rent","basingstoke"],p=l=>{t(l)},u=l=>{const x=new URLSearchParams;x.set("data",`properties_${l}`);const d=ae().get("nav");return d&&x.set("nav",d),"?"+x.toString()};return s.jsxs(se,{id:"x-navbar",expand:"sm",variant:"dark",onToggle:p,expanded:e,children:[s.jsx(se.Brand,{children:s.jsx(q,{src:"img/favicon_properties.png",height:"32"})}),s.jsx(se.Toggle,{"aria-controls":"basic-navbar-nav"}),s.jsx(se.Collapse,{id:"basic-navbar-nav",children:s.jsx(As,{className:"ms-auto me-auto",children:s.jsx(Te,{title:Re[n],active:!0,children:a.map((l,x)=>s.jsx(Te.Item,{href:u(l),active:l===n,children:Re[l]},x))})})})]})},zt=({items:e,setItemsDisplayed:t,PAGE_LENGTH:r})=>{const n=ge(ce),a=Math.ceil(e.length/r),p=u=>{const i=u.target.closest("a.page-link");if(!i)return;let l;i.innerText.includes("First")?l=1:i.innerText.includes("Previous")?l=Math.max(1,n.selectedPage-1):i.innerText.includes("Next")?l=Math.min(a,n.selectedPage+1):i.innerText.includes("Last")?l=a:l=parseInt(i.innerText),console.log(`Page change from: ${n.selectedPage} to: ${l}`),n.setSelectedPage(l),We({page:[l.toString(),"1"]}),document.querySelector("#x-scroll-anchor").scrollIntoView()};return F(()=>{const u=[];for(let i=0;i<e.length;++i)if(Math.floor(i/r)+1===n.selectedPage){const l=e[i];if(l.loopIndex=`${i+1} / ${e.length}`,u.push(l),u.length===r)break}t(u),console.log("itemsDisplayed",u.length)},[n.selectedPage,e,t,r]),s.jsxs(te,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",marginTop:"1rem"},onClick:p,children:[a>0&&s.jsx(te.Prev,{disabled:n.selectedPage===1,style:{width:"4rem"}}),[...Array(a).keys()].map(u=>s.jsx(te.Item,{active:u+1===n.selectedPage,children:u+1},u)),a>0&&s.jsx(te.Next,{disabled:n.selectedPage===a,style:{width:"4rem"}})]})},Tt=e=>s.jsx("i",{className:"fa-solid fa-spinner fa-spin",...e}),Ve=({checkState:e,label:t})=>{const[r,n]=e;return s.jsxs(O,{children:[s.jsx(O.Check,{type:"switch",onChange:a=>n(a.target.checked),checked:r}),s.jsx("p",{children:t})]})},Mt=({checkState:e,labelBefore:t,labelAfter:r,maxWidth:n="3rem",textState:a})=>{const[p,u]=e,[i,l]=a,x=o=>{l(parseFloat(o.target.value)),u(!1)},d=o=>{o.key==="Enter"?(u(!0),o.preventDefault()):u(!1)};return s.jsxs(O,{children:[s.jsx(O.Check,{type:"switch",onChange:o=>u(o.target.checked),checked:p}),s.jsx("p",{children:t}),s.jsx(O.Control,{value:i,onChange:x,style:{maxWidth:n},onKeyDown:d}),r&&s.jsx("p",{children:r})]})},Lt=({label:e,maxWidth:t,addrState:r,priceState:n,agencyState:a,idState:p})=>{const[u,i]=_(""),[l,x]=r,[d,o]=n,[m,y]=a,[N,C]=p,g=(j,v="")=>{v=v.trim(),j==="address"?x(v):j==="price"?o(v):j==="agency"?y(v):j==="id"&&C(v)},w=j=>{i(j.target.value)},D=j=>{j.key==="Enter"&&(j.preventDefault(),g("address",u))};return s.jsxs(s.Fragment,{children:[s.jsxs(O,{children:[e&&s.jsx("p",{children:e}),s.jsx(O.Control,{value:u,onChange:w,style:{maxWidth:t},onKeyDown:D}),s.jsxs(Cs,{title:"Search",variant:"success",id:"x-btn-search",onSelect:j=>g(j,u),children:[s.jsx(ee.Item,{eventKey:"address",children:"in Address"}),s.jsx(ee.Item,{eventKey:"price",children:"in Price"}),s.jsx(ee.Item,{eventKey:"agency",children:"in Agency"}),s.jsx(ee.Item,{eventKey:"id",children:"in ID"})]})]}),l&&s.jsxs(G,{pill:!0,bg:"primary",children:[s.jsx(ne,{onClick:()=>g("address"),variant:"white"}),s.jsx("span",{children:l})]}),d&&s.jsxs(G,{pill:!0,bg:"info",text:"dark",children:[s.jsx(ne,{onClick:()=>g("price")}),s.jsx("span",{children:d})]}),m&&s.jsxs(G,{pill:!0,bg:"light",text:"dark",children:[s.jsx(ne,{onClick:()=>g("agency")}),s.jsx("span",{children:m})]}),N&&s.jsxs(G,{pill:!0,bg:"dark",children:[s.jsx(ne,{onClick:()=>g("id"),variant:"white"}),s.jsx("span",{children:N})]})]})},Bt=({data:e,setItemsSelectable:t,PAGE_LENGTH:r})=>{const n=ge(ce),a=i=>i.toLowerCase().replaceAll(" ","");F(()=>{const i=a(n.valueAddress);let l,x;n.valueAgency==="z"?(l="",x=!0):(l=a(n.valueAgency),x=!1);const d=[];e.items.forEach(o=>{n.isStcHidden&&o.sold_let||n.isFlatHidden&&o.property_group_icon==="🏢"||n.isDistanceApplied&&o.closest&&n.valueDistance&&o.closest.miles>n.valueDistance||i&&!a((o.address_street_num||"")+o.address+o.address_postcode).includes(i)||n.valuePrice&&!o.price.toString().includes(n.valuePrice)||x&&(o.zoopla_advert_id||o.zoopla_uprn)||n.valueID&&!o.id.toString().includes(n.valueID)||l&&!a(o.agency.caption).includes(l)||d.push(o)}),t(d),console.log("itemsSelectable",d.length),n.selectedPage>Math.ceil(d.length/r)&&n.setSelectedPage(1)},[n.isStcHidden,n.isFlatHidden,n.isDistanceApplied,n.valueDistance,n.valueAddress,n.valueAgency,n.valuePrice,n.valueID]),F(()=>{We({exclSTC:[n.isStcHidden?"1":"0","0"],exclFlats:[n.isFlatHidden?"1":"0","0"],exclDistance:[n.isDistanceApplied?"1":"0","0"],distance:[n.valueDistance.toFixed(1),"0.3"],address:[n.valueAddress,""],agency:[n.valueAgency,""],price:[n.valuePrice,""],id:[n.valueID,""],page:[n.selectedPage.toString(),"1"]})},[n.isStcHidden,n.isFlatHidden,n.isDistanceApplied,n.valueDistance,n.valueAddress,n.valueAgency,n.valuePrice,n.valueID,n.selectedPage]);const p=e.items.filter(i=>i.sold_let).length,u=e.items.filter(i=>i.property_group_icon==="🏢").length;return s.jsxs(s.Fragment,{children:[s.jsx(Ot,{data:e}),s.jsx(Rt,{searches:e.searches,title:e.title}),s.jsx(Ve,{checkState:[n.isStcHidden,n.setIsStcHidden],label:`Exclude the ${p} STCs`}),s.jsx(Ve,{checkState:[n.isFlatHidden,n.setIsFlatHidden],label:`Exclude the ${u} flats`}),s.jsx(Mt,{checkState:[n.isDistanceApplied,n.setIsDistanceApplied],labelBefore:"Exclude further than",labelAfter:"miles",maxWidth:"3rem",textState:[n.valueDistance,n.setValueDistance]}),s.jsx(Lt,{maxWidth:"8rem",addrState:[n.valueAddress,n.setValueAddress],priceState:[n.valuePrice,n.setValuePrice],agencyState:[n.valueAgency,n.setValueAgency],idState:[n.valueID,n.setValueID]})]})},Ot=({data:e})=>s.jsxs("p",{children:[s.jsxs("span",{className:"x-nowrap",children:["Updated"," ",s.jsx("span",{id:"x-updated-relative",className:"x-date-relative","data-convert":"hours","data-date":e.updated_on,children:Be(e.updated_on)})," ","ago"]})," ",s.jsxs("span",{className:"x-nowrap",children:["(on ",s.jsx("span",{children:re(e.updated_on)}),")"]})," ",s.jsx("br",{}),"Next check starts in:"," ",s.jsx("span",{id:"x-nexton-relative",className:"x-date-relative","data-convert":"hours-negative","data-date":e.next_on,children:Be(e.next_on,!0)})]}),Rt=({searches:e,title:t})=>s.jsxs("p",{children:[t,". Based on ",s.jsx(J,{style:{verticalAlign:"baseline"}})," searches only:",s.jsx("br",{}),e&&e.map((r,n)=>s.jsx(Vt,{search:r},n)).reduce(P)]}),Vt=({search:e})=>s.jsxs("span",{className:"x-nowrap",children:[s.jsx(z,{href:e.url_r,children:s.jsx(J,{isLink:!0,style:{verticalAlign:"sub"}})})," ",s.jsx(z,{href:e.url_z,children:s.jsx(V,{isLink:!0,style:{verticalAlign:"sub"}})})," ",s.jsx(z,{href:e.url_o,children:s.jsx(Xe,{isLink:!0,style:{verticalAlign:"sub"}})})," ",s.jsx("strong",{children:e.name})]}),Ht=()=>{const e=ge(ce),t=ae().get("data")??"properties_chesterfield_ashgate",r=E(null),[n,a]=_({__loading:!0}),[p,u]=_([]),[i,l]=_([]),x=10;if(F(()=>{let d=!0;return(async()=>{try{const m=localStorage.getItem("location"),y=m===t?localStorage.getItem("next_on"):null,N=m===t?localStorage.getItem("last_attempt"):null,C=new Date().valueOf();let g,w;N&&C-new Date(N).valueOf()<4e3?(w="FORCE RELOAD due to 2 attempts within 4s",g="reload"):y?new Date(y).valueOf()>C?(w="Keep CACHED data",g="force-cache"):(w="RELOADING as cache data expired",g="reload"):(w="LOAD first time",g="reload"),console.log(`Cache Loading info = ${w}`),r.current&&(r.current.innerText=w);const D=`https://raw.githubusercontent.com/solfegedev/solfegedev.github.io/main/data/${t}.json`;console.log(`Fetch data from server: ${D}`);const j=await fetch(D,{cache:g});if(!j.ok){const X=j.status===404?"This link seems wrong, check you have the correct one":`Failed to get data for: ${t}`;throw new Error(X)}const v=await j.json();localStorage.setItem("location",t),localStorage.setItem("next_on",new Date(v.next_on).toISOString()),localStorage.setItem("last_attempt",new Date().toISOString()),console.log(v),d&&a(v)}catch(m){d&&a({__error:`${m}`})}})().catch(console.error),()=>{d=!1}},[t]),n.favicon){const d=document.querySelector("link[rel='icon']");d.href=`img/properties/${n.favicon}`}if(document.title=n.region,n.__loading)return s.jsxs("main",{children:[s.jsx(Tt,{id:"x-spinner"}),s.jsx("p",{id:"x-spinner-info",ref:r})]});if(n.__error)return s.jsx("main",{style:{color:"red"},children:n.__error});{const d=(e.selectedPage-1)*x+1,o=p.length,m=Math.min(o,d+x-1),y=s.jsx(zt,{items:p,setItemsDisplayed:l,PAGE_LENGTH:x});return s.jsxs(s.Fragment,{children:[s.jsx(Ft,{}),s.jsxs("main",{children:[s.jsx(Bt,{data:n,setItemsSelectable:u,PAGE_LENGTH:x}),s.jsxs("div",{id:"x-scroll-anchor",children:[y,o===0?s.jsx("p",{children:s.jsx("strong",{children:"No matching results"})}):s.jsxs("p",{children:["Page ",s.jsx("strong",{children:e.selectedPage}),": properties"," ",s.jsx("strong",{children:d})," -",s.jsx("strong",{children:m})," out of"," ",s.jsx("strong",{children:o})]}),i&&i.map((N,C)=>s.jsx(Et,{item:N},C))]}),y]})]})}};gs.createRoot(document.getElementById("root")).render(s.jsx(ys.StrictMode,{children:s.jsx(_s,{children:s.jsx(Rs,{children:s.jsx(Ht,{})})})}));
