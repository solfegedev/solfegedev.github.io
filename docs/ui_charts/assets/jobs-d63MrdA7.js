var P=Object.defineProperty;var N=(t,s,o)=>s in t?P(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o;var A=(t,s,o)=>N(t,typeof s!="symbol"?s+"":s,o);import{j as e,c as O}from"./client-B8KsQLkO.js";import{A as v,I as B,C as G}from"./LinkItem-Ca_1r-95.js";import M,{useState as w,useRef as U,useEffect as W}from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import{i as F}from"./all-BSES4dDh.js";import{D as f}from"./dates-CuBDtlM6.js";import{p as E}from"./index-CelBjTPE.js";import{A as $}from"./Alert-CVO57zo1.js";import{C as I,B as u,D as H}from"./DropdownButton-B32QvKfC.js";import{D as q}from"./Dropdown-B2rYS5Iw.js";import{F as T}from"./Form-5wlro-Ns.js";import{B as z}from"./Button-Dbum-Du3.js";import"https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm";import"https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3.0.1/+esm";import"./CloseButton-CUYUvxPi.js";import"./ElementChildren-AZvnq_HE.js";const g={ICONS:"#0f766e",BG_CARD:"white",BG_CARD_APPLIED:"#dcfce7",BG_LONG_DESCRIPTION:"#f0fdfa",BG_LONG_DESCRIPTION_BUTTON:"#0f766e",NOTES:"#312e81",DATE_INITAL:"#15803d",DATE_UPDATED:"#854d0e"},h=({className:t,style:s,...o})=>e.jsx("i",{className:t,style:{color:g.ICONS,marginLeft:".5rem",marginRight:".2rem",...s},...o}),C=864e5,J=({initialDate:t,repostedDate:s,appliedTs:o})=>{const a={weekday:"short",day:"2-digit",month:"short",year:"numeric"},i={...a,hour:"2-digit",minute:"2-digit"},n=new Date().getTime(),r=n-new Date(t).getTime(),d=r/C,j=f(r);let p=d>3?a:i;const _=new Date(t).toLocaleDateString("en-GB",p),y=n-new Date(s).getTime(),x=f(y),D=y/C;p=D>3?a:i;const l=new Date(s).toLocaleDateString("en-GB",p);let c;if(o){const S=n-o*1e3,k=f(S);p=S/C>3?a:i;const L=new Date(s).toLocaleDateString("en-GB",p);c=e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"fa-solid fa-calendar-days"})," App ",e.jsx("b",{children:k})," ago (on"," ",L,")"]})}const m=d-D<1?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"fa-solid fa-calendar-days"})," Created"," ",e.jsx("b",{style:{color:g.DATE_INITAL},children:x})," ago (on ",l,")"]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"fa-solid fa-calendar-days"})," Created"," ",e.jsx("b",{style:{color:g.DATE_INITAL},children:j})," ago (on ",_,")."," ",e.jsx(h,{className:"fa-solid fa-calendar-days"})," Reposted"," ",e.jsx("b",{style:{color:g.DATE_UPDATED},children:x})," ago (on ",l,")"]});return e.jsxs("p",{children:[m,c]})},Y=({longDescription:t})=>{const s="4rem",o="hidden",[a,i]=w(!1),n=U(null);let r;return a?(r="fa-solid fa-minimize",n.current&&(n.current.style.removeProperty("max-height"),n.current.style.removeProperty("overflow-y"))):(r="fa-solid fa-maximize",n.current&&(n.current.style.maxHeight=s,n.current.style.overflowY=o)),e.jsxs("div",{style:{backgroundColor:g.BG_LONG_DESCRIPTION,padding:"0.3rem 1rem"},children:[e.jsx(h,{className:r,onClick:()=>i(!a),style:{fontSize:"1.4rem"}}),e.jsx("div",{ref:n,style:{overflowY:o,maxHeight:s},children:t})]})},X=({item:t,index:s})=>{const o=t.applied_timestamp?g.BG_CARD_APPLIED:g.BG_CARD,a=E(t.short_description_html),i=E(t.long_description_html),n=new Date(t.updated_on),r=f(new Date().getTime()-n.getTime()),d=new Date(t.created_on),j=f(new Date().getTime()-d.getTime());return e.jsx(I,{className:"x-shadow",style:{width:F?"90vw":"100vw"},children:e.jsxs(I.Body,{style:{background:o,borderRadius:"1rem"},children:[t.notes&&e.jsx($,{variant:"warning",dismissible:!0,style:{padding:0,margin:"0.4rem auto",maxWidth:"80vw"},children:e.jsx("ul",{style:{margin:0},children:t.notes.map((p,_)=>e.jsx("li",{children:p},_))})}),e.jsxs(I.Title,{children:[s," ",e.jsx(v,{href:"https://www.cwjobs.co.uk"+t.url,children:t.job_title})]}),e.jsxs("p",{children:[t.company_logo_url&&e.jsx(B,{src:t.company_logo_url,alt:t.company_name,title:t.company_name,style:{maxHeight:"2rem",maxWidth:"60rem",marginRight:"1rem"}}),t.company_name]}),e.jsx(J,{initialDate:t.date_created,repostedDate:t.date_posted,appliedTs:t.applied_timestamp}),e.jsxs("p",{children:[e.jsx(h,{className:"fa-solid fa-money-bill-wave"})," ",t.salary,t.work_type&&t.work_type!=="Contract"&&e.jsx(K,{workType:t.work_type})]}),e.jsxs("p",{children:[e.jsx(h,{className:"fa-solid fa-location-dot"})," ",t.location,t.post_code&&`, ${t.post_code}`,t.work_from_home&&`, WFH: ${t.work_from_home}`]}),e.jsxs("p",{children:[e.jsx(h,{className:"fa-solid fa-circle-info"})," ",a]}),e.jsx(Y,{longDescription:i}),e.jsxs("p",{style:{fontSize:"0.7rem"},children:[t.id," was"," ",e.jsx("span",{style:{color:t.online_status==="online"?"green":"red"},children:t.online_status})," ","when refreshed ",e.jsx("b",{children:r})," ago. First seen ",e.jsx("b",{children:j})," ago."]})]})})},K=({workType:t})=>e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"fa-solid fa-file-contract"}),t]}),R=({selectedPage:t,setSelectedPage:s,numPages:o})=>{const a=Array.from({length:o},(r,d)=>1+d),i=new URL(window.location.href),n=r=>{s(r),i.searchParams.set("page",r.toString()),history.pushState({},"",i)};return e.jsxs(u,{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",marginTop:"1rem"},children:[e.jsx(u.First,{disabled:t===1,onClick:()=>n(1)}),e.jsx(u.Prev,{disabled:t===1,onClick:()=>n(t-1)}),a.map(r=>e.jsx(u.Item,{active:t===r,onClick:()=>n(r),children:r},r)),e.jsx(u.Next,{disabled:t===o,onClick:()=>n(t+1)}),e.jsx(u.Last,{disabled:t===o,onClick:()=>n(o)})]})},Q=({limitPerPage:t,setLimitPerPage:s,setSelectedPage:o})=>{const a=[10,25,50,1e3];return e.jsx(H,{title:`${t} per page`,children:a.map((i,n)=>e.jsx(q.Item,{active:i===t,onClick:()=>{s(i),o(1)},children:i},n))})},V=({sortedByRepost:t,setSortedByRepost:s})=>e.jsx(T,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:e.jsx(T.Check,{type:"switch",label:t?"sorted by repost":"sorted by initial creation",checked:t,onChange:()=>s(!t)})}),Z=({onlyApplied:t,setOnlyApplied:s,setSelectedPage:o})=>e.jsx(T,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:e.jsx(T.Check,{type:"switch",label:t?"only App":"all (App or not)",checked:t,onChange:()=>{s(!t),o(1)}})}),ee=({updatedDateIso:t,nextIterationDateIso:s,numItems:o})=>{const a=new Date(t),i=f(new Date().getTime()-a.getTime()),n=a.toLocaleDateString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=new Date(s).getTime()-new Date().getTime(),j=f(d);return e.jsxs("p",{children:["Updated ",e.jsx("b",{style:{color:g.DATE_INITAL},children:i})," ago (on ",n,")",e.jsx("br",{}),"Next update in ",e.jsx("b",{style:{color:g.DATE_UPDATED},children:j}),e.jsx("br",{}),e.jsx("b",{children:o})," items from"," ",e.jsx("a",{href:"https://www.cwjobs.co.uk/jobs/contract/python-or-c%23-or-perl-or-sdet-or-test-or-qa-or-automation-or-dsp-or-raspberry?sort=2&action=facet_selected%3bage%3b1&postedWithin=1",children:"search"})]})},te=()=>e.jsx("div",{style:{margin:"1rem auto"},children:ne().map((t,s)=>e.jsx(z,{variant:"dark",type:"submit",href:t.link,target:"_blank",rel:"noreferrer",style:{backgroundColor:"#4792fb",padding:"0 0.8rem",margin:"0 0.4rem"},children:t.name},s))}),oe=["python","typescript","SDET","playwright","selenium","cucumber","specflow","gherkin"],b=["python","C#","C++","perl","typescript","matlab","FastAPI","Django","SDET","QA","test","automation","playwright","selenium","cucumber","specflow","gherkin","DSP","raspberry"],se=["Delivery Driver","Furniture Installer","Electrician","Mechanic","Civil Engineering","Electrical Inspector","MOT Tester","Heating Engineer"],ne=()=>{const t=b.map(encodeURIComponent).join("-or-"),s=new URLSearchParams({sc:"0kf:jt(contract);",fromage:"7",sort:"date",q:"("+b.join(" OR ")+")"+se.map(d=>` -"${d}"`).join("")}).toString(),o=new URLSearchParams({f_JT:"C",f_WT:["2","3"].join(","),geoId:"101165590",refresh:"true",sortBy:"DD",keywords:b.join(" OR "),f_TPR:`r${7*24*3600}`}).toString(),a=new URLSearchParams({q:b.join(" OR "),page:"1",et:"CONTRACT",recency:"last week",so:"m.h.s"}).toString(),i=new URLSearchParams({sortby:"12",orderby:"0",ql:"Python,SDET,React,TypeScript,Next.js,FastAPI,Django"}).toString(),n=new URLSearchParams({locId:"2",locT:"N","sc.locationSeoString":"United Kingdom","sc.occupationParam":oe.join(" ")}).toString();return[{name:"CWjobs",link:`https://www.cwjobs.co.uk/jobs/contract/${t}?sort=2&action=sort_publish`},{name:"TotalJobs",link:`https://www.totaljobs.com/jobs/contract/${t}?sort=2&action=sort_publish`},{name:"jobsite",link:`https://www.jobsite.co.uk/jobs/contract/${t}?sort=2&action=sort_publish`},{name:"Indeed",link:"https://uk.indeed.com/jobs?"+s},{name:"LinkedIn",link:"https://www.linkedin.com/jobs/search/?"+o},{name:"Glassdoor",link:"https://www.glassdoor.co.uk/Job/jobs.htm?"+n},{name:"Monster",link:"https://www.monster.co.uk/jobs/search?"+a},{name:"IT Jobs Watch",link:"https://www.itjobswatch.co.uk/contract.aspx?"+i}]},re=()=>{const[t,s]=w(null),[o,a]=w(null),[i,n]=w(!1),[r,d]=w(!1),[j,p]=w(25);W(()=>{(async()=>{try{const c="https://webapp1-90494.web.app/data/report_all.json";console.log(`Fetch data from server: ${c}`);const m=await fetch(c,{mode:"cors"});if(!m.ok){const k=m.status===404?"404: This link seems wrong, check you have the correct one":`Failed to get data: response status=${m.status} body=${m.body}`;throw new Error(k)}const S=await m.json();a(S)}catch(c){const m={__error:`Exception: ${c}`};a(m)}})(),s(parseInt(new ae().getPage()))},[]);const _=l=>"__error"in l;if(o===null||t===null)return e.jsx("main",{children:"loading..."});if(_(o))return e.jsx("main",{style:{color:"red"},children:o.__error});const y=i?o.items.filter(l=>"applied_timestamp"in l):o.items,x=y.length;o.pagination.limit_per_page=j,o.pagination.total_pages=Math.ceil(x/o.pagination.limit_per_page),o.pagination.offset=(t-1)*o.pagination.limit_per_page;const D=y.sort(r?(l,c)=>c.date_posted.localeCompare(l.date_posted):(l,c)=>c.date_created.localeCompare(l.date_created)).slice(o.pagination.offset,Math.min(o.pagination.offset+o.pagination.limit_per_page,x));return e.jsxs("main",{children:[e.jsx(ee,{updatedDateIso:o.updated_on,nextIterationDateIso:o.date_next_iteration,numItems:x}),e.jsx(te,{}),e.jsx(Z,{onlyApplied:i,setOnlyApplied:n,setSelectedPage:s}),e.jsx(V,{sortedByRepost:r,setSortedByRepost:d}),e.jsx(Q,{limitPerPage:j,setLimitPerPage:p,setSelectedPage:s}),e.jsx(R,{selectedPage:t,setSelectedPage:s,numPages:o.pagination.total_pages}),D.map((l,c)=>e.jsx(X,{index:o.pagination.offset+1+c,item:l},c)),e.jsx(R,{selectedPage:t,setSelectedPage:s,numPages:o.pagination.total_pages})]})};class ae{constructor(){A(this,"searchParams");this.searchParams=new URLSearchParams(window.location.search)}getPage(){return this.searchParams.get("page")??"1"}}O.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(G,{children:e.jsx(re,{})})}));
