var M=Object.defineProperty;var B=(e,s,o)=>s in e?M(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o;var I=(e,s,o)=>B(e,typeof s!="symbol"?s+"":s,o);import{j as t,c as $}from"./client-B8KsQLkO.js";import{C as v}from"./CookieConsentWrapper-DBLm3LwE.js";import F,{useState as _,useRef as G,useEffect as W}from"https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";import{i as U}from"./all-BSES4dDh.js";import{p as E}from"./index-DOpnoZj2.js";import{A as H}from"./Alert-CVO57zo1.js";import{C as T,B as u,D as z}from"./DropdownButton-dOZ0e_m9.js";import{D as Y}from"./Dropdown-CPLViXBt.js";import{F as S}from"./Form-5wlro-Ns.js";import{B as q}from"./Button-Dbum-Du3.js";import"https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm";import"https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3.0.1/+esm";import"./CloseButton-CUYUvxPi.js";import"./ElementChildren-AZvnq_HE.js";const J=1e3,N=6e4,P=36e5,O=864e5,f=(e,s=!1)=>{const o=Math.floor(e/O);e-=o*O;const r=Math.floor(e/P);e-=r*P;const i=Math.floor(e/N);e-=i*N;const n=Math.floor(e/J);if(o>0)return`${o.toFixed(1)} days`;{let a="";return r>0&&(a+=`${r}h`),a+=`${String(i).padStart(2,"0")}m`,s&&(a+=`${String(n).padStart(2,"0")}s`),a}},g={ICONS:"#0f766e",BG_CARD:"white",BG_CARD_APPLIED:"#dcfce7",BG_LONG_DESCRIPTION:"#f0fdfa",BG_LONG_DESCRIPTION_BUTTON:"#0f766e",NOTES:"#312e81",DATE_INITAL:"#15803d",DATE_UPDATED:"#854d0e"},h=({className:e,style:s,...o})=>t.jsx("i",{className:e,style:{color:g.ICONS,marginLeft:".5rem",marginRight:".2rem",...s},...o}),k=864e5,Q=({initialDate:e,repostedDate:s,appliedTs:o})=>{const r={weekday:"short",day:"2-digit",month:"short",year:"numeric"},i={...r,hour:"2-digit",minute:"2-digit"},n=new Date().getTime()-new Date(e).getTime(),a=n/k,m=f(n);let d=a>3?r:i;const y=new Date(e).toLocaleDateString("en-GB",d),j=new Date().getTime()-new Date(s).getTime(),w=f(j),x=j/k;d=x>3?r:i;const D=new Date(s).toLocaleDateString("en-GB",d);let c;if(o){const p=new Date().getTime()-o*1e3,b=f(p);d=p/k>3?r:i;const L=new Date(s).toLocaleDateString("en-GB",d);c=t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"fa-solid fa-calendar-days"})," App ",t.jsx("b",{children:b})," ago (on"," ",L,")"]})}const l=a-x<1?t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"fa-solid fa-calendar-days"})," Created"," ",t.jsx("b",{style:{color:g.DATE_INITAL},children:w})," ago (on ",D,")"]}):t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"fa-solid fa-calendar-days"})," Created"," ",t.jsx("b",{style:{color:g.DATE_INITAL},children:m})," ago (on ",y,")."," ",t.jsx(h,{className:"fa-solid fa-calendar-days"})," Reposted"," ",t.jsx("b",{style:{color:g.DATE_UPDATED},children:w})," ago (on ",D,")"]});return t.jsxs("p",{children:[l,c]})},V=({longDescription:e})=>{const s="4rem",o="hidden",[r,i]=_(!1),n=G(null);let a;return r?(a="fa-solid fa-minimize",n.current&&(n.current.style.removeProperty("max-height"),n.current.style.removeProperty("overflow-y"))):(a="fa-solid fa-maximize",n.current&&(n.current.style.maxHeight=s,n.current.style.overflowY=o)),t.jsxs("div",{style:{backgroundColor:g.BG_LONG_DESCRIPTION,padding:"0.3rem 1rem"},children:[t.jsx(h,{className:a,onClick:()=>i(!r),style:{fontSize:"1.4rem"}}),t.jsx("div",{ref:n,style:{overflowY:o,maxHeight:s},children:e})]})},X=({item:e,index:s})=>{const o=e.applied_timestamp?g.BG_CARD_APPLIED:g.BG_CARD,r=E(e.short_description_html),i=E(e.long_description_html),n=new Date(e.updated_on),a=f(new Date().getTime()-n.getTime()),m=new Date(e.created_on),d=f(new Date().getTime()-m.getTime());return t.jsx(T,{className:"x-shadow",style:{width:U?"90vw":"100vw"},children:t.jsxs(T.Body,{style:{background:o,borderRadius:"1rem"},children:[e.notes&&t.jsx(H,{variant:"warning",dismissible:!0,style:{padding:0,margin:"0.4rem auto",maxWidth:"80vw"},children:t.jsx("ul",{style:{margin:0},children:e.notes.map((y,j)=>t.jsx("li",{children:y},j))})}),t.jsxs(T.Title,{children:[s," ",t.jsx("a",{href:"https://www.cwjobs.co.uk"+e.url,target:"_blank",children:e.job_title})]}),t.jsxs("p",{children:[e.company_logo_url&&t.jsx("img",{src:e.company_logo_url,loading:"lazy",referrerPolicy:"no-referrer",alt:e.company_name,title:e.company_name,style:{maxHeight:"2rem",maxWidth:"60rem",marginRight:"1rem"}}),e.company_name]}),t.jsx(Q,{initialDate:e.date_created,repostedDate:e.date_posted,appliedTs:e.applied_timestamp}),t.jsxs("p",{children:[t.jsx(h,{className:"fa-solid fa-money-bill-wave"})," ",e.salary,e.work_type&&e.work_type!=="Contract"&&t.jsx(K,{workType:e.work_type})]}),t.jsxs("p",{children:[t.jsx(h,{className:"fa-solid fa-location-dot"})," ",e.location,e.post_code&&`, ${e.post_code}`,e.work_from_home&&`, WFH: ${e.work_from_home}`]}),t.jsxs("p",{children:[t.jsx(h,{className:"fa-solid fa-circle-info"})," ",r]}),t.jsx(V,{longDescription:i}),t.jsxs("p",{style:{fontSize:"0.7rem"},children:[e.id," was"," ",t.jsx("span",{style:{color:e.online_status==="online"?"green":"red"},children:e.online_status})," ","when refreshed ",t.jsx("b",{children:a})," ago. First seen ",t.jsx("b",{children:d})," ago."]})]})})},K=({workType:e})=>t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"fa-solid fa-file-contract"}),e]}),R=({selectedPage:e,setSelectedPage:s,numPages:o})=>{const r=Array.from({length:o},(a,m)=>1+m),i=new URL(window.location.href),n=a=>{s(a),i.searchParams.set("page",a.toString()),history.pushState({},"",i)};return t.jsxs(u,{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",marginTop:"1rem"},children:[t.jsx(u.First,{disabled:e===1,onClick:()=>n(1)}),t.jsx(u.Prev,{disabled:e===1,onClick:()=>n(e-1)}),r.map(a=>t.jsx(u.Item,{active:e===a,onClick:()=>n(a),children:a},a)),t.jsx(u.Next,{disabled:e===o,onClick:()=>n(e+1)}),t.jsx(u.Last,{disabled:e===o,onClick:()=>n(o)})]})},Z=({limitPerPage:e,setLimitPerPage:s,setSelectedPage:o})=>{const r=[10,25,50,1e3];return t.jsx(z,{title:`${e} per page`,children:r.map((i,n)=>t.jsx(Y.Item,{active:i===e,onClick:()=>{s(i),o(1)},children:i},n))})},ee=({sortedByRepost:e,setSortedByRepost:s})=>t.jsx(S,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:t.jsx(S.Check,{type:"switch",label:e?"sorted by repost":"sorted by initial creation",checked:e,onChange:()=>s(!e)})}),te=({onlyApplied:e,setOnlyApplied:s,setSelectedPage:o})=>t.jsx(S,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:t.jsx(S.Check,{type:"switch",label:e?"only App":"all (App or not)",checked:e,onChange:()=>{s(!e),o(1)}})}),oe=({updatedDateIso:e,nextIterationDateIso:s,numItems:o})=>{const r=new Date(e),i=f(new Date().getTime()-r.getTime()),n=r.toLocaleDateString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=new Date(s).getTime()-new Date().getTime(),d=f(m);return t.jsxs("p",{children:["Updated ",t.jsx("b",{style:{color:g.DATE_INITAL},children:i})," ago (on ",n,")",t.jsx("br",{}),"Next update in ",t.jsx("b",{style:{color:g.DATE_UPDATED},children:d}),t.jsx("br",{}),t.jsx("b",{children:o})," items from"," ",t.jsx("a",{href:"https://www.cwjobs.co.uk/jobs/contract/python-or-c%23-or-perl-or-sdet-or-test-or-qa-or-automation-or-dsp-or-raspberry?sort=2&action=facet_selected%3bage%3b1&postedWithin=1",children:"search"})]})},se=()=>t.jsx("div",{style:{margin:"1rem auto"},children:ne().map((e,s)=>t.jsx(q,{variant:"dark",type:"submit",href:e.link,target:"_blank",style:{backgroundColor:"#4792fb",padding:"0 0.8rem",margin:"0 0.4rem"},children:e.name},s))}),C="python C# C++ perl typescript matlab FastAPI Django SDET QA test automation playwright selenium cucumber specflow gherkin DSP raspberry".split(" ").map(encodeURIComponent),ne=()=>{const e="%2C",s=C.join("-or-"),o=C.join("+or+"),r=C.join("%20OR%20"),i="Python SDET React TypeScript FastAPI Django".split(" ").join(e);return[{name:"CWjobs",link:`https://www.cwjobs.co.uk/jobs/contract/${s}?sort=2&action=sort_publish`},{name:"TotalJobs",link:`https://www.totaljobs.com/jobs/contract/${s}?sort=2&action=sort_publish`},{name:"jobsite",link:`https://www.jobsite.co.uk/jobs/contract/${s}?sort=2&action=sort_publish`},{name:"Indeed",link:`https://uk.indeed.com/jobs?q=${o}&sc=0kf%3Ajt%28contract%29%3B&fromage=7`},{name:"Monster",link:`https://www.monster.co.uk/jobs/search?q=${o}&where=&page=1&et=CONTRACT&recency=last+week&so=m.h.s`},{name:"LinkedIn",link:`https://www.linkedin.com/jobs/search/?f_JT=C&f_WT=2${e}3&geoId=101165590&refresh=true&sortBy=DD&keywords=${r}&f_TPR=r${7*24*3600}`},{name:"IT Jobs Watch",link:`https://www.itjobswatch.co.uk/contract.aspx?sortby=6&orderby=0&ql=${i}`}]},ae=()=>{const[e,s]=_(null),[o,r]=_(null),[i,n]=_(!1),[a,m]=_(!1),[d,y]=_(25);W(()=>{(async()=>{try{const l="https://webapp1-90494.web.app/data/report_all.json";console.log(`Fetch data from server: ${l}`);const p=await fetch(l,{mode:"cors"});if(!p.ok){const A=p.status===404?"404: This link seems wrong, check you have the correct one":`Failed to get data: response status=${p.status} body=${p.body}`;throw new Error(A)}const b=await p.json();r(b)}catch(l){const p={__error:`Exception: ${l}`};r(p)}})(),s(parseInt(new re().getPage()))},[]);const j=c=>"__error"in c;if(o===null||e===null)return t.jsx("main",{children:"loading..."});if(j(o))return t.jsx("main",{style:{color:"red"},children:o.__error});const w=i?o.items.filter(c=>"applied_timestamp"in c):o.items,x=w.length;o.pagination.limit_per_page=d,o.pagination.total_pages=Math.ceil(x/o.pagination.limit_per_page),o.pagination.offset=(e-1)*o.pagination.limit_per_page;const D=w.sort(a?(c,l)=>l.date_posted.localeCompare(c.date_posted):(c,l)=>l.date_created.localeCompare(c.date_created)).slice(o.pagination.offset,Math.min(o.pagination.offset+o.pagination.limit_per_page,x));return t.jsxs("main",{children:[t.jsx(oe,{updatedDateIso:o.updated_on,nextIterationDateIso:o.date_next_iteration,numItems:x}),t.jsx(se,{}),t.jsx(te,{onlyApplied:i,setOnlyApplied:n,setSelectedPage:s}),t.jsx(ee,{sortedByRepost:a,setSortedByRepost:m}),t.jsx(Z,{limitPerPage:d,setLimitPerPage:y,setSelectedPage:s}),t.jsx(R,{selectedPage:e,setSelectedPage:s,numPages:o.pagination.total_pages}),D.map((c,l)=>t.jsx(X,{index:o.pagination.offset+1+l,item:c},l)),t.jsx(R,{selectedPage:e,setSelectedPage:s,numPages:o.pagination.total_pages})]})};class re{constructor(){I(this,"searchParams");this.searchParams=new URLSearchParams(window.location.search)}getPage(){return this.searchParams.get("page")??"1"}}$.createRoot(document.getElementById("root")).render(t.jsx(F.StrictMode,{children:t.jsx(v,{children:t.jsx(ae,{})})}));
